!function(I,g){if("object"==typeof exports&&"object"==typeof module)module.exports=g();else if("function"==typeof define&&define.amd)define([],g);else{var C=g();for(var A in C)("object"==typeof exports?exports:I)[A]=C[A]}}(this,function(){return function(I){function g(A){if(C[A])return C[A].exports;var l=C[A]={exports:{},id:A,loaded:!1};return I[A].call(l.exports,l,l.exports,g),l.loaded=!0,l.exports}var C={};return g.m=I,g.c=C,g.p="",g(0)}([function(module,exports,__webpack_require__){eval('"use strict";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar EventEmitter_1 = __webpack_require__(1);\r\nvar AsyncCaller_1 = __webpack_require__(2);\r\nvar DefinitionManager_1 = __webpack_require__(3);\r\nvar DirtyChecker_1 = __webpack_require__(13);\r\nvar Analyzer_1 = __webpack_require__(16);\r\nvar Selector_1 = __webpack_require__(10);\r\nvar UkuEventType_1 = __webpack_require__(14);\r\nvar Event_1 = __webpack_require__(15);\r\nvar Ukulele = (function (_super) {\r\n    __extends(Ukulele, _super);\r\n    function Ukulele() {\r\n        _super.apply(this, arguments);\r\n        this.asyncCaller = new AsyncCaller_1.AsyncCaller();\r\n    }\r\n    Ukulele.prototype.init = function () {\r\n        var _this = this;\r\n        this.asyncCaller.exec(function () {\r\n            _this.manageApplication();\r\n        });\r\n    };\r\n    Ukulele.prototype.handleElement = function (element) {\r\n        var _this = this;\r\n        this.analyizeElement(element, function (e) {\r\n            _this.dispatchEvent(new Event_1.Event(UkuEventType_1.UkuEventType.HANDLE_ELEMENT_COMPLETED, e));\r\n        });\r\n    };\r\n    Ukulele.prototype.registerController = function (instanceName, controllerInst) {\r\n        this._internal_getDefinitionManager().addControllerDefinition(instanceName, controllerInst);\r\n    };\r\n    Ukulele.prototype.getController = function (instanceName) {\r\n        return this._internal_getDefinitionManager().getControllerDefinition(instanceName).controllerInstance;\r\n    };\r\n    Ukulele.prototype.registerComponent = function (tag, templateUrl, preload) {\r\n        this._internal_getDefinitionManager().addComponentDefinition(tag, templateUrl, preload, this.asyncCaller);\r\n    };\r\n    Ukulele.prototype.getComponent = function (tagName) {\r\n        return this._internal_getDefinitionManager().getComponent(tagName);\r\n    };\r\n    Ukulele.prototype.getComponentController = function (componentId) {\r\n        return this._internal_getDefinitionManager().getControllerInstByDomId(componentId);\r\n    };\r\n    Ukulele.prototype.refresh = function (alias, excludeElement) {\r\n        if (!this.dirtyChecker) {\r\n            this.dirtyChecker = new DirtyChecker_1.DirtyChecker(this);\r\n        }\r\n        this.dirtyChecker.runDirtyChecking(alias, excludeElement);\r\n    };\r\n    //internal function\r\n    Ukulele.prototype._internal_getDefinitionManager = function () {\r\n        if (!this.defMgr) {\r\n            this.defMgr = new DefinitionManager_1.DefinitionManager(this);\r\n        }\r\n        return this.defMgr;\r\n    };\r\n    Ukulele.prototype._internal_dealWithElement = function (element) {\r\n        this.analyizeElement(element);\r\n    };\r\n    Ukulele.prototype.manageApplication = function () {\r\n        var _this = this;\r\n        var apps = Selector_1.Selector.querySelectorAll(document, "[uku-application]");\r\n        if (apps.length === 1) {\r\n            this.analyizeElement(apps[0], function (ele) {\r\n                _this.dispatchEvent(new Event_1.Event(UkuEventType_1.UkuEventType.INITIALIZED, ele));\r\n            });\r\n        }\r\n        else {\r\n            throw new Error("Only one \'uku-application\' can be declared in a whole html.");\r\n        }\r\n    };\r\n    Ukulele.prototype.analyizeElement = function (element, callback) {\r\n        var anylyzer = new Analyzer_1.Analyzer(this);\r\n        // if(callback){\r\n        // 	anylyzer.addListener(Analyzer.ANALYIZE_COMPLETED,(e)=>{\r\n        // 		callback(e.element);\r\n        // 	});\r\n        // }\r\n        if (callback) {\r\n            (function (retFunc) {\r\n                anylyzer.addListener(Analyzer_1.Analyzer.ANALYIZE_COMPLETED, function (e) {\r\n                    retFunc(e.element);\r\n                });\r\n            })(callback);\r\n        }\r\n        anylyzer.analyizeElement(element);\r\n    };\r\n    Ukulele.INITIALIZED = \'initialized\';\r\n    Ukulele.REFRESH = \'refresh\';\r\n    Ukulele.HANDLE_ELEMENT_COMPLETED = "handle_element_completed";\r\n    return Ukulele;\r\n}(EventEmitter_1.EventEmitter));\r\nexports.Ukulele = Ukulele;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9Va3VsZWxlLnRzP2NkNzEiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHNCQUFzQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCIsImZpbGUiOiIwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn07XHJcbnZhciBFdmVudEVtaXR0ZXJfMSA9IHJlcXVpcmUoXCIuL0V2ZW50RW1pdHRlclwiKTtcclxudmFyIEFzeW5jQ2FsbGVyXzEgPSByZXF1aXJlKFwiLi4vdXRpbC9Bc3luY0NhbGxlclwiKTtcclxudmFyIERlZmluaXRpb25NYW5hZ2VyXzEgPSByZXF1aXJlKFwiLi9EZWZpbml0aW9uTWFuYWdlclwiKTtcclxudmFyIERpcnR5Q2hlY2tlcl8xID0gcmVxdWlyZShcIi4vRGlydHlDaGVja2VyXCIpO1xyXG52YXIgQW5hbHl6ZXJfMSA9IHJlcXVpcmUoXCIuL0FuYWx5emVyXCIpO1xyXG52YXIgU2VsZWN0b3JfMSA9IHJlcXVpcmUoXCIuLi9leHRlbmQvU2VsZWN0b3JcIik7XHJcbnZhciBVa3VFdmVudFR5cGVfMSA9IHJlcXVpcmUoXCIuL1VrdUV2ZW50VHlwZVwiKTtcclxudmFyIEV2ZW50XzEgPSByZXF1aXJlKFwiLi9FdmVudFwiKTtcclxudmFyIFVrdWxlbGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKFVrdWxlbGUsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBVa3VsZWxlKCkge1xyXG4gICAgICAgIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgICAgIHRoaXMuYXN5bmNDYWxsZXIgPSBuZXcgQXN5bmNDYWxsZXJfMS5Bc3luY0NhbGxlcigpO1xyXG4gICAgfVxyXG4gICAgVWt1bGVsZS5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuYXN5bmNDYWxsZXIuZXhlYyhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLm1hbmFnZUFwcGxpY2F0aW9uKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgVWt1bGVsZS5wcm90b3R5cGUuaGFuZGxlRWxlbWVudCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLmFuYWx5aXplRWxlbWVudChlbGVtZW50LCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBfdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudF8xLkV2ZW50KFVrdUV2ZW50VHlwZV8xLlVrdUV2ZW50VHlwZS5IQU5ETEVfRUxFTUVOVF9DT01QTEVURUQsIGUpKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBVa3VsZWxlLnByb3RvdHlwZS5yZWdpc3RlckNvbnRyb2xsZXIgPSBmdW5jdGlvbiAoaW5zdGFuY2VOYW1lLCBjb250cm9sbGVySW5zdCkge1xyXG4gICAgICAgIHRoaXMuX2ludGVybmFsX2dldERlZmluaXRpb25NYW5hZ2VyKCkuYWRkQ29udHJvbGxlckRlZmluaXRpb24oaW5zdGFuY2VOYW1lLCBjb250cm9sbGVySW5zdCk7XHJcbiAgICB9O1xyXG4gICAgVWt1bGVsZS5wcm90b3R5cGUuZ2V0Q29udHJvbGxlciA9IGZ1bmN0aW9uIChpbnN0YW5jZU5hbWUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faW50ZXJuYWxfZ2V0RGVmaW5pdGlvbk1hbmFnZXIoKS5nZXRDb250cm9sbGVyRGVmaW5pdGlvbihpbnN0YW5jZU5hbWUpLmNvbnRyb2xsZXJJbnN0YW5jZTtcclxuICAgIH07XHJcbiAgICBVa3VsZWxlLnByb3RvdHlwZS5yZWdpc3RlckNvbXBvbmVudCA9IGZ1bmN0aW9uICh0YWcsIHRlbXBsYXRlVXJsLCBwcmVsb2FkKSB7XHJcbiAgICAgICAgdGhpcy5faW50ZXJuYWxfZ2V0RGVmaW5pdGlvbk1hbmFnZXIoKS5hZGRDb21wb25lbnREZWZpbml0aW9uKHRhZywgdGVtcGxhdGVVcmwsIHByZWxvYWQsIHRoaXMuYXN5bmNDYWxsZXIpO1xyXG4gICAgfTtcclxuICAgIFVrdWxlbGUucHJvdG90eXBlLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uICh0YWdOYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ludGVybmFsX2dldERlZmluaXRpb25NYW5hZ2VyKCkuZ2V0Q29tcG9uZW50KHRhZ05hbWUpO1xyXG4gICAgfTtcclxuICAgIFVrdWxlbGUucHJvdG90eXBlLmdldENvbXBvbmVudENvbnRyb2xsZXIgPSBmdW5jdGlvbiAoY29tcG9uZW50SWQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faW50ZXJuYWxfZ2V0RGVmaW5pdGlvbk1hbmFnZXIoKS5nZXRDb250cm9sbGVySW5zdEJ5RG9tSWQoY29tcG9uZW50SWQpO1xyXG4gICAgfTtcclxuICAgIFVrdWxlbGUucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbiAoYWxpYXMsIGV4Y2x1ZGVFbGVtZW50KSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmRpcnR5Q2hlY2tlcikge1xyXG4gICAgICAgICAgICB0aGlzLmRpcnR5Q2hlY2tlciA9IG5ldyBEaXJ0eUNoZWNrZXJfMS5EaXJ0eUNoZWNrZXIodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZGlydHlDaGVja2VyLnJ1bkRpcnR5Q2hlY2tpbmcoYWxpYXMsIGV4Y2x1ZGVFbGVtZW50KTtcclxuICAgIH07XHJcbiAgICAvL2ludGVybmFsIGZ1bmN0aW9uXHJcbiAgICBVa3VsZWxlLnByb3RvdHlwZS5faW50ZXJuYWxfZ2V0RGVmaW5pdGlvbk1hbmFnZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmRlZk1ncikge1xyXG4gICAgICAgICAgICB0aGlzLmRlZk1nciA9IG5ldyBEZWZpbml0aW9uTWFuYWdlcl8xLkRlZmluaXRpb25NYW5hZ2VyKHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5kZWZNZ3I7XHJcbiAgICB9O1xyXG4gICAgVWt1bGVsZS5wcm90b3R5cGUuX2ludGVybmFsX2RlYWxXaXRoRWxlbWVudCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5hbmFseWl6ZUVsZW1lbnQoZWxlbWVudCk7XHJcbiAgICB9O1xyXG4gICAgVWt1bGVsZS5wcm90b3R5cGUubWFuYWdlQXBwbGljYXRpb24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgYXBwcyA9IFNlbGVjdG9yXzEuU2VsZWN0b3IucXVlcnlTZWxlY3RvckFsbChkb2N1bWVudCwgXCJbdWt1LWFwcGxpY2F0aW9uXVwiKTtcclxuICAgICAgICBpZiAoYXBwcy5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgdGhpcy5hbmFseWl6ZUVsZW1lbnQoYXBwc1swXSwgZnVuY3Rpb24gKGVsZSkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnRfMS5FdmVudChVa3VFdmVudFR5cGVfMS5Va3VFdmVudFR5cGUuSU5JVElBTElaRUQsIGVsZSkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk9ubHkgb25lICd1a3UtYXBwbGljYXRpb24nIGNhbiBiZSBkZWNsYXJlZCBpbiBhIHdob2xlIGh0bWwuXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBVa3VsZWxlLnByb3RvdHlwZS5hbmFseWl6ZUVsZW1lbnQgPSBmdW5jdGlvbiAoZWxlbWVudCwgY2FsbGJhY2spIHtcclxuICAgICAgICB2YXIgYW55bHl6ZXIgPSBuZXcgQW5hbHl6ZXJfMS5BbmFseXplcih0aGlzKTtcclxuICAgICAgICAvLyBpZihjYWxsYmFjayl7XHJcbiAgICAgICAgLy8gXHRhbnlseXplci5hZGRMaXN0ZW5lcihBbmFseXplci5BTkFMWUlaRV9DT01QTEVURUQsKGUpPT57XHJcbiAgICAgICAgLy8gXHRcdGNhbGxiYWNrKGUuZWxlbWVudCk7XHJcbiAgICAgICAgLy8gXHR9KTtcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgaWYgKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIChmdW5jdGlvbiAocmV0RnVuYykge1xyXG4gICAgICAgICAgICAgICAgYW55bHl6ZXIuYWRkTGlzdGVuZXIoQW5hbHl6ZXJfMS5BbmFseXplci5BTkFMWUlaRV9DT01QTEVURUQsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0RnVuYyhlLmVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pKGNhbGxiYWNrKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYW55bHl6ZXIuYW5hbHlpemVFbGVtZW50KGVsZW1lbnQpO1xyXG4gICAgfTtcclxuICAgIFVrdWxlbGUuSU5JVElBTElaRUQgPSAnaW5pdGlhbGl6ZWQnO1xyXG4gICAgVWt1bGVsZS5SRUZSRVNIID0gJ3JlZnJlc2gnO1xyXG4gICAgVWt1bGVsZS5IQU5ETEVfRUxFTUVOVF9DT01QTEVURUQgPSBcImhhbmRsZV9lbGVtZW50X2NvbXBsZXRlZFwiO1xyXG4gICAgcmV0dXJuIFVrdWxlbGU7XHJcbn0oRXZlbnRFbWl0dGVyXzEuRXZlbnRFbWl0dGVyKSk7XHJcbmV4cG9ydHMuVWt1bGVsZSA9IFVrdWxlbGU7XHJcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvY29yZS9Va3VsZWxlLnRzXG4gKiogbW9kdWxlIGlkID0gMFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==')},function(module,exports){eval('"use strict";\r\nvar EventEmitter = (function () {\r\n    function EventEmitter() {\r\n        this.eventsPool = {};\r\n    }\r\n    EventEmitter.prototype.getEventsPool = function () {\r\n        return this.eventsPool;\r\n    };\r\n    EventEmitter.prototype.addListener = function (eventType, handler) {\r\n        if (!this.eventsPool[eventType]) {\r\n            this.eventsPool[eventType] = [];\r\n        }\r\n        this.eventsPool[eventType].push(handler);\r\n    };\r\n    EventEmitter.prototype.removeListener = function (eventType, handler) {\r\n        if (this.eventsPool[eventType]) {\r\n            for (var i = this.eventsPool[eventType].length - 1; i >= 0; i--) {\r\n                if (this.eventsPool[eventType][i] === handler) {\r\n                    this.eventsPool[eventType].splice(i, 1);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    };\r\n    EventEmitter.prototype.hasListener = function (eventType) {\r\n        if (this.eventsPool[eventType] && this.eventsPool[eventType].length > 0) {\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    EventEmitter.prototype.dispatchEvent = function (event) {\r\n        if (event && event.eventType) {\r\n            var handlers = this.eventsPool[event.eventType];\r\n            if (handlers) {\r\n                for (var i = 0; i < handlers.length; i++) {\r\n                    handlers[i].call(this, event);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    return EventEmitter;\r\n}());\r\nexports.EventEmitter = EventEmitter;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9FdmVudEVtaXR0ZXIudHM/Y2VlYSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtEQUErRCxRQUFRO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IscUJBQXFCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCIsImZpbGUiOiIxLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBFdmVudEVtaXR0ZXIgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRXZlbnRFbWl0dGVyKCkge1xyXG4gICAgICAgIHRoaXMuZXZlbnRzUG9vbCA9IHt9O1xyXG4gICAgfVxyXG4gICAgRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5nZXRFdmVudHNQb29sID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmV2ZW50c1Bvb2w7XHJcbiAgICB9O1xyXG4gICAgRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IGZ1bmN0aW9uIChldmVudFR5cGUsIGhhbmRsZXIpIHtcclxuICAgICAgICBpZiAoIXRoaXMuZXZlbnRzUG9vbFtldmVudFR5cGVdKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzUG9vbFtldmVudFR5cGVdID0gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZXZlbnRzUG9vbFtldmVudFR5cGVdLnB1c2goaGFuZGxlcik7XHJcbiAgICB9O1xyXG4gICAgRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lciA9IGZ1bmN0aW9uIChldmVudFR5cGUsIGhhbmRsZXIpIHtcclxuICAgICAgICBpZiAodGhpcy5ldmVudHNQb29sW2V2ZW50VHlwZV0pIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IHRoaXMuZXZlbnRzUG9vbFtldmVudFR5cGVdLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5ldmVudHNQb29sW2V2ZW50VHlwZV1baV0gPT09IGhhbmRsZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50c1Bvb2xbZXZlbnRUeXBlXS5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5oYXNMaXN0ZW5lciA9IGZ1bmN0aW9uIChldmVudFR5cGUpIHtcclxuICAgICAgICBpZiAodGhpcy5ldmVudHNQb29sW2V2ZW50VHlwZV0gJiYgdGhpcy5ldmVudHNQb29sW2V2ZW50VHlwZV0ubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuICAgIEV2ZW50RW1pdHRlci5wcm90b3R5cGUuZGlzcGF0Y2hFdmVudCA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIGlmIChldmVudCAmJiBldmVudC5ldmVudFR5cGUpIHtcclxuICAgICAgICAgICAgdmFyIGhhbmRsZXJzID0gdGhpcy5ldmVudHNQb29sW2V2ZW50LmV2ZW50VHlwZV07XHJcbiAgICAgICAgICAgIGlmIChoYW5kbGVycykge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoYW5kbGVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZXJzW2ldLmNhbGwodGhpcywgZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBFdmVudEVtaXR0ZXI7XHJcbn0oKSk7XHJcbmV4cG9ydHMuRXZlbnRFbWl0dGVyID0gRXZlbnRFbWl0dGVyO1xyXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL2NvcmUvRXZlbnRFbWl0dGVyLnRzXG4gKiogbW9kdWxlIGlkID0gMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==')},function(module,exports){eval('"use strict";\r\nvar FunctionObject = (function () {\r\n    function FunctionObject(_func, _argu) {\r\n        this.func = _func;\r\n        this.argu = _argu;\r\n    }\r\n    return FunctionObject;\r\n}());\r\nvar AsyncCaller = (function () {\r\n    function AsyncCaller() {\r\n        this.allTasksPool = [];\r\n        this.queueTasksPool = [];\r\n        this.execType = "queue";\r\n        this.errorMsg = "Only one type of task can be executed at same time";\r\n        Function.prototype.resolve = function (ac) {\r\n            ac.aysncFunRunOver.call(ac, this);\r\n        };\r\n    }\r\n    AsyncCaller.prototype.pushAll = function (asyncFunc, arguArr) {\r\n        if (this.queueTasksPool.length === 0) {\r\n            var funcObj = new FunctionObject(asyncFunc, arguArr);\r\n            this.allTasksPool.push(funcObj);\r\n        }\r\n        else {\r\n            console.error(this.errorMsg);\r\n        }\r\n        return this;\r\n    };\r\n    AsyncCaller.prototype.pushQueue = function (asyncFunc, arguArr) {\r\n        if (this.allTasksPool.length === 0) {\r\n            var funcObj = new FunctionObject(asyncFunc, arguArr);\r\n            this.queueTasksPool.push(funcObj);\r\n        }\r\n        else {\r\n            console.error(this.errorMsg);\r\n        }\r\n        return this;\r\n    };\r\n    AsyncCaller.prototype.aysncFunRunOver = function (caller) {\r\n        if (this.execType === "queue") {\r\n            if (this.queueTasksPool.length === 0) {\r\n                this.finalFunc && this.finalFunc();\r\n            }\r\n            else {\r\n                var funcObj = this.queueTasksPool[0];\r\n                this.queueTasksPool.shift();\r\n                funcObj.func.apply(funcObj, funcObj.argu);\r\n            }\r\n        }\r\n        else if (this.execType === "all") {\r\n            for (var i = 0; i < this.allTasksPool.length; i++) {\r\n                var task = this.allTasksPool[i];\r\n                if (caller === task.func) {\r\n                    this.allTasksPool.splice(i, 1);\r\n                    break;\r\n                }\r\n            }\r\n            if (this.allTasksPool.length === 0) {\r\n                this.finalFunc && this.finalFunc();\r\n            }\r\n        }\r\n    };\r\n    AsyncCaller.prototype.exec = function (callback) {\r\n        this.finalFunc = callback;\r\n        if (this.allTasksPool.length > 0) {\r\n            this.execType = "all";\r\n            this.executeAll();\r\n        }\r\n        else if (this.queueTasksPool.length > 0) {\r\n            this.execType = "queue";\r\n            this.executeQueue();\r\n        }\r\n        else {\r\n            this.finalFunc && this.finalFunc();\r\n        }\r\n    };\r\n    AsyncCaller.prototype.executeQueue = function () {\r\n        var funcObj = this.queueTasksPool[0];\r\n        this.queueTasksPool.shift();\r\n        funcObj.func.apply(funcObj, funcObj.argu);\r\n    };\r\n    ;\r\n    AsyncCaller.prototype.executeAll = function () {\r\n        for (var i = 0; i < this.allTasksPool.length; i++) {\r\n            var funcObj = this.allTasksPool[i];\r\n            funcObj.func.apply(funcObj, funcObj.argu);\r\n        }\r\n    };\r\n    ;\r\n    return AsyncCaller;\r\n}());\r\nexports.AsyncCaller = AsyncCaller;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdXRpbC9Bc3luY0NhbGxlci50cz8yNzJjIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQiw4QkFBOEI7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qiw4QkFBOEI7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEIiwiZmlsZSI6IjIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcclxudmFyIEZ1bmN0aW9uT2JqZWN0ID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEZ1bmN0aW9uT2JqZWN0KF9mdW5jLCBfYXJndSkge1xyXG4gICAgICAgIHRoaXMuZnVuYyA9IF9mdW5jO1xyXG4gICAgICAgIHRoaXMuYXJndSA9IF9hcmd1O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIEZ1bmN0aW9uT2JqZWN0O1xyXG59KCkpO1xyXG52YXIgQXN5bmNDYWxsZXIgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gQXN5bmNDYWxsZXIoKSB7XHJcbiAgICAgICAgdGhpcy5hbGxUYXNrc1Bvb2wgPSBbXTtcclxuICAgICAgICB0aGlzLnF1ZXVlVGFza3NQb29sID0gW107XHJcbiAgICAgICAgdGhpcy5leGVjVHlwZSA9IFwicXVldWVcIjtcclxuICAgICAgICB0aGlzLmVycm9yTXNnID0gXCJPbmx5IG9uZSB0eXBlIG9mIHRhc2sgY2FuIGJlIGV4ZWN1dGVkIGF0IHNhbWUgdGltZVwiO1xyXG4gICAgICAgIEZ1bmN0aW9uLnByb3RvdHlwZS5yZXNvbHZlID0gZnVuY3Rpb24gKGFjKSB7XHJcbiAgICAgICAgICAgIGFjLmF5c25jRnVuUnVuT3Zlci5jYWxsKGFjLCB0aGlzKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgQXN5bmNDYWxsZXIucHJvdG90eXBlLnB1c2hBbGwgPSBmdW5jdGlvbiAoYXN5bmNGdW5jLCBhcmd1QXJyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucXVldWVUYXNrc1Bvb2wubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHZhciBmdW5jT2JqID0gbmV3IEZ1bmN0aW9uT2JqZWN0KGFzeW5jRnVuYywgYXJndUFycik7XHJcbiAgICAgICAgICAgIHRoaXMuYWxsVGFza3NQb29sLnB1c2goZnVuY09iaik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKHRoaXMuZXJyb3JNc2cpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICBBc3luY0NhbGxlci5wcm90b3R5cGUucHVzaFF1ZXVlID0gZnVuY3Rpb24gKGFzeW5jRnVuYywgYXJndUFycikge1xyXG4gICAgICAgIGlmICh0aGlzLmFsbFRhc2tzUG9vbC5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgdmFyIGZ1bmNPYmogPSBuZXcgRnVuY3Rpb25PYmplY3QoYXN5bmNGdW5jLCBhcmd1QXJyKTtcclxuICAgICAgICAgICAgdGhpcy5xdWV1ZVRhc2tzUG9vbC5wdXNoKGZ1bmNPYmopO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcih0aGlzLmVycm9yTXNnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgQXN5bmNDYWxsZXIucHJvdG90eXBlLmF5c25jRnVuUnVuT3ZlciA9IGZ1bmN0aW9uIChjYWxsZXIpIHtcclxuICAgICAgICBpZiAodGhpcy5leGVjVHlwZSA9PT0gXCJxdWV1ZVwiKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnF1ZXVlVGFza3NQb29sLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5maW5hbEZ1bmMgJiYgdGhpcy5maW5hbEZ1bmMoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciBmdW5jT2JqID0gdGhpcy5xdWV1ZVRhc2tzUG9vbFswXTtcclxuICAgICAgICAgICAgICAgIHRoaXMucXVldWVUYXNrc1Bvb2wuc2hpZnQoKTtcclxuICAgICAgICAgICAgICAgIGZ1bmNPYmouZnVuYy5hcHBseShmdW5jT2JqLCBmdW5jT2JqLmFyZ3UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZXhlY1R5cGUgPT09IFwiYWxsXCIpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmFsbFRhc2tzUG9vbC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRhc2sgPSB0aGlzLmFsbFRhc2tzUG9vbFtpXTtcclxuICAgICAgICAgICAgICAgIGlmIChjYWxsZXIgPT09IHRhc2suZnVuYykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWxsVGFza3NQb29sLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5hbGxUYXNrc1Bvb2wubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpbmFsRnVuYyAmJiB0aGlzLmZpbmFsRnVuYygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEFzeW5jQ2FsbGVyLnByb3RvdHlwZS5leGVjID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy5maW5hbEZ1bmMgPSBjYWxsYmFjaztcclxuICAgICAgICBpZiAodGhpcy5hbGxUYXNrc1Bvb2wubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmV4ZWNUeXBlID0gXCJhbGxcIjtcclxuICAgICAgICAgICAgdGhpcy5leGVjdXRlQWxsKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMucXVldWVUYXNrc1Bvb2wubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmV4ZWNUeXBlID0gXCJxdWV1ZVwiO1xyXG4gICAgICAgICAgICB0aGlzLmV4ZWN1dGVRdWV1ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5maW5hbEZ1bmMgJiYgdGhpcy5maW5hbEZ1bmMoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgQXN5bmNDYWxsZXIucHJvdG90eXBlLmV4ZWN1dGVRdWV1ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZnVuY09iaiA9IHRoaXMucXVldWVUYXNrc1Bvb2xbMF07XHJcbiAgICAgICAgdGhpcy5xdWV1ZVRhc2tzUG9vbC5zaGlmdCgpO1xyXG4gICAgICAgIGZ1bmNPYmouZnVuYy5hcHBseShmdW5jT2JqLCBmdW5jT2JqLmFyZ3UpO1xyXG4gICAgfTtcclxuICAgIDtcclxuICAgIEFzeW5jQ2FsbGVyLnByb3RvdHlwZS5leGVjdXRlQWxsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5hbGxUYXNrc1Bvb2wubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIGZ1bmNPYmogPSB0aGlzLmFsbFRhc2tzUG9vbFtpXTtcclxuICAgICAgICAgICAgZnVuY09iai5mdW5jLmFwcGx5KGZ1bmNPYmosIGZ1bmNPYmouYXJndSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIDtcclxuICAgIHJldHVybiBBc3luY0NhbGxlcjtcclxufSgpKTtcclxuZXhwb3J0cy5Bc3luY0NhbGxlciA9IEFzeW5jQ2FsbGVyO1xyXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL3V0aWwvQXN5bmNDYWxsZXIudHNcbiAqKiBtb2R1bGUgaWQgPSAyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iXSwic291cmNlUm9vdCI6IiJ9')},function(module,exports,__webpack_require__){eval("\"use strict\";\r\nvar ObjectUtil_1 = __webpack_require__(4);\r\nvar Ajax_1 = __webpack_require__(5);\r\nvar ControllerModel_1 = __webpack_require__(6);\r\nvar AsyncCaller_1 = __webpack_require__(2);\r\nvar ComponentModel_1 = __webpack_require__(7);\r\nvar ComponentPoolItem_1 = __webpack_require__(8);\r\nvar UkuleleUtil_1 = __webpack_require__(9);\r\nvar DefinitionManager = (function () {\r\n    function DefinitionManager(_uku) {\r\n        this.controllersDefinition = {};\r\n        this.componentsDefinition = {};\r\n        this.componentsPool = {};\r\n        this.copyControllers = {};\r\n        this.dependentScriptsCache = {};\r\n        this.ajax = new Ajax_1.Ajax();\r\n        this.uku = _uku;\r\n    }\r\n    DefinitionManager.prototype.getComponentsDefinition = function () {\r\n        return this.componentsDefinition;\r\n    };\r\n    DefinitionManager.prototype.getComponentsPool = function () {\r\n        return this.componentsPool;\r\n    };\r\n    DefinitionManager.prototype.setComponentsPool = function (pool) {\r\n        this.componentsPool = pool;\r\n    };\r\n    DefinitionManager.prototype.setComponentsDefinition = function (value) {\r\n        this.componentsDefinition = value;\r\n    };\r\n    DefinitionManager.prototype.getComponentDefinition = function (tagName) {\r\n        return this.componentsDefinition[tagName];\r\n    };\r\n    DefinitionManager.prototype.getControllerDefinition = function (instanceName) {\r\n        return this.controllersDefinition[instanceName];\r\n    };\r\n    DefinitionManager.prototype.getControllersDefinition = function () {\r\n        return this.controllersDefinition;\r\n    };\r\n    DefinitionManager.prototype.getComponent = function (tagName) {\r\n        return this.componentsPool[tagName];\r\n    };\r\n    DefinitionManager.prototype.getCopyControllers = function () {\r\n        return this.copyControllers;\r\n    };\r\n    DefinitionManager.prototype.copyAllController = function () {\r\n        for (var alias in this.controllersDefinition) {\r\n            var controllerModel = this.controllersDefinition[alias];\r\n            var controller = controllerModel.controllerInstance;\r\n            this.copyControllerInstance(controller, alias);\r\n        }\r\n    };\r\n    DefinitionManager.prototype.copyControllerInstance = function (controller, alias) {\r\n        var previousCtrlInst = ObjectUtil_1.ObjectUtil.deepClone(controller);\r\n        delete this.copyControllers[alias];\r\n        this.copyControllers[alias] = previousCtrlInst;\r\n    };\r\n    DefinitionManager.prototype.addControllerDefinition = function (instanceName, controllerInst) {\r\n        var controllerModel = new ControllerModel_1.ControllerModel(instanceName, controllerInst);\r\n        controllerInst._alias = instanceName;\r\n        this.controllersDefinition[instanceName] = controllerModel;\r\n    };\r\n    DefinitionManager.prototype.getControllerInstByDomId = function (domId) {\r\n        for (var alias in this.controllersDefinition) {\r\n            var controllerModel = this.controllersDefinition[alias];\r\n            var controller = controllerModel.controllerInstance;\r\n            if (controller._dom && controller._dom.id === domId) {\r\n                return controller;\r\n            }\r\n        }\r\n        return undefined;\r\n    };\r\n    DefinitionManager.prototype.addComponentDefinition = function (tag, templateUrl, preload, asyncCaller) {\r\n        var _this = this;\r\n        if (!preload) {\r\n            this.componentsPool[tag] = new ComponentPoolItem_1.ComponentPoolItem(tag, templateUrl, true);\r\n        }\r\n        else {\r\n            this.componentsPool[tag] = new ComponentPoolItem_1.ComponentPoolItem(tag, templateUrl, false);\r\n            ;\r\n            asyncCaller.pushAll(dealWithComponentConfig, [tag, templateUrl]);\r\n        }\r\n        function dealWithComponentConfig(tag, template) {\r\n            _this.ajax.get(templateUrl, function (result) {\r\n                var componentConfig = UkuleleUtil_1.UkuleleUtil.getComponentConfiguration(result);\r\n                _this.analyizeComponent(tag, componentConfig, function () {\r\n                    dealWithComponentConfig.resolve(asyncCaller);\r\n                });\r\n            });\r\n        }\r\n    };\r\n    DefinitionManager.prototype.addLazyComponentDefinition = function (tag, templateUrl, callback) {\r\n        var _this = this;\r\n        this.ajax.get(templateUrl, function (result) {\r\n            var componentConfig = UkuleleUtil_1.UkuleleUtil.getComponentConfiguration(result);\r\n            _this.analyizeComponent(tag, componentConfig, function () {\r\n                _this.componentsPool[tag] = { 'tagName': tag, 'templateUrl': templateUrl, 'lazy': false };\r\n                callback();\r\n            });\r\n        });\r\n    };\r\n    DefinitionManager.prototype.getBoundAttributeValue = function (attr) {\r\n        var additionalArgu = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            additionalArgu[_i - 1] = arguments[_i];\r\n        }\r\n        var controllerModel = this.getBoundControllerModelByName(attr);\r\n        var controllerInst = controllerModel.controllerInstance;\r\n        //let result = UkuleleUtil.getFinalValue(this.uku, controllerInst, attr, additionalArgu);\r\n        var parameters = [this.uku, controllerInst, attr];\r\n        parameters = parameters.concat(additionalArgu);\r\n        var result = UkuleleUtil_1.UkuleleUtil.getFinalValue.apply(null, parameters);\r\n        return result;\r\n    };\r\n    ;\r\n    DefinitionManager.prototype.getControllerModelByName = function (expression) {\r\n        return this.getBoundControllerModelByName(expression);\r\n    };\r\n    ;\r\n    DefinitionManager.prototype.getFinalValueByExpression = function (expression) {\r\n        var controller = this.getControllerModelByName(expression).controllerInstance;\r\n        return UkuleleUtil_1.UkuleleUtil.getFinalValue(this.uku, controller, expression);\r\n    };\r\n    ;\r\n    DefinitionManager.prototype.getBoundControllerModelByName = function (attrName) {\r\n        var instanceName = UkuleleUtil_1.UkuleleUtil.getBoundModelInstantName(attrName);\r\n        var controllerModel = this.controllersDefinition[instanceName];\r\n        if (!controllerModel) {\r\n            var tempArr = attrName.split(\".\");\r\n            var isParentScope = tempArr[0];\r\n            if (isParentScope === \"parent\" && this.uku.parentUku) {\r\n                tempArr.shift();\r\n                attrName = tempArr.join(\".\");\r\n                return this.uku.parentUku._internal_getDefinitionManager().getControllerModelByName(attrName);\r\n            }\r\n        }\r\n        return controllerModel;\r\n    };\r\n    DefinitionManager.prototype.analyizeComponent = function (tag, config, callback) {\r\n        var _this = this;\r\n        var deps = config.dependentScripts;\r\n        var self = this;\r\n        if (deps && deps.length > 0) {\r\n            var ac = new AsyncCaller_1.AsyncCaller();\r\n            var tmpAMD_1;\r\n            if (typeof window['define'] === 'function' && window['define'].amd) {\r\n                tmpAMD_1 = window['define'];\r\n                window['define'] = undefined;\r\n            }\r\n            for (var i = 0; i < deps.length; i++) {\r\n                var dep = deps[i];\r\n                ac.pushAll(loadDependentScript, [ac, dep]);\r\n            }\r\n            ac.exec(function () {\r\n                if (tmpAMD_1) {\r\n                    window['define'] = tmpAMD_1;\r\n                }\r\n                _this.buildeComponentModel(tag, config.template, config.componentControllerScript, config.stylesheet);\r\n                callback();\r\n            });\r\n        }\r\n        else {\r\n            this.buildeComponentModel(tag, config.template, config.componentControllerScript, config.stylesheet);\r\n            callback();\r\n        }\r\n        function loadDependentScript(ac, src) {\r\n            if (!self.dependentScriptsCache[src]) {\r\n                var head = document.getElementsByTagName('HEAD')[0];\r\n                var script = document.createElement('script');\r\n                script.type = 'text/javascript';\r\n                script.charset = 'utf-8';\r\n                script.async = true;\r\n                script.src = src;\r\n                script.onload = function (e) {\r\n                    self.dependentScriptsCache[e.target['src']] = true;\r\n                    loadDependentScript.resolve(ac);\r\n                };\r\n                head.appendChild(script);\r\n            }\r\n            else {\r\n                loadDependentScript.resolve(ac);\r\n            }\r\n        }\r\n    };\r\n    DefinitionManager.prototype.buildeComponentModel = function (tag, template, script, style) {\r\n        var debugComment = \"//# sourceURL=\" + tag + \".js\";\r\n        try {\r\n            var controllerClazz = void 0;\r\n            if (script) {\r\n                script += debugComment;\r\n                controllerClazz = eval(script);\r\n            }\r\n            var newComp = new ComponentModel_1.ComponentModel(tag, template, controllerClazz);\r\n            this.componentsDefinition[tag] = newComp;\r\n            if (style) {\r\n                dealWithShadowStyle(tag, style);\r\n            }\r\n        }\r\n        catch (e) {\r\n            console.error(e);\r\n        }\r\n        function dealWithShadowStyle(tagName, stylesheet) {\r\n            var head = document.getElementsByTagName('HEAD')[0];\r\n            var style = document.createElement('style');\r\n            style.type = 'text/css';\r\n            var styleArray = stylesheet.split(\"}\");\r\n            var newArray = [];\r\n            styleArray.forEach(function (value, index) {\r\n                var newValue = value.replace(/^\\s*/, \"\");\r\n                if (newValue) {\r\n                    newArray.push(newValue);\r\n                }\r\n            });\r\n            stylesheet = newArray.join(\"}\\n\" + \".\" + tagName + \" \");\r\n            stylesheet = \".\" + tagName + \" \" + stylesheet + \"}\";\r\n            style.innerHTML = stylesheet;\r\n            head.appendChild(style);\r\n        }\r\n    };\r\n    return DefinitionManager;\r\n}());\r\nexports.DefinitionManager = DefinitionManager;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9EZWZpbml0aW9uTWFuYWdlci50cz9mNWY0Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix1QkFBdUI7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLGlCQUFpQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdEO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYix5Q0FBeUM7QUFDekMsOERBQThEO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QiLCJmaWxlIjoiMy5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xyXG52YXIgT2JqZWN0VXRpbF8xID0gcmVxdWlyZShcIi4uL3V0aWwvT2JqZWN0VXRpbFwiKTtcclxudmFyIEFqYXhfMSA9IHJlcXVpcmUoXCIuLi9leHRlbmQvQWpheFwiKTtcclxudmFyIENvbnRyb2xsZXJNb2RlbF8xID0gcmVxdWlyZShcIi4uL21vZGVsL0NvbnRyb2xsZXJNb2RlbFwiKTtcclxudmFyIEFzeW5jQ2FsbGVyXzEgPSByZXF1aXJlKFwiLi4vdXRpbC9Bc3luY0NhbGxlclwiKTtcclxudmFyIENvbXBvbmVudE1vZGVsXzEgPSByZXF1aXJlKFwiLi4vbW9kZWwvQ29tcG9uZW50TW9kZWxcIik7XHJcbnZhciBDb21wb25lbnRQb29sSXRlbV8xID0gcmVxdWlyZShcIi4uL21vZGVsL0NvbXBvbmVudFBvb2xJdGVtXCIpO1xyXG52YXIgVWt1bGVsZVV0aWxfMSA9IHJlcXVpcmUoXCIuLi91dGlsL1VrdWxlbGVVdGlsXCIpO1xyXG52YXIgRGVmaW5pdGlvbk1hbmFnZXIgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRGVmaW5pdGlvbk1hbmFnZXIoX3VrdSkge1xyXG4gICAgICAgIHRoaXMuY29udHJvbGxlcnNEZWZpbml0aW9uID0ge307XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnRzRGVmaW5pdGlvbiA9IHt9O1xyXG4gICAgICAgIHRoaXMuY29tcG9uZW50c1Bvb2wgPSB7fTtcclxuICAgICAgICB0aGlzLmNvcHlDb250cm9sbGVycyA9IHt9O1xyXG4gICAgICAgIHRoaXMuZGVwZW5kZW50U2NyaXB0c0NhY2hlID0ge307XHJcbiAgICAgICAgdGhpcy5hamF4ID0gbmV3IEFqYXhfMS5BamF4KCk7XHJcbiAgICAgICAgdGhpcy51a3UgPSBfdWt1O1xyXG4gICAgfVxyXG4gICAgRGVmaW5pdGlvbk1hbmFnZXIucHJvdG90eXBlLmdldENvbXBvbmVudHNEZWZpbml0aW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBvbmVudHNEZWZpbml0aW9uO1xyXG4gICAgfTtcclxuICAgIERlZmluaXRpb25NYW5hZ2VyLnByb3RvdHlwZS5nZXRDb21wb25lbnRzUG9vbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb21wb25lbnRzUG9vbDtcclxuICAgIH07XHJcbiAgICBEZWZpbml0aW9uTWFuYWdlci5wcm90b3R5cGUuc2V0Q29tcG9uZW50c1Bvb2wgPSBmdW5jdGlvbiAocG9vbCkge1xyXG4gICAgICAgIHRoaXMuY29tcG9uZW50c1Bvb2wgPSBwb29sO1xyXG4gICAgfTtcclxuICAgIERlZmluaXRpb25NYW5hZ2VyLnByb3RvdHlwZS5zZXRDb21wb25lbnRzRGVmaW5pdGlvbiA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuY29tcG9uZW50c0RlZmluaXRpb24gPSB2YWx1ZTtcclxuICAgIH07XHJcbiAgICBEZWZpbml0aW9uTWFuYWdlci5wcm90b3R5cGUuZ2V0Q29tcG9uZW50RGVmaW5pdGlvbiA9IGZ1bmN0aW9uICh0YWdOYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcG9uZW50c0RlZmluaXRpb25bdGFnTmFtZV07XHJcbiAgICB9O1xyXG4gICAgRGVmaW5pdGlvbk1hbmFnZXIucHJvdG90eXBlLmdldENvbnRyb2xsZXJEZWZpbml0aW9uID0gZnVuY3Rpb24gKGluc3RhbmNlTmFtZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRyb2xsZXJzRGVmaW5pdGlvbltpbnN0YW5jZU5hbWVdO1xyXG4gICAgfTtcclxuICAgIERlZmluaXRpb25NYW5hZ2VyLnByb3RvdHlwZS5nZXRDb250cm9sbGVyc0RlZmluaXRpb24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udHJvbGxlcnNEZWZpbml0aW9uO1xyXG4gICAgfTtcclxuICAgIERlZmluaXRpb25NYW5hZ2VyLnByb3RvdHlwZS5nZXRDb21wb25lbnQgPSBmdW5jdGlvbiAodGFnTmFtZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBvbmVudHNQb29sW3RhZ05hbWVdO1xyXG4gICAgfTtcclxuICAgIERlZmluaXRpb25NYW5hZ2VyLnByb3RvdHlwZS5nZXRDb3B5Q29udHJvbGxlcnMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29weUNvbnRyb2xsZXJzO1xyXG4gICAgfTtcclxuICAgIERlZmluaXRpb25NYW5hZ2VyLnByb3RvdHlwZS5jb3B5QWxsQ29udHJvbGxlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBmb3IgKHZhciBhbGlhcyBpbiB0aGlzLmNvbnRyb2xsZXJzRGVmaW5pdGlvbikge1xyXG4gICAgICAgICAgICB2YXIgY29udHJvbGxlck1vZGVsID0gdGhpcy5jb250cm9sbGVyc0RlZmluaXRpb25bYWxpYXNdO1xyXG4gICAgICAgICAgICB2YXIgY29udHJvbGxlciA9IGNvbnRyb2xsZXJNb2RlbC5jb250cm9sbGVySW5zdGFuY2U7XHJcbiAgICAgICAgICAgIHRoaXMuY29weUNvbnRyb2xsZXJJbnN0YW5jZShjb250cm9sbGVyLCBhbGlhcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIERlZmluaXRpb25NYW5hZ2VyLnByb3RvdHlwZS5jb3B5Q29udHJvbGxlckluc3RhbmNlID0gZnVuY3Rpb24gKGNvbnRyb2xsZXIsIGFsaWFzKSB7XHJcbiAgICAgICAgdmFyIHByZXZpb3VzQ3RybEluc3QgPSBPYmplY3RVdGlsXzEuT2JqZWN0VXRpbC5kZWVwQ2xvbmUoY29udHJvbGxlcik7XHJcbiAgICAgICAgZGVsZXRlIHRoaXMuY29weUNvbnRyb2xsZXJzW2FsaWFzXTtcclxuICAgICAgICB0aGlzLmNvcHlDb250cm9sbGVyc1thbGlhc10gPSBwcmV2aW91c0N0cmxJbnN0O1xyXG4gICAgfTtcclxuICAgIERlZmluaXRpb25NYW5hZ2VyLnByb3RvdHlwZS5hZGRDb250cm9sbGVyRGVmaW5pdGlvbiA9IGZ1bmN0aW9uIChpbnN0YW5jZU5hbWUsIGNvbnRyb2xsZXJJbnN0KSB7XHJcbiAgICAgICAgdmFyIGNvbnRyb2xsZXJNb2RlbCA9IG5ldyBDb250cm9sbGVyTW9kZWxfMS5Db250cm9sbGVyTW9kZWwoaW5zdGFuY2VOYW1lLCBjb250cm9sbGVySW5zdCk7XHJcbiAgICAgICAgY29udHJvbGxlckluc3QuX2FsaWFzID0gaW5zdGFuY2VOYW1lO1xyXG4gICAgICAgIHRoaXMuY29udHJvbGxlcnNEZWZpbml0aW9uW2luc3RhbmNlTmFtZV0gPSBjb250cm9sbGVyTW9kZWw7XHJcbiAgICB9O1xyXG4gICAgRGVmaW5pdGlvbk1hbmFnZXIucHJvdG90eXBlLmdldENvbnRyb2xsZXJJbnN0QnlEb21JZCA9IGZ1bmN0aW9uIChkb21JZCkge1xyXG4gICAgICAgIGZvciAodmFyIGFsaWFzIGluIHRoaXMuY29udHJvbGxlcnNEZWZpbml0aW9uKSB7XHJcbiAgICAgICAgICAgIHZhciBjb250cm9sbGVyTW9kZWwgPSB0aGlzLmNvbnRyb2xsZXJzRGVmaW5pdGlvblthbGlhc107XHJcbiAgICAgICAgICAgIHZhciBjb250cm9sbGVyID0gY29udHJvbGxlck1vZGVsLmNvbnRyb2xsZXJJbnN0YW5jZTtcclxuICAgICAgICAgICAgaWYgKGNvbnRyb2xsZXIuX2RvbSAmJiBjb250cm9sbGVyLl9kb20uaWQgPT09IGRvbUlkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29udHJvbGxlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfTtcclxuICAgIERlZmluaXRpb25NYW5hZ2VyLnByb3RvdHlwZS5hZGRDb21wb25lbnREZWZpbml0aW9uID0gZnVuY3Rpb24gKHRhZywgdGVtcGxhdGVVcmwsIHByZWxvYWQsIGFzeW5jQ2FsbGVyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAoIXByZWxvYWQpIHtcclxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnRzUG9vbFt0YWddID0gbmV3IENvbXBvbmVudFBvb2xJdGVtXzEuQ29tcG9uZW50UG9vbEl0ZW0odGFnLCB0ZW1wbGF0ZVVybCwgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudHNQb29sW3RhZ10gPSBuZXcgQ29tcG9uZW50UG9vbEl0ZW1fMS5Db21wb25lbnRQb29sSXRlbSh0YWcsIHRlbXBsYXRlVXJsLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIDtcclxuICAgICAgICAgICAgYXN5bmNDYWxsZXIucHVzaEFsbChkZWFsV2l0aENvbXBvbmVudENvbmZpZywgW3RhZywgdGVtcGxhdGVVcmxdKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZnVuY3Rpb24gZGVhbFdpdGhDb21wb25lbnRDb25maWcodGFnLCB0ZW1wbGF0ZSkge1xyXG4gICAgICAgICAgICBfdGhpcy5hamF4LmdldCh0ZW1wbGF0ZVVybCwgZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvbXBvbmVudENvbmZpZyA9IFVrdWxlbGVVdGlsXzEuVWt1bGVsZVV0aWwuZ2V0Q29tcG9uZW50Q29uZmlndXJhdGlvbihyZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuYW5hbHlpemVDb21wb25lbnQodGFnLCBjb21wb25lbnRDb25maWcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWFsV2l0aENvbXBvbmVudENvbmZpZy5yZXNvbHZlKGFzeW5jQ2FsbGVyKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgRGVmaW5pdGlvbk1hbmFnZXIucHJvdG90eXBlLmFkZExhenlDb21wb25lbnREZWZpbml0aW9uID0gZnVuY3Rpb24gKHRhZywgdGVtcGxhdGVVcmwsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLmFqYXguZ2V0KHRlbXBsYXRlVXJsLCBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgIHZhciBjb21wb25lbnRDb25maWcgPSBVa3VsZWxlVXRpbF8xLlVrdWxlbGVVdGlsLmdldENvbXBvbmVudENvbmZpZ3VyYXRpb24ocmVzdWx0KTtcclxuICAgICAgICAgICAgX3RoaXMuYW5hbHlpemVDb21wb25lbnQodGFnLCBjb21wb25lbnRDb25maWcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmNvbXBvbmVudHNQb29sW3RhZ10gPSB7ICd0YWdOYW1lJzogdGFnLCAndGVtcGxhdGVVcmwnOiB0ZW1wbGF0ZVVybCwgJ2xhenknOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgRGVmaW5pdGlvbk1hbmFnZXIucHJvdG90eXBlLmdldEJvdW5kQXR0cmlidXRlVmFsdWUgPSBmdW5jdGlvbiAoYXR0cikge1xyXG4gICAgICAgIHZhciBhZGRpdGlvbmFsQXJndSA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIGFkZGl0aW9uYWxBcmd1W19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgY29udHJvbGxlck1vZGVsID0gdGhpcy5nZXRCb3VuZENvbnRyb2xsZXJNb2RlbEJ5TmFtZShhdHRyKTtcclxuICAgICAgICB2YXIgY29udHJvbGxlckluc3QgPSBjb250cm9sbGVyTW9kZWwuY29udHJvbGxlckluc3RhbmNlO1xyXG4gICAgICAgIC8vbGV0IHJlc3VsdCA9IFVrdWxlbGVVdGlsLmdldEZpbmFsVmFsdWUodGhpcy51a3UsIGNvbnRyb2xsZXJJbnN0LCBhdHRyLCBhZGRpdGlvbmFsQXJndSk7XHJcbiAgICAgICAgdmFyIHBhcmFtZXRlcnMgPSBbdGhpcy51a3UsIGNvbnRyb2xsZXJJbnN0LCBhdHRyXTtcclxuICAgICAgICBwYXJhbWV0ZXJzID0gcGFyYW1ldGVycy5jb25jYXQoYWRkaXRpb25hbEFyZ3UpO1xyXG4gICAgICAgIHZhciByZXN1bHQgPSBVa3VsZWxlVXRpbF8xLlVrdWxlbGVVdGlsLmdldEZpbmFsVmFsdWUuYXBwbHkobnVsbCwgcGFyYW1ldGVycyk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07XHJcbiAgICA7XHJcbiAgICBEZWZpbml0aW9uTWFuYWdlci5wcm90b3R5cGUuZ2V0Q29udHJvbGxlck1vZGVsQnlOYW1lID0gZnVuY3Rpb24gKGV4cHJlc3Npb24pIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRCb3VuZENvbnRyb2xsZXJNb2RlbEJ5TmFtZShleHByZXNzaW9uKTtcclxuICAgIH07XHJcbiAgICA7XHJcbiAgICBEZWZpbml0aW9uTWFuYWdlci5wcm90b3R5cGUuZ2V0RmluYWxWYWx1ZUJ5RXhwcmVzc2lvbiA9IGZ1bmN0aW9uIChleHByZXNzaW9uKSB7XHJcbiAgICAgICAgdmFyIGNvbnRyb2xsZXIgPSB0aGlzLmdldENvbnRyb2xsZXJNb2RlbEJ5TmFtZShleHByZXNzaW9uKS5jb250cm9sbGVySW5zdGFuY2U7XHJcbiAgICAgICAgcmV0dXJuIFVrdWxlbGVVdGlsXzEuVWt1bGVsZVV0aWwuZ2V0RmluYWxWYWx1ZSh0aGlzLnVrdSwgY29udHJvbGxlciwgZXhwcmVzc2lvbik7XHJcbiAgICB9O1xyXG4gICAgO1xyXG4gICAgRGVmaW5pdGlvbk1hbmFnZXIucHJvdG90eXBlLmdldEJvdW5kQ29udHJvbGxlck1vZGVsQnlOYW1lID0gZnVuY3Rpb24gKGF0dHJOYW1lKSB7XHJcbiAgICAgICAgdmFyIGluc3RhbmNlTmFtZSA9IFVrdWxlbGVVdGlsXzEuVWt1bGVsZVV0aWwuZ2V0Qm91bmRNb2RlbEluc3RhbnROYW1lKGF0dHJOYW1lKTtcclxuICAgICAgICB2YXIgY29udHJvbGxlck1vZGVsID0gdGhpcy5jb250cm9sbGVyc0RlZmluaXRpb25baW5zdGFuY2VOYW1lXTtcclxuICAgICAgICBpZiAoIWNvbnRyb2xsZXJNb2RlbCkge1xyXG4gICAgICAgICAgICB2YXIgdGVtcEFyciA9IGF0dHJOYW1lLnNwbGl0KFwiLlwiKTtcclxuICAgICAgICAgICAgdmFyIGlzUGFyZW50U2NvcGUgPSB0ZW1wQXJyWzBdO1xyXG4gICAgICAgICAgICBpZiAoaXNQYXJlbnRTY29wZSA9PT0gXCJwYXJlbnRcIiAmJiB0aGlzLnVrdS5wYXJlbnRVa3UpIHtcclxuICAgICAgICAgICAgICAgIHRlbXBBcnIuc2hpZnQoKTtcclxuICAgICAgICAgICAgICAgIGF0dHJOYW1lID0gdGVtcEFyci5qb2luKFwiLlwiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnVrdS5wYXJlbnRVa3UuX2ludGVybmFsX2dldERlZmluaXRpb25NYW5hZ2VyKCkuZ2V0Q29udHJvbGxlck1vZGVsQnlOYW1lKGF0dHJOYW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY29udHJvbGxlck1vZGVsO1xyXG4gICAgfTtcclxuICAgIERlZmluaXRpb25NYW5hZ2VyLnByb3RvdHlwZS5hbmFseWl6ZUNvbXBvbmVudCA9IGZ1bmN0aW9uICh0YWcsIGNvbmZpZywgY2FsbGJhY2spIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBkZXBzID0gY29uZmlnLmRlcGVuZGVudFNjcmlwdHM7XHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIGlmIChkZXBzICYmIGRlcHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB2YXIgYWMgPSBuZXcgQXN5bmNDYWxsZXJfMS5Bc3luY0NhbGxlcigpO1xyXG4gICAgICAgICAgICB2YXIgdG1wQU1EXzE7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygd2luZG93WydkZWZpbmUnXSA9PT0gJ2Z1bmN0aW9uJyAmJiB3aW5kb3dbJ2RlZmluZSddLmFtZCkge1xyXG4gICAgICAgICAgICAgICAgdG1wQU1EXzEgPSB3aW5kb3dbJ2RlZmluZSddO1xyXG4gICAgICAgICAgICAgICAgd2luZG93WydkZWZpbmUnXSA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRlcHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBkZXAgPSBkZXBzW2ldO1xyXG4gICAgICAgICAgICAgICAgYWMucHVzaEFsbChsb2FkRGVwZW5kZW50U2NyaXB0LCBbYWMsIGRlcF0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGFjLmV4ZWMoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRtcEFNRF8xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93WydkZWZpbmUnXSA9IHRtcEFNRF8xO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgX3RoaXMuYnVpbGRlQ29tcG9uZW50TW9kZWwodGFnLCBjb25maWcudGVtcGxhdGUsIGNvbmZpZy5jb21wb25lbnRDb250cm9sbGVyU2NyaXB0LCBjb25maWcuc3R5bGVzaGVldCk7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuYnVpbGRlQ29tcG9uZW50TW9kZWwodGFnLCBjb25maWcudGVtcGxhdGUsIGNvbmZpZy5jb21wb25lbnRDb250cm9sbGVyU2NyaXB0LCBjb25maWcuc3R5bGVzaGVldCk7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZ1bmN0aW9uIGxvYWREZXBlbmRlbnRTY3JpcHQoYWMsIHNyYykge1xyXG4gICAgICAgICAgICBpZiAoIXNlbGYuZGVwZW5kZW50U2NyaXB0c0NhY2hlW3NyY10pIHtcclxuICAgICAgICAgICAgICAgIHZhciBoZWFkID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ0hFQUQnKVswXTtcclxuICAgICAgICAgICAgICAgIHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcclxuICAgICAgICAgICAgICAgIHNjcmlwdC50eXBlID0gJ3RleHQvamF2YXNjcmlwdCc7XHJcbiAgICAgICAgICAgICAgICBzY3JpcHQuY2hhcnNldCA9ICd1dGYtOCc7XHJcbiAgICAgICAgICAgICAgICBzY3JpcHQuYXN5bmMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgc2NyaXB0LnNyYyA9IHNyYztcclxuICAgICAgICAgICAgICAgIHNjcmlwdC5vbmxvYWQgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZGVwZW5kZW50U2NyaXB0c0NhY2hlW2UudGFyZ2V0WydzcmMnXV0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGxvYWREZXBlbmRlbnRTY3JpcHQucmVzb2x2ZShhYyk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgaGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbG9hZERlcGVuZGVudFNjcmlwdC5yZXNvbHZlKGFjKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBEZWZpbml0aW9uTWFuYWdlci5wcm90b3R5cGUuYnVpbGRlQ29tcG9uZW50TW9kZWwgPSBmdW5jdGlvbiAodGFnLCB0ZW1wbGF0ZSwgc2NyaXB0LCBzdHlsZSkge1xyXG4gICAgICAgIHZhciBkZWJ1Z0NvbW1lbnQgPSBcIi8vIyBzb3VyY2VVUkw9XCIgKyB0YWcgKyBcIi5qc1wiO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHZhciBjb250cm9sbGVyQ2xhenogPSB2b2lkIDA7XHJcbiAgICAgICAgICAgIGlmIChzY3JpcHQpIHtcclxuICAgICAgICAgICAgICAgIHNjcmlwdCArPSBkZWJ1Z0NvbW1lbnQ7XHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyQ2xhenogPSBldmFsKHNjcmlwdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIG5ld0NvbXAgPSBuZXcgQ29tcG9uZW50TW9kZWxfMS5Db21wb25lbnRNb2RlbCh0YWcsIHRlbXBsYXRlLCBjb250cm9sbGVyQ2xhenopO1xyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudHNEZWZpbml0aW9uW3RhZ10gPSBuZXdDb21wO1xyXG4gICAgICAgICAgICBpZiAoc3R5bGUpIHtcclxuICAgICAgICAgICAgICAgIGRlYWxXaXRoU2hhZG93U3R5bGUodGFnLCBzdHlsZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZnVuY3Rpb24gZGVhbFdpdGhTaGFkb3dTdHlsZSh0YWdOYW1lLCBzdHlsZXNoZWV0KSB7XHJcbiAgICAgICAgICAgIHZhciBoZWFkID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ0hFQUQnKVswXTtcclxuICAgICAgICAgICAgdmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcclxuICAgICAgICAgICAgc3R5bGUudHlwZSA9ICd0ZXh0L2Nzcyc7XHJcbiAgICAgICAgICAgIHZhciBzdHlsZUFycmF5ID0gc3R5bGVzaGVldC5zcGxpdChcIn1cIik7XHJcbiAgICAgICAgICAgIHZhciBuZXdBcnJheSA9IFtdO1xyXG4gICAgICAgICAgICBzdHlsZUFycmF5LmZvckVhY2goZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5ld1ZhbHVlID0gdmFsdWUucmVwbGFjZSgvXlxccyovLCBcIlwiKTtcclxuICAgICAgICAgICAgICAgIGlmIChuZXdWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld0FycmF5LnB1c2gobmV3VmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgc3R5bGVzaGVldCA9IG5ld0FycmF5LmpvaW4oXCJ9XFxuXCIgKyBcIi5cIiArIHRhZ05hbWUgKyBcIiBcIik7XHJcbiAgICAgICAgICAgIHN0eWxlc2hlZXQgPSBcIi5cIiArIHRhZ05hbWUgKyBcIiBcIiArIHN0eWxlc2hlZXQgKyBcIn1cIjtcclxuICAgICAgICAgICAgc3R5bGUuaW5uZXJIVE1MID0gc3R5bGVzaGVldDtcclxuICAgICAgICAgICAgaGVhZC5hcHBlbmRDaGlsZChzdHlsZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBEZWZpbml0aW9uTWFuYWdlcjtcclxufSgpKTtcclxuZXhwb3J0cy5EZWZpbml0aW9uTWFuYWdlciA9IERlZmluaXRpb25NYW5hZ2VyO1xyXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL2NvcmUvRGVmaW5pdGlvbk1hbmFnZXIudHNcbiAqKiBtb2R1bGUgaWQgPSAzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iXSwic291cmNlUm9vdCI6IiJ9");
},function(module,exports){eval('"use strict";\r\nvar ObjectUtil = (function () {\r\n    function ObjectUtil() {\r\n    }\r\n    ObjectUtil.isArray = function (obj) {\r\n        return Object.prototype.toString.call(obj) === \'[object Array]\';\r\n    };\r\n    ObjectUtil.getType = function (obj) {\r\n        var type = typeof (obj);\r\n        if (type === "object") {\r\n            if (ObjectUtil.isArray(obj)) {\r\n                return "array";\r\n            }\r\n            else {\r\n                return type;\r\n            }\r\n        }\r\n        else {\r\n            return type;\r\n        }\r\n    };\r\n    ObjectUtil.compare = function (objA, objB) {\r\n        var type = ObjectUtil.getType(objA);\r\n        var typeB = ObjectUtil.getType(objB);\r\n        var result = true;\r\n        if (type !== typeB) {\r\n            return false;\r\n        }\r\n        else {\r\n            switch (type) {\r\n                case "object":\r\n                    for (var key in objA) {\r\n                        var valuA = objA[key];\r\n                        var valuB = objB[key];\r\n                        var isEqual = ObjectUtil.compare(valuA, valuB);\r\n                        if (!isEqual) {\r\n                            result = false;\r\n                            break;\r\n                        }\r\n                    }\r\n                    break;\r\n                case "array":\r\n                    if (objA.length === objB.length) {\r\n                        for (var i = 0; i < objA.length; i++) {\r\n                            var itemA = objA[i];\r\n                            var itemB = objB[i];\r\n                            var isEqual2 = ObjectUtil.compare(itemA, itemB);\r\n                            if (!isEqual2) {\r\n                                result = false;\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n                    else {\r\n                        result = false;\r\n                    }\r\n                    break;\r\n                case "function":\r\n                    result = objA.toString() === objB.toString();\r\n                    break;\r\n                default:\r\n                    result = objA === objB;\r\n                    break;\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    ObjectUtil.deepClone = function (obj) {\r\n        var o;\r\n        var i;\r\n        var j;\r\n        if (typeof (obj) !== "object" || obj === null) {\r\n            return obj;\r\n        }\r\n        if (obj instanceof (Array)) {\r\n            o = [];\r\n            i = 0;\r\n            j = obj.length;\r\n            for (; i < j; i++) {\r\n                if (typeof (obj[i]) === "object" && obj[i] !== null) {\r\n                    o[i] = ObjectUtil.deepClone(obj[i]);\r\n                }\r\n                else {\r\n                    o[i] = obj[i];\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            o = {};\r\n            for (i in obj) {\r\n                if (typeof (obj[i]) === "object" && obj[i] !== null && i !== "_dom") {\r\n                    o[i] = ObjectUtil.deepClone(obj[i]);\r\n                }\r\n                else {\r\n                    o[i] = obj[i];\r\n                }\r\n            }\r\n        }\r\n        return o;\r\n    };\r\n    return ObjectUtil;\r\n}());\r\nexports.ObjectUtil = ObjectUtil;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdXRpbC9PYmplY3RVdGlsLnRzPzQxYWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsaUJBQWlCO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLE9BQU87QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QiLCJmaWxlIjoiNC5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xyXG52YXIgT2JqZWN0VXRpbCA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBPYmplY3RVdGlsKCkge1xyXG4gICAgfVxyXG4gICAgT2JqZWN0VXRpbC5pc0FycmF5ID0gZnVuY3Rpb24gKG9iaikge1xyXG4gICAgICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqKSA9PT0gJ1tvYmplY3QgQXJyYXldJztcclxuICAgIH07XHJcbiAgICBPYmplY3RVdGlsLmdldFR5cGUgPSBmdW5jdGlvbiAob2JqKSB7XHJcbiAgICAgICAgdmFyIHR5cGUgPSB0eXBlb2YgKG9iaik7XHJcbiAgICAgICAgaWYgKHR5cGUgPT09IFwib2JqZWN0XCIpIHtcclxuICAgICAgICAgICAgaWYgKE9iamVjdFV0aWwuaXNBcnJheShvYmopKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJhcnJheVwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHR5cGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0eXBlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBPYmplY3RVdGlsLmNvbXBhcmUgPSBmdW5jdGlvbiAob2JqQSwgb2JqQikge1xyXG4gICAgICAgIHZhciB0eXBlID0gT2JqZWN0VXRpbC5nZXRUeXBlKG9iakEpO1xyXG4gICAgICAgIHZhciB0eXBlQiA9IE9iamVjdFV0aWwuZ2V0VHlwZShvYmpCKTtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gdHJ1ZTtcclxuICAgICAgICBpZiAodHlwZSAhPT0gdHlwZUIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwib2JqZWN0XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIG9iakEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVBID0gb2JqQVtrZXldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdUIgPSBvYmpCW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpc0VxdWFsID0gT2JqZWN0VXRpbC5jb21wYXJlKHZhbHVBLCB2YWx1Qik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNFcXVhbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJhcnJheVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvYmpBLmxlbmd0aCA9PT0gb2JqQi5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvYmpBLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbUEgPSBvYmpBW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW1CID0gb2JqQltpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpc0VxdWFsMiA9IE9iamVjdFV0aWwuY29tcGFyZShpdGVtQSwgaXRlbUIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc0VxdWFsMikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiZnVuY3Rpb25cIjpcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBvYmpBLnRvU3RyaW5nKCkgPT09IG9iakIudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gb2JqQSA9PT0gb2JqQjtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfTtcclxuICAgIE9iamVjdFV0aWwuZGVlcENsb25lID0gZnVuY3Rpb24gKG9iaikge1xyXG4gICAgICAgIHZhciBvO1xyXG4gICAgICAgIHZhciBpO1xyXG4gICAgICAgIHZhciBqO1xyXG4gICAgICAgIGlmICh0eXBlb2YgKG9iaikgIT09IFwib2JqZWN0XCIgfHwgb2JqID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBvYmo7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvYmogaW5zdGFuY2VvZiAoQXJyYXkpKSB7XHJcbiAgICAgICAgICAgIG8gPSBbXTtcclxuICAgICAgICAgICAgaSA9IDA7XHJcbiAgICAgICAgICAgIGogPSBvYmoubGVuZ3RoO1xyXG4gICAgICAgICAgICBmb3IgKDsgaSA8IGo7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiAob2JqW2ldKSA9PT0gXCJvYmplY3RcIiAmJiBvYmpbaV0gIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBvW2ldID0gT2JqZWN0VXRpbC5kZWVwQ2xvbmUob2JqW2ldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIG9baV0gPSBvYmpbaV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG8gPSB7fTtcclxuICAgICAgICAgICAgZm9yIChpIGluIG9iaikge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiAob2JqW2ldKSA9PT0gXCJvYmplY3RcIiAmJiBvYmpbaV0gIT09IG51bGwgJiYgaSAhPT0gXCJfZG9tXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBvW2ldID0gT2JqZWN0VXRpbC5kZWVwQ2xvbmUob2JqW2ldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIG9baV0gPSBvYmpbaV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG87XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIE9iamVjdFV0aWw7XHJcbn0oKSk7XHJcbmV4cG9ydHMuT2JqZWN0VXRpbCA9IE9iamVjdFV0aWw7XHJcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvdXRpbC9PYmplY3RVdGlsLnRzXG4gKiogbW9kdWxlIGlkID0gNFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==')},function(module,exports){eval('"use strict";\r\nvar Ajax = (function () {\r\n    function Ajax() {\r\n    }\r\n    Ajax.prototype.get = function (url, success, error) {\r\n        var request = new XMLHttpRequest();\r\n        request.onreadystatechange = function () {\r\n            if (request.readyState === 4) {\r\n                if (request.status === 200) {\r\n                    success(request.responseText);\r\n                }\r\n                else {\r\n                    if (error) {\r\n                        error();\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        request.open("GET", url, true);\r\n        request.send(null);\r\n    };\r\n    return Ajax;\r\n}());\r\nexports.Ajax = Ajax;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvZXh0ZW5kL0FqYXgudHM/MjY1NyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCIsImZpbGUiOiI1LmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBBamF4ID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEFqYXgoKSB7XHJcbiAgICB9XHJcbiAgICBBamF4LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAodXJsLCBzdWNjZXNzLCBlcnJvcikge1xyXG4gICAgICAgIHZhciByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgICAgcmVxdWVzdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0LnJlYWR5U3RhdGUgPT09IDQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXF1ZXN0LnN0YXR1cyA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzcyhyZXF1ZXN0LnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHJlcXVlc3Qub3BlbihcIkdFVFwiLCB1cmwsIHRydWUpO1xyXG4gICAgICAgIHJlcXVlc3Quc2VuZChudWxsKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQWpheDtcclxufSgpKTtcclxuZXhwb3J0cy5BamF4ID0gQWpheDtcclxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9leHRlbmQvQWpheC50c1xuICoqIG1vZHVsZSBpZCA9IDVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyJdLCJzb3VyY2VSb290IjoiIn0=')},function(module,exports){eval('"use strict";\r\nvar ControllerModel = (function () {\r\n    function ControllerModel(alias, ctrlInst) {\r\n        this.alias = alias;\r\n        this.controllerInstance = ctrlInst;\r\n        this.boundItems = [];\r\n    }\r\n    ControllerModel.prototype.addBoundItem = function (boundItem) {\r\n        this.boundItems.push(boundItem);\r\n    };\r\n    ControllerModel.prototype.getBoundItemsByName = function (name) {\r\n        var tempBoundItems = [];\r\n        for (var i = 0; i < this.boundItems.length; i++) {\r\n            var boundItem = this.boundItems[i];\r\n            if (boundItem.attributeName === name) {\r\n                tempBoundItems.push(boundItem);\r\n            }\r\n        }\r\n        return tempBoundItems;\r\n    };\r\n    return ControllerModel;\r\n}());\r\nexports.ControllerModel = ControllerModel;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWwvQ29udHJvbGxlck1vZGVsLnRzPzY3ZDgiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLDRCQUE0QjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEIiwiZmlsZSI6IjYuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcclxudmFyIENvbnRyb2xsZXJNb2RlbCA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBDb250cm9sbGVyTW9kZWwoYWxpYXMsIGN0cmxJbnN0KSB7XHJcbiAgICAgICAgdGhpcy5hbGlhcyA9IGFsaWFzO1xyXG4gICAgICAgIHRoaXMuY29udHJvbGxlckluc3RhbmNlID0gY3RybEluc3Q7XHJcbiAgICAgICAgdGhpcy5ib3VuZEl0ZW1zID0gW107XHJcbiAgICB9XHJcbiAgICBDb250cm9sbGVyTW9kZWwucHJvdG90eXBlLmFkZEJvdW5kSXRlbSA9IGZ1bmN0aW9uIChib3VuZEl0ZW0pIHtcclxuICAgICAgICB0aGlzLmJvdW5kSXRlbXMucHVzaChib3VuZEl0ZW0pO1xyXG4gICAgfTtcclxuICAgIENvbnRyb2xsZXJNb2RlbC5wcm90b3R5cGUuZ2V0Qm91bmRJdGVtc0J5TmFtZSA9IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgdmFyIHRlbXBCb3VuZEl0ZW1zID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmJvdW5kSXRlbXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIGJvdW5kSXRlbSA9IHRoaXMuYm91bmRJdGVtc1tpXTtcclxuICAgICAgICAgICAgaWYgKGJvdW5kSXRlbS5hdHRyaWJ1dGVOYW1lID09PSBuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wQm91bmRJdGVtcy5wdXNoKGJvdW5kSXRlbSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRlbXBCb3VuZEl0ZW1zO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBDb250cm9sbGVyTW9kZWw7XHJcbn0oKSk7XHJcbmV4cG9ydHMuQ29udHJvbGxlck1vZGVsID0gQ29udHJvbGxlck1vZGVsO1xyXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL21vZGVsL0NvbnRyb2xsZXJNb2RlbC50c1xuICoqIG1vZHVsZSBpZCA9IDZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyJdLCJzb3VyY2VSb290IjoiIn0=')},function(module,exports){eval('"use strict";\r\nvar ComponentModel = (function () {\r\n    function ComponentModel(tagName, template, clazz) {\r\n        this.tagName = tagName;\r\n        this.template = template;\r\n        this.controllerClazz = clazz;\r\n    }\r\n    return ComponentModel;\r\n}());\r\nexports.ComponentModel = ComponentModel;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWwvQ29tcG9uZW50TW9kZWwudHM/Yzg0NiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEIiwiZmlsZSI6IjcuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcclxudmFyIENvbXBvbmVudE1vZGVsID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIENvbXBvbmVudE1vZGVsKHRhZ05hbWUsIHRlbXBsYXRlLCBjbGF6eikge1xyXG4gICAgICAgIHRoaXMudGFnTmFtZSA9IHRhZ05hbWU7XHJcbiAgICAgICAgdGhpcy50ZW1wbGF0ZSA9IHRlbXBsYXRlO1xyXG4gICAgICAgIHRoaXMuY29udHJvbGxlckNsYXp6ID0gY2xheno7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gQ29tcG9uZW50TW9kZWw7XHJcbn0oKSk7XHJcbmV4cG9ydHMuQ29tcG9uZW50TW9kZWwgPSBDb21wb25lbnRNb2RlbDtcclxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9tb2RlbC9Db21wb25lbnRNb2RlbC50c1xuICoqIG1vZHVsZSBpZCA9IDdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyJdLCJzb3VyY2VSb290IjoiIn0=')},function(module,exports){eval('"use strict";\r\nvar ComponentPoolItem = (function () {\r\n    function ComponentPoolItem(_tagName, _templateUrl, _lazy) {\r\n        this.tagName = _tagName;\r\n        this.templateUrl = _templateUrl;\r\n        this.lazy = _lazy;\r\n    }\r\n    return ComponentPoolItem;\r\n}());\r\nexports.ComponentPoolItem = ComponentPoolItem;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWwvQ29tcG9uZW50UG9vbEl0ZW0udHM/M2FlYSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEIiwiZmlsZSI6IjguanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcclxudmFyIENvbXBvbmVudFBvb2xJdGVtID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIENvbXBvbmVudFBvb2xJdGVtKF90YWdOYW1lLCBfdGVtcGxhdGVVcmwsIF9sYXp5KSB7XHJcbiAgICAgICAgdGhpcy50YWdOYW1lID0gX3RhZ05hbWU7XHJcbiAgICAgICAgdGhpcy50ZW1wbGF0ZVVybCA9IF90ZW1wbGF0ZVVybDtcclxuICAgICAgICB0aGlzLmxhenkgPSBfbGF6eTtcclxuICAgIH1cclxuICAgIHJldHVybiBDb21wb25lbnRQb29sSXRlbTtcclxufSgpKTtcclxuZXhwb3J0cy5Db21wb25lbnRQb29sSXRlbSA9IENvbXBvbmVudFBvb2xJdGVtO1xyXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL21vZGVsL0NvbXBvbmVudFBvb2xJdGVtLnRzXG4gKiogbW9kdWxlIGlkID0gOFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==')},function(module,exports,__webpack_require__){eval('"use strict";\r\nvar Selector_1 = __webpack_require__(10);\r\nvar ArgumentUtil_1 = __webpack_require__(11);\r\nvar ComponentConfiguration_1 = __webpack_require__(12);\r\nvar ValueAndParent = (function () {\r\n    function ValueAndParent(_value, _parant) {\r\n        this.value = _value;\r\n        this.parent = _parant;\r\n    }\r\n    return ValueAndParent;\r\n}());\r\nvar UkuleleUtil = (function () {\r\n    function UkuleleUtil() {\r\n    }\r\n    UkuleleUtil.getFinalAttribute = function (expression) {\r\n        var temp = expression.split(".");\r\n        var isParent = temp.shift();\r\n        if (isParent === "parent") {\r\n            return UkuleleUtil.getFinalAttribute(temp.join("."));\r\n        }\r\n        return temp.join(".");\r\n    };\r\n    UkuleleUtil.searchHtmlTag = function (htmlString, tagName) {\r\n        var reTemp = "^<" + tagName + "[\\\\s\\\\S]*>" + "[\\\\s\\\\S]*</" + tagName + ">$";\r\n        var re = new RegExp(reTemp);\r\n        var index = htmlString.search(re);\r\n        return index;\r\n    };\r\n    UkuleleUtil.getInnerHtml = function (htmlString, tagName) {\r\n        var reTemp = "<" + tagName + "[\\\\s\\\\S]*>" + "[\\\\s\\\\S]*</" + tagName + ">";\r\n        var re = new RegExp(reTemp);\r\n        var match = htmlString.match(re);\r\n        if (match.index > -1) {\r\n            var matchString = match[0];\r\n            var index = matchString.search(">");\r\n            var tempString = matchString.substr(index + 1);\r\n            var index2 = tempString.lastIndexOf("</");\r\n            tempString = tempString.substring(0, index2);\r\n            tempString = tempString.replace(/(^\\s*)|(\\s*$)/g, "");\r\n            console.log(tempString);\r\n            return tempString;\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    };\r\n    UkuleleUtil.getComponentConfiguration = function (htmlString) {\r\n        var tempDom = document.createElement("div");\r\n        tempDom.innerHTML = htmlString;\r\n        var tpl = Selector_1.Selector.querySelectorAll(tempDom, "template");\r\n        var scripts = Selector_1.Selector.querySelectorAll(tempDom, "script");\r\n        var stylesheet = Selector_1.Selector.querySelectorAll(tempDom, "style");\r\n        var deps = [];\r\n        var ccs = null;\r\n        for (var i = 0; i < scripts.length; i++) {\r\n            var script = scripts[i];\r\n            if (script.src !== "") {\r\n                deps.push(script.src);\r\n            }\r\n            else {\r\n                ccs = script.innerHTML;\r\n            }\r\n        }\r\n        if (stylesheet && stylesheet[0]) {\r\n            return new ComponentConfiguration_1.ComponentConfiguration(tpl[0].innerHTML, deps, ccs, stylesheet[0].innerHTML);\r\n        }\r\n        else {\r\n            return new ComponentConfiguration_1.ComponentConfiguration(tpl[0].innerHTML, deps, ccs);\r\n        }\r\n    };\r\n    UkuleleUtil.searchUkuAttrTag = function (htmlString) {\r\n        var re = /^uku\\-.*/;\r\n        var index = htmlString.search(re);\r\n        return index;\r\n    };\r\n    UkuleleUtil.getAttrFromUkuTag = function (ukuTag, camelCase) {\r\n        if (camelCase === void 0) { camelCase = false; }\r\n        if (UkuleleUtil.searchUkuAttrTag(ukuTag) === 0) {\r\n            ukuTag = ukuTag.replace(\'uku-\', \'\');\r\n        }\r\n        if (camelCase) {\r\n            var names = ukuTag.split(\'-\');\r\n            ukuTag = names[0];\r\n            for (var i = 1; i < names.length; i++) {\r\n                var firstLetter = names[i].charAt(0).toUpperCase();\r\n                ukuTag = ukuTag + firstLetter + names[i].substr(1);\r\n            }\r\n        }\r\n        return ukuTag;\r\n    };\r\n    UkuleleUtil.searchUkuExpTag = function (expression) {\r\n        var re = /^\\{\\{.*\\}\\}$/;\r\n        var index = expression.search(re);\r\n        return index;\r\n    };\r\n    UkuleleUtil.searchUkuFuncArg = function (htmlString) {\r\n        var re = /\\(.*\\)$/;\r\n        var index = htmlString.search(re);\r\n        return index;\r\n    };\r\n    UkuleleUtil.isRepeat = function (element) {\r\n        if (element.getAttribute("uku-repeat")) {\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    UkuleleUtil.isInRepeat = function (element) {\r\n        var parents = Selector_1.Selector.parents(element);\r\n        for (var i = 0; i < parents.length; i++) {\r\n            var parent_1 = parents[i];\r\n            if (parent_1.nodeType !== 9) {\r\n                var b = parent_1.getAttribute("uku-repeat");\r\n                if (b) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    UkuleleUtil.getBoundModelInstantName = function (expression) {\r\n        var controlInstName = expression.split(\'.\')[0];\r\n        if (controlInstName) {\r\n            return controlInstName;\r\n        }\r\n        return undefined;\r\n    };\r\n    UkuleleUtil.getAttributeFinalValue = function (object, attrName) {\r\n        var valueObject = UkuleleUtil.getAttributeFinalValueAndParent(object, attrName);\r\n        var value = valueObject.value;\r\n        return value;\r\n    };\r\n    UkuleleUtil.getAttributeFinalValueAndParent = function (object, attrName) {\r\n        var finalValue = object;\r\n        var parentValue;\r\n        if (typeof attrName === "string") {\r\n            var attrValue = UkuleleUtil.getFinalAttribute(attrName);\r\n            var temp = attrValue.split(".");\r\n            if (attrValue !== "" && finalValue) {\r\n                for (var i = 0; i < temp.length; i++) {\r\n                    var property = temp[i];\r\n                    parentValue = finalValue;\r\n                    finalValue = finalValue[property];\r\n                    if (finalValue === undefined || finalValue === null) {\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                if (object.hasOwnProperty("_alias") && object._alias === attrName) {\r\n                    finalValue = object;\r\n                }\r\n                else {\r\n                    finalValue = attrName;\r\n                }\r\n            }\r\n        }\r\n        return new ValueAndParent(finalValue, parentValue);\r\n    };\r\n    UkuleleUtil.getFinalValue = function (uku, object, attrName) {\r\n        var additionalArgu = [];\r\n        for (var _i = 3; _i < arguments.length; _i++) {\r\n            additionalArgu[_i - 3] = arguments[_i];\r\n        }\r\n        var index = -1;\r\n        if (typeof attrName === "string") {\r\n            index = UkuleleUtil.searchUkuFuncArg(attrName);\r\n        }\r\n        if (index === -1) {\r\n            //is attribute\r\n            return UkuleleUtil.getAttributeFinalValue(object, attrName);\r\n        }\r\n        else {\r\n            //is function\r\n            var functionName = attrName.substring(0, index);\r\n            var finalValueObject = UkuleleUtil.getAttributeFinalValueAndParent(object, functionName);\r\n            var finalValue = finalValueObject.value;\r\n            if (finalValue === undefined) {\r\n                return finalValue;\r\n            }\r\n            var new_arguments = [];\r\n            var _argumentsString = attrName.substring(index + 1, attrName.length - 1);\r\n            if (_argumentsString !== "") {\r\n                var _arguments = ArgumentUtil_1.ArgumentUtil.analyze(_argumentsString, uku);\r\n                for (var i = 0; i < _arguments.length; i++) {\r\n                    var temp = void 0;\r\n                    var argument = _arguments[i];\r\n                    var argType = typeof argument;\r\n                    var controllerModel = null;\r\n                    if (argType === "string") {\r\n                        controllerModel = uku._internal_getDefinitionManager().getControllerModelByName(argument);\r\n                        if (controllerModel && controllerModel.controllerInstance) {\r\n                            var agrumentInst = controllerModel.controllerInstance;\r\n                            if (argument.split(".").length === 1) {\r\n                                temp = agrumentInst;\r\n                            }\r\n                            else {\r\n                                temp = UkuleleUtil.getFinalValue(uku, agrumentInst, argument);\r\n                            }\r\n                        }\r\n                        else {\r\n                            temp = UkuleleUtil.getFinalValue(uku, object, argument);\r\n                        }\r\n                        new_arguments.push(temp);\r\n                    }\r\n                    else {\r\n                        new_arguments.push(argument);\r\n                    }\r\n                }\r\n            }\r\n            if (additionalArgu) {\r\n                var additionalArguArray = Array.prototype.slice.call(additionalArgu);\r\n                new_arguments = new_arguments.concat(additionalArguArray);\r\n            }\r\n            finalValue = finalValue.apply(finalValueObject.parent, new_arguments);\r\n            return finalValue;\r\n        }\r\n    };\r\n    return UkuleleUtil;\r\n}());\r\nexports.UkuleleUtil = UkuleleUtil;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdXRpbC9Va3VsZWxlVXRpbC50cz83YzY0Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLG9CQUFvQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsbUJBQW1CO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixrQkFBa0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsRUFBRSxJQUFJLEVBQUU7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsb0JBQW9CO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsaUJBQWlCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix1QkFBdUI7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsdUJBQXVCO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEIiwiZmlsZSI6IjkuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcclxudmFyIFNlbGVjdG9yXzEgPSByZXF1aXJlKFwiLi4vZXh0ZW5kL1NlbGVjdG9yXCIpO1xyXG52YXIgQXJndW1lbnRVdGlsXzEgPSByZXF1aXJlKFwiLi9Bcmd1bWVudFV0aWxcIik7XHJcbnZhciBDb21wb25lbnRDb25maWd1cmF0aW9uXzEgPSByZXF1aXJlKFwiLi4vbW9kZWwvQ29tcG9uZW50Q29uZmlndXJhdGlvblwiKTtcclxudmFyIFZhbHVlQW5kUGFyZW50ID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFZhbHVlQW5kUGFyZW50KF92YWx1ZSwgX3BhcmFudCkge1xyXG4gICAgICAgIHRoaXMudmFsdWUgPSBfdmFsdWU7XHJcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBfcGFyYW50O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFZhbHVlQW5kUGFyZW50O1xyXG59KCkpO1xyXG52YXIgVWt1bGVsZVV0aWwgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gVWt1bGVsZVV0aWwoKSB7XHJcbiAgICB9XHJcbiAgICBVa3VsZWxlVXRpbC5nZXRGaW5hbEF0dHJpYnV0ZSA9IGZ1bmN0aW9uIChleHByZXNzaW9uKSB7XHJcbiAgICAgICAgdmFyIHRlbXAgPSBleHByZXNzaW9uLnNwbGl0KFwiLlwiKTtcclxuICAgICAgICB2YXIgaXNQYXJlbnQgPSB0ZW1wLnNoaWZ0KCk7XHJcbiAgICAgICAgaWYgKGlzUGFyZW50ID09PSBcInBhcmVudFwiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBVa3VsZWxlVXRpbC5nZXRGaW5hbEF0dHJpYnV0ZSh0ZW1wLmpvaW4oXCIuXCIpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRlbXAuam9pbihcIi5cIik7XHJcbiAgICB9O1xyXG4gICAgVWt1bGVsZVV0aWwuc2VhcmNoSHRtbFRhZyA9IGZ1bmN0aW9uIChodG1sU3RyaW5nLCB0YWdOYW1lKSB7XHJcbiAgICAgICAgdmFyIHJlVGVtcCA9IFwiXjxcIiArIHRhZ05hbWUgKyBcIltcXFxcc1xcXFxTXSo+XCIgKyBcIltcXFxcc1xcXFxTXSo8L1wiICsgdGFnTmFtZSArIFwiPiRcIjtcclxuICAgICAgICB2YXIgcmUgPSBuZXcgUmVnRXhwKHJlVGVtcCk7XHJcbiAgICAgICAgdmFyIGluZGV4ID0gaHRtbFN0cmluZy5zZWFyY2gocmUpO1xyXG4gICAgICAgIHJldHVybiBpbmRleDtcclxuICAgIH07XHJcbiAgICBVa3VsZWxlVXRpbC5nZXRJbm5lckh0bWwgPSBmdW5jdGlvbiAoaHRtbFN0cmluZywgdGFnTmFtZSkge1xyXG4gICAgICAgIHZhciByZVRlbXAgPSBcIjxcIiArIHRhZ05hbWUgKyBcIltcXFxcc1xcXFxTXSo+XCIgKyBcIltcXFxcc1xcXFxTXSo8L1wiICsgdGFnTmFtZSArIFwiPlwiO1xyXG4gICAgICAgIHZhciByZSA9IG5ldyBSZWdFeHAocmVUZW1wKTtcclxuICAgICAgICB2YXIgbWF0Y2ggPSBodG1sU3RyaW5nLm1hdGNoKHJlKTtcclxuICAgICAgICBpZiAobWF0Y2guaW5kZXggPiAtMSkge1xyXG4gICAgICAgICAgICB2YXIgbWF0Y2hTdHJpbmcgPSBtYXRjaFswXTtcclxuICAgICAgICAgICAgdmFyIGluZGV4ID0gbWF0Y2hTdHJpbmcuc2VhcmNoKFwiPlwiKTtcclxuICAgICAgICAgICAgdmFyIHRlbXBTdHJpbmcgPSBtYXRjaFN0cmluZy5zdWJzdHIoaW5kZXggKyAxKTtcclxuICAgICAgICAgICAgdmFyIGluZGV4MiA9IHRlbXBTdHJpbmcubGFzdEluZGV4T2YoXCI8L1wiKTtcclxuICAgICAgICAgICAgdGVtcFN0cmluZyA9IHRlbXBTdHJpbmcuc3Vic3RyaW5nKDAsIGluZGV4Mik7XHJcbiAgICAgICAgICAgIHRlbXBTdHJpbmcgPSB0ZW1wU3RyaW5nLnJlcGxhY2UoLyheXFxzKil8KFxccyokKS9nLCBcIlwiKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2codGVtcFN0cmluZyk7XHJcbiAgICAgICAgICAgIHJldHVybiB0ZW1wU3RyaW5nO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFVrdWxlbGVVdGlsLmdldENvbXBvbmVudENvbmZpZ3VyYXRpb24gPSBmdW5jdGlvbiAoaHRtbFN0cmluZykge1xyXG4gICAgICAgIHZhciB0ZW1wRG9tID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB0ZW1wRG9tLmlubmVySFRNTCA9IGh0bWxTdHJpbmc7XHJcbiAgICAgICAgdmFyIHRwbCA9IFNlbGVjdG9yXzEuU2VsZWN0b3IucXVlcnlTZWxlY3RvckFsbCh0ZW1wRG9tLCBcInRlbXBsYXRlXCIpO1xyXG4gICAgICAgIHZhciBzY3JpcHRzID0gU2VsZWN0b3JfMS5TZWxlY3Rvci5xdWVyeVNlbGVjdG9yQWxsKHRlbXBEb20sIFwic2NyaXB0XCIpO1xyXG4gICAgICAgIHZhciBzdHlsZXNoZWV0ID0gU2VsZWN0b3JfMS5TZWxlY3Rvci5xdWVyeVNlbGVjdG9yQWxsKHRlbXBEb20sIFwic3R5bGVcIik7XHJcbiAgICAgICAgdmFyIGRlcHMgPSBbXTtcclxuICAgICAgICB2YXIgY2NzID0gbnVsbDtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNjcmlwdHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIHNjcmlwdCA9IHNjcmlwdHNbaV07XHJcbiAgICAgICAgICAgIGlmIChzY3JpcHQuc3JjICE9PSBcIlwiKSB7XHJcbiAgICAgICAgICAgICAgICBkZXBzLnB1c2goc2NyaXB0LnNyYyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjY3MgPSBzY3JpcHQuaW5uZXJIVE1MO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzdHlsZXNoZWV0ICYmIHN0eWxlc2hlZXRbMF0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBDb21wb25lbnRDb25maWd1cmF0aW9uXzEuQ29tcG9uZW50Q29uZmlndXJhdGlvbih0cGxbMF0uaW5uZXJIVE1MLCBkZXBzLCBjY3MsIHN0eWxlc2hlZXRbMF0uaW5uZXJIVE1MKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ29tcG9uZW50Q29uZmlndXJhdGlvbl8xLkNvbXBvbmVudENvbmZpZ3VyYXRpb24odHBsWzBdLmlubmVySFRNTCwgZGVwcywgY2NzKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgVWt1bGVsZVV0aWwuc2VhcmNoVWt1QXR0clRhZyA9IGZ1bmN0aW9uIChodG1sU3RyaW5nKSB7XHJcbiAgICAgICAgdmFyIHJlID0gL151a3VcXC0uKi87XHJcbiAgICAgICAgdmFyIGluZGV4ID0gaHRtbFN0cmluZy5zZWFyY2gocmUpO1xyXG4gICAgICAgIHJldHVybiBpbmRleDtcclxuICAgIH07XHJcbiAgICBVa3VsZWxlVXRpbC5nZXRBdHRyRnJvbVVrdVRhZyA9IGZ1bmN0aW9uICh1a3VUYWcsIGNhbWVsQ2FzZSkge1xyXG4gICAgICAgIGlmIChjYW1lbENhc2UgPT09IHZvaWQgMCkgeyBjYW1lbENhc2UgPSBmYWxzZTsgfVxyXG4gICAgICAgIGlmIChVa3VsZWxlVXRpbC5zZWFyY2hVa3VBdHRyVGFnKHVrdVRhZykgPT09IDApIHtcclxuICAgICAgICAgICAgdWt1VGFnID0gdWt1VGFnLnJlcGxhY2UoJ3VrdS0nLCAnJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjYW1lbENhc2UpIHtcclxuICAgICAgICAgICAgdmFyIG5hbWVzID0gdWt1VGFnLnNwbGl0KCctJyk7XHJcbiAgICAgICAgICAgIHVrdVRhZyA9IG5hbWVzWzBdO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IG5hbWVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZmlyc3RMZXR0ZXIgPSBuYW1lc1tpXS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKTtcclxuICAgICAgICAgICAgICAgIHVrdVRhZyA9IHVrdVRhZyArIGZpcnN0TGV0dGVyICsgbmFtZXNbaV0uc3Vic3RyKDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB1a3VUYWc7XHJcbiAgICB9O1xyXG4gICAgVWt1bGVsZVV0aWwuc2VhcmNoVWt1RXhwVGFnID0gZnVuY3Rpb24gKGV4cHJlc3Npb24pIHtcclxuICAgICAgICB2YXIgcmUgPSAvXlxce1xcey4qXFx9XFx9JC87XHJcbiAgICAgICAgdmFyIGluZGV4ID0gZXhwcmVzc2lvbi5zZWFyY2gocmUpO1xyXG4gICAgICAgIHJldHVybiBpbmRleDtcclxuICAgIH07XHJcbiAgICBVa3VsZWxlVXRpbC5zZWFyY2hVa3VGdW5jQXJnID0gZnVuY3Rpb24gKGh0bWxTdHJpbmcpIHtcclxuICAgICAgICB2YXIgcmUgPSAvXFwoLipcXCkkLztcclxuICAgICAgICB2YXIgaW5kZXggPSBodG1sU3RyaW5nLnNlYXJjaChyZSk7XHJcbiAgICAgICAgcmV0dXJuIGluZGV4O1xyXG4gICAgfTtcclxuICAgIFVrdWxlbGVVdGlsLmlzUmVwZWF0ID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICBpZiAoZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJ1a3UtcmVwZWF0XCIpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgVWt1bGVsZVV0aWwuaXNJblJlcGVhdCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgdmFyIHBhcmVudHMgPSBTZWxlY3Rvcl8xLlNlbGVjdG9yLnBhcmVudHMoZWxlbWVudCk7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXJlbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBwYXJlbnRfMSA9IHBhcmVudHNbaV07XHJcbiAgICAgICAgICAgIGlmIChwYXJlbnRfMS5ub2RlVHlwZSAhPT0gOSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGIgPSBwYXJlbnRfMS5nZXRBdHRyaWJ1dGUoXCJ1a3UtcmVwZWF0XCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGIpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgVWt1bGVsZVV0aWwuZ2V0Qm91bmRNb2RlbEluc3RhbnROYW1lID0gZnVuY3Rpb24gKGV4cHJlc3Npb24pIHtcclxuICAgICAgICB2YXIgY29udHJvbEluc3ROYW1lID0gZXhwcmVzc2lvbi5zcGxpdCgnLicpWzBdO1xyXG4gICAgICAgIGlmIChjb250cm9sSW5zdE5hbWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbnRyb2xJbnN0TmFtZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH07XHJcbiAgICBVa3VsZWxlVXRpbC5nZXRBdHRyaWJ1dGVGaW5hbFZhbHVlID0gZnVuY3Rpb24gKG9iamVjdCwgYXR0ck5hbWUpIHtcclxuICAgICAgICB2YXIgdmFsdWVPYmplY3QgPSBVa3VsZWxlVXRpbC5nZXRBdHRyaWJ1dGVGaW5hbFZhbHVlQW5kUGFyZW50KG9iamVjdCwgYXR0ck5hbWUpO1xyXG4gICAgICAgIHZhciB2YWx1ZSA9IHZhbHVlT2JqZWN0LnZhbHVlO1xyXG4gICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgIH07XHJcbiAgICBVa3VsZWxlVXRpbC5nZXRBdHRyaWJ1dGVGaW5hbFZhbHVlQW5kUGFyZW50ID0gZnVuY3Rpb24gKG9iamVjdCwgYXR0ck5hbWUpIHtcclxuICAgICAgICB2YXIgZmluYWxWYWx1ZSA9IG9iamVjdDtcclxuICAgICAgICB2YXIgcGFyZW50VmFsdWU7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBhdHRyTmFtZSA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgICB2YXIgYXR0clZhbHVlID0gVWt1bGVsZVV0aWwuZ2V0RmluYWxBdHRyaWJ1dGUoYXR0ck5hbWUpO1xyXG4gICAgICAgICAgICB2YXIgdGVtcCA9IGF0dHJWYWx1ZS5zcGxpdChcIi5cIik7XHJcbiAgICAgICAgICAgIGlmIChhdHRyVmFsdWUgIT09IFwiXCIgJiYgZmluYWxWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0ZW1wLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByb3BlcnR5ID0gdGVtcFtpXTtcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnRWYWx1ZSA9IGZpbmFsVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgZmluYWxWYWx1ZSA9IGZpbmFsVmFsdWVbcHJvcGVydHldO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmaW5hbFZhbHVlID09PSB1bmRlZmluZWQgfHwgZmluYWxWYWx1ZSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0Lmhhc093blByb3BlcnR5KFwiX2FsaWFzXCIpICYmIG9iamVjdC5fYWxpYXMgPT09IGF0dHJOYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmluYWxWYWx1ZSA9IG9iamVjdDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGZpbmFsVmFsdWUgPSBhdHRyTmFtZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IFZhbHVlQW5kUGFyZW50KGZpbmFsVmFsdWUsIHBhcmVudFZhbHVlKTtcclxuICAgIH07XHJcbiAgICBVa3VsZWxlVXRpbC5nZXRGaW5hbFZhbHVlID0gZnVuY3Rpb24gKHVrdSwgb2JqZWN0LCBhdHRyTmFtZSkge1xyXG4gICAgICAgIHZhciBhZGRpdGlvbmFsQXJndSA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMzsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIGFkZGl0aW9uYWxBcmd1W19pIC0gM10gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgaW5kZXggPSAtMTtcclxuICAgICAgICBpZiAodHlwZW9mIGF0dHJOYW1lID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgIGluZGV4ID0gVWt1bGVsZVV0aWwuc2VhcmNoVWt1RnVuY0FyZyhhdHRyTmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcclxuICAgICAgICAgICAgLy9pcyBhdHRyaWJ1dGVcclxuICAgICAgICAgICAgcmV0dXJuIFVrdWxlbGVVdGlsLmdldEF0dHJpYnV0ZUZpbmFsVmFsdWUob2JqZWN0LCBhdHRyTmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvL2lzIGZ1bmN0aW9uXHJcbiAgICAgICAgICAgIHZhciBmdW5jdGlvbk5hbWUgPSBhdHRyTmFtZS5zdWJzdHJpbmcoMCwgaW5kZXgpO1xyXG4gICAgICAgICAgICB2YXIgZmluYWxWYWx1ZU9iamVjdCA9IFVrdWxlbGVVdGlsLmdldEF0dHJpYnV0ZUZpbmFsVmFsdWVBbmRQYXJlbnQob2JqZWN0LCBmdW5jdGlvbk5hbWUpO1xyXG4gICAgICAgICAgICB2YXIgZmluYWxWYWx1ZSA9IGZpbmFsVmFsdWVPYmplY3QudmFsdWU7XHJcbiAgICAgICAgICAgIGlmIChmaW5hbFZhbHVlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmaW5hbFZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBuZXdfYXJndW1lbnRzID0gW107XHJcbiAgICAgICAgICAgIHZhciBfYXJndW1lbnRzU3RyaW5nID0gYXR0ck5hbWUuc3Vic3RyaW5nKGluZGV4ICsgMSwgYXR0ck5hbWUubGVuZ3RoIC0gMSk7XHJcbiAgICAgICAgICAgIGlmIChfYXJndW1lbnRzU3RyaW5nICE9PSBcIlwiKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgX2FyZ3VtZW50cyA9IEFyZ3VtZW50VXRpbF8xLkFyZ3VtZW50VXRpbC5hbmFseXplKF9hcmd1bWVudHNTdHJpbmcsIHVrdSk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IF9hcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHZvaWQgMDtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYXJndW1lbnQgPSBfYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhcmdUeXBlID0gdHlwZW9mIGFyZ3VtZW50O1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjb250cm9sbGVyTW9kZWwgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhcmdUeXBlID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXJNb2RlbCA9IHVrdS5faW50ZXJuYWxfZ2V0RGVmaW5pdGlvbk1hbmFnZXIoKS5nZXRDb250cm9sbGVyTW9kZWxCeU5hbWUoYXJndW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udHJvbGxlck1vZGVsICYmIGNvbnRyb2xsZXJNb2RlbC5jb250cm9sbGVySW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhZ3J1bWVudEluc3QgPSBjb250cm9sbGVyTW9kZWwuY29udHJvbGxlckluc3RhbmNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFyZ3VtZW50LnNwbGl0KFwiLlwiKS5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wID0gYWdydW1lbnRJbnN0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcCA9IFVrdWxlbGVVdGlsLmdldEZpbmFsVmFsdWUodWt1LCBhZ3J1bWVudEluc3QsIGFyZ3VtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAgPSBVa3VsZWxlVXRpbC5nZXRGaW5hbFZhbHVlKHVrdSwgb2JqZWN0LCBhcmd1bWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3X2FyZ3VtZW50cy5wdXNoKHRlbXApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3X2FyZ3VtZW50cy5wdXNoKGFyZ3VtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGFkZGl0aW9uYWxBcmd1KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYWRkaXRpb25hbEFyZ3VBcnJheSA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFkZGl0aW9uYWxBcmd1KTtcclxuICAgICAgICAgICAgICAgIG5ld19hcmd1bWVudHMgPSBuZXdfYXJndW1lbnRzLmNvbmNhdChhZGRpdGlvbmFsQXJndUFycmF5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmaW5hbFZhbHVlID0gZmluYWxWYWx1ZS5hcHBseShmaW5hbFZhbHVlT2JqZWN0LnBhcmVudCwgbmV3X2FyZ3VtZW50cyk7XHJcbiAgICAgICAgICAgIHJldHVybiBmaW5hbFZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gVWt1bGVsZVV0aWw7XHJcbn0oKSk7XHJcbmV4cG9ydHMuVWt1bGVsZVV0aWwgPSBVa3VsZWxlVXRpbDtcclxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy91dGlsL1VrdWxlbGVVdGlsLnRzXG4gKiogbW9kdWxlIGlkID0gOVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==');
},function(module,exports){eval("\"use strict\";\r\nvar Selector = (function () {\r\n    function Selector() {\r\n    }\r\n    Selector.querySelectorAll = function (element, query) {\r\n        if (window.hasOwnProperty('jQuery') && typeof window['jQuery'] !== \"undefined\") {\r\n            return window['jQuery'](element).find(query);\r\n        }\r\n        else {\r\n            return element.querySelectorAll(query);\r\n        }\r\n    };\r\n    Selector.fuzzyFind = function (element, text) {\r\n        if (element && element.attributes) {\r\n            for (var i = 0; i < element.attributes.length; i++) {\r\n                var attr = element.attributes[i];\r\n                if (attr.nodeName.search(text) > -1) {\r\n                    return element;\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    Selector.directText = function (element, text) {\r\n        var o = \"\";\r\n        var nodes = element.childNodes;\r\n        for (var i = 0; i <= nodes.length - 1; i++) {\r\n            var node = nodes[i];\r\n            if (node.nodeType === 3) {\r\n                if (text || text === \"\" || text === 0 || text === false) {\r\n                    node.nodeValue = text;\r\n                    return;\r\n                }\r\n                else {\r\n                    o += node.nodeValue;\r\n                }\r\n            }\r\n        }\r\n        return o.trim();\r\n    };\r\n    Selector.parents = function (element) {\r\n        var parents = [];\r\n        while (element.parentNode && element.parentNode.tagName !== 'BODY') {\r\n            parents.push(element.parentNode);\r\n            element = element.parentNode;\r\n        }\r\n        return parents;\r\n    };\r\n    return Selector;\r\n}());\r\nexports.Selector = Selector;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvZXh0ZW5kL1NlbGVjdG9yLnRzP2IyM2YiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQiwrQkFBK0I7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qix1QkFBdUI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QiLCJmaWxlIjoiMTAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcclxudmFyIFNlbGVjdG9yID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFNlbGVjdG9yKCkge1xyXG4gICAgfVxyXG4gICAgU2VsZWN0b3IucXVlcnlTZWxlY3RvckFsbCA9IGZ1bmN0aW9uIChlbGVtZW50LCBxdWVyeSkge1xyXG4gICAgICAgIGlmICh3aW5kb3cuaGFzT3duUHJvcGVydHkoJ2pRdWVyeScpICYmIHR5cGVvZiB3aW5kb3dbJ2pRdWVyeSddICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB3aW5kb3dbJ2pRdWVyeSddKGVsZW1lbnQpLmZpbmQocXVlcnkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChxdWVyeSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFNlbGVjdG9yLmZ1enp5RmluZCA9IGZ1bmN0aW9uIChlbGVtZW50LCB0ZXh0KSB7XHJcbiAgICAgICAgaWYgKGVsZW1lbnQgJiYgZWxlbWVudC5hdHRyaWJ1dGVzKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudC5hdHRyaWJ1dGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXR0ciA9IGVsZW1lbnQuYXR0cmlidXRlc1tpXTtcclxuICAgICAgICAgICAgICAgIGlmIChhdHRyLm5vZGVOYW1lLnNlYXJjaCh0ZXh0KSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9O1xyXG4gICAgU2VsZWN0b3IuZGlyZWN0VGV4dCA9IGZ1bmN0aW9uIChlbGVtZW50LCB0ZXh0KSB7XHJcbiAgICAgICAgdmFyIG8gPSBcIlwiO1xyXG4gICAgICAgIHZhciBub2RlcyA9IGVsZW1lbnQuY2hpbGROb2RlcztcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8PSBub2Rlcy5sZW5ndGggLSAxOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIG5vZGUgPSBub2Rlc1tpXTtcclxuICAgICAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT09IDMpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0ZXh0IHx8IHRleHQgPT09IFwiXCIgfHwgdGV4dCA9PT0gMCB8fCB0ZXh0ID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5vZGUubm9kZVZhbHVlID0gdGV4dDtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBvICs9IG5vZGUubm9kZVZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBvLnRyaW0oKTtcclxuICAgIH07XHJcbiAgICBTZWxlY3Rvci5wYXJlbnRzID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICB2YXIgcGFyZW50cyA9IFtdO1xyXG4gICAgICAgIHdoaWxlIChlbGVtZW50LnBhcmVudE5vZGUgJiYgZWxlbWVudC5wYXJlbnROb2RlLnRhZ05hbWUgIT09ICdCT0RZJykge1xyXG4gICAgICAgICAgICBwYXJlbnRzLnB1c2goZWxlbWVudC5wYXJlbnROb2RlKTtcclxuICAgICAgICAgICAgZWxlbWVudCA9IGVsZW1lbnQucGFyZW50Tm9kZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHBhcmVudHM7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFNlbGVjdG9yO1xyXG59KCkpO1xyXG5leHBvcnRzLlNlbGVjdG9yID0gU2VsZWN0b3I7XHJcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvZXh0ZW5kL1NlbGVjdG9yLnRzXG4gKiogbW9kdWxlIGlkID0gMTBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyJdLCJzb3VyY2VSb290IjoiIn0=")},function(module,exports){eval("\"use strict\";\r\nvar ArgumentUtil = (function () {\r\n    function ArgumentUtil() {\r\n    }\r\n    ArgumentUtil.analyze = function (argumentString, uku) {\r\n        //let re:RegExp = /^\\{\\{.*\\}\\}$/;\r\n        argumentString = argumentString.replace(/'/g, '\"');\r\n        var tempArr = argumentString.split(\",\");\r\n        for (var i = 0; i < tempArr.length; i++) {\r\n            var arr = tempArr[i];\r\n            for (var alias in uku._internal_getDefinitionManager().getControllersDefinition()) {\r\n                var index = arr.search(alias);\r\n                var index2 = arr.search(\"parent.\");\r\n                if (index > -1 || index2 > -1) {\r\n                    tempArr[i] = '\"' + arr + '\"';\r\n                }\r\n            }\r\n        }\r\n        argumentString = tempArr.join(\",\");\r\n        argumentString = '[' + argumentString + ']';\r\n        try {\r\n            var jsonArr = JSON.parse(argumentString);\r\n            return jsonArr;\r\n        }\r\n        catch (e) {\r\n            console.error(e);\r\n            return null;\r\n        }\r\n    };\r\n    return ArgumentUtil;\r\n}());\r\nexports.ArgumentUtil = ArgumentUtil;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdXRpbC9Bcmd1bWVudFV0aWwudHM/MDE4ZCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLEVBQUUsSUFBSSxFQUFFO0FBQ3RDO0FBQ0E7QUFDQSx1QkFBdUIsb0JBQW9CO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCIsImZpbGUiOiIxMS5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xyXG52YXIgQXJndW1lbnRVdGlsID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEFyZ3VtZW50VXRpbCgpIHtcclxuICAgIH1cclxuICAgIEFyZ3VtZW50VXRpbC5hbmFseXplID0gZnVuY3Rpb24gKGFyZ3VtZW50U3RyaW5nLCB1a3UpIHtcclxuICAgICAgICAvL2xldCByZTpSZWdFeHAgPSAvXlxce1xcey4qXFx9XFx9JC87XHJcbiAgICAgICAgYXJndW1lbnRTdHJpbmcgPSBhcmd1bWVudFN0cmluZy5yZXBsYWNlKC8nL2csICdcIicpO1xyXG4gICAgICAgIHZhciB0ZW1wQXJyID0gYXJndW1lbnRTdHJpbmcuc3BsaXQoXCIsXCIpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGVtcEFyci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgYXJyID0gdGVtcEFycltpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgYWxpYXMgaW4gdWt1Ll9pbnRlcm5hbF9nZXREZWZpbml0aW9uTWFuYWdlcigpLmdldENvbnRyb2xsZXJzRGVmaW5pdGlvbigpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBhcnIuc2VhcmNoKGFsaWFzKTtcclxuICAgICAgICAgICAgICAgIHZhciBpbmRleDIgPSBhcnIuc2VhcmNoKFwicGFyZW50LlwiKTtcclxuICAgICAgICAgICAgICAgIGlmIChpbmRleCA+IC0xIHx8IGluZGV4MiA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcEFycltpXSA9ICdcIicgKyBhcnIgKyAnXCInO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFyZ3VtZW50U3RyaW5nID0gdGVtcEFyci5qb2luKFwiLFwiKTtcclxuICAgICAgICBhcmd1bWVudFN0cmluZyA9ICdbJyArIGFyZ3VtZW50U3RyaW5nICsgJ10nO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHZhciBqc29uQXJyID0gSlNPTi5wYXJzZShhcmd1bWVudFN0cmluZyk7XHJcbiAgICAgICAgICAgIHJldHVybiBqc29uQXJyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEFyZ3VtZW50VXRpbDtcclxufSgpKTtcclxuZXhwb3J0cy5Bcmd1bWVudFV0aWwgPSBBcmd1bWVudFV0aWw7XHJcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvdXRpbC9Bcmd1bWVudFV0aWwudHNcbiAqKiBtb2R1bGUgaWQgPSAxMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==")},function(module,exports){eval('"use strict";\r\nvar ComponentConfiguration = (function () {\r\n    function ComponentConfiguration(_template, _dependentScripts, _componentControllerScript, _stylesheet) {\r\n        if (_stylesheet === void 0) { _stylesheet = undefined; }\r\n        this.template = _template;\r\n        this.dependentScripts = _dependentScripts;\r\n        this.componentControllerScript = _componentControllerScript;\r\n        this.stylesheet = _stylesheet;\r\n    }\r\n    return ComponentConfiguration;\r\n}());\r\nexports.ComponentConfiguration = ComponentConfiguration;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWwvQ29tcG9uZW50Q29uZmlndXJhdGlvbi50cz9lYWIwIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyx5QkFBeUI7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEIiwiZmlsZSI6IjEyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBDb21wb25lbnRDb25maWd1cmF0aW9uID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIENvbXBvbmVudENvbmZpZ3VyYXRpb24oX3RlbXBsYXRlLCBfZGVwZW5kZW50U2NyaXB0cywgX2NvbXBvbmVudENvbnRyb2xsZXJTY3JpcHQsIF9zdHlsZXNoZWV0KSB7XHJcbiAgICAgICAgaWYgKF9zdHlsZXNoZWV0ID09PSB2b2lkIDApIHsgX3N0eWxlc2hlZXQgPSB1bmRlZmluZWQ7IH1cclxuICAgICAgICB0aGlzLnRlbXBsYXRlID0gX3RlbXBsYXRlO1xyXG4gICAgICAgIHRoaXMuZGVwZW5kZW50U2NyaXB0cyA9IF9kZXBlbmRlbnRTY3JpcHRzO1xyXG4gICAgICAgIHRoaXMuY29tcG9uZW50Q29udHJvbGxlclNjcmlwdCA9IF9jb21wb25lbnRDb250cm9sbGVyU2NyaXB0O1xyXG4gICAgICAgIHRoaXMuc3R5bGVzaGVldCA9IF9zdHlsZXNoZWV0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIENvbXBvbmVudENvbmZpZ3VyYXRpb247XHJcbn0oKSk7XHJcbmV4cG9ydHMuQ29tcG9uZW50Q29uZmlndXJhdGlvbiA9IENvbXBvbmVudENvbmZpZ3VyYXRpb247XHJcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvbW9kZWwvQ29tcG9uZW50Q29uZmlndXJhdGlvbi50c1xuICoqIG1vZHVsZSBpZCA9IDEyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iXSwic291cmNlUm9vdCI6IiJ9')},function(module,exports,__webpack_require__){eval("\"use strict\";\r\nvar UkuleleUtil_1 = __webpack_require__(9);\r\nvar ObjectUtil_1 = __webpack_require__(4);\r\nvar UkuEventType_1 = __webpack_require__(14);\r\nvar Event_1 = __webpack_require__(15);\r\nvar DirtyChecker = (function () {\r\n    function DirtyChecker(_uku) {\r\n        this.uku = _uku;\r\n        this.defMgr = this.uku._internal_getDefinitionManager();\r\n    }\r\n    DirtyChecker.prototype.runDirtyChecking = function (ctrlAliasName, excludeElement) {\r\n        var _this = this;\r\n        if (ctrlAliasName) {\r\n            if (typeof (ctrlAliasName) === \"string\") {\r\n                watchController(ctrlAliasName);\r\n            }\r\n            else if (ObjectUtil_1.ObjectUtil.isArray(ctrlAliasName)) {\r\n                for (var i = 0; i < ctrlAliasName.length; i++) {\r\n                    watchController(ctrlAliasName[i]);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            for (var alias in this.defMgr.getControllersDefinition()) {\r\n                watchController(alias);\r\n            }\r\n        }\r\n        function watchController(alias) {\r\n            var controllerModel = _this.defMgr.getControllersDefinition()[alias];\r\n            if (!controllerModel) {\r\n                if (_this.uku.parentUku) {\r\n                    _this.uku.parentUku.refresh(alias);\r\n                }\r\n                return;\r\n            }\r\n            var controller = controllerModel.controllerInstance;\r\n            var previousCtrlModel = _this.defMgr.getCopyControllers()[alias];\r\n            var changedElementCount = 0;\r\n            for (var i = 0; i < controllerModel.boundItems.length; i++) {\r\n                var boundItem = controllerModel.boundItems[i];\r\n                var attrName = boundItem.attributeName;\r\n                if (attrName.search('parent.') > -1) {\r\n                    return;\r\n                }\r\n                if (previousCtrlModel) {\r\n                    if (boundItem.hasOwnProperty('ukuTag') && boundItem['ukuTag'] === \"selected\") {\r\n                        attrName = attrName.split(\"|\")[0];\r\n                    }\r\n                    var finalValue = UkuleleUtil_1.UkuleleUtil.getFinalValue(_this.uku, controller, attrName);\r\n                    var previousFinalValue = UkuleleUtil_1.UkuleleUtil.getFinalValue(_this.uku, previousCtrlModel, attrName);\r\n                    if (!ObjectUtil_1.ObjectUtil.compare(previousFinalValue, finalValue)) {\r\n                        attrName = boundItem.attributeName;\r\n                        var changedBoundItems = controllerModel.getBoundItemsByName(attrName);\r\n                        for (var j = 0; j < changedBoundItems.length; j++) {\r\n                            var changedBoundItem = changedBoundItems[j];\r\n                            if (changedBoundItem.element !== excludeElement || (boundItem.hasOwnProperty('ukuTag') && changedBoundItem['ukuTag'] !== \"value\")) {\r\n                                changedElementCount++;\r\n                                changedBoundItem.render(controller);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if (changedElementCount > 0 && _this.uku.hasListener(UkuEventType_1.UkuEventType.REFRESH)) {\r\n                _this.uku.dispatchEvent(new Event_1.Event(UkuEventType_1.UkuEventType.REFRESH));\r\n            }\r\n            _this.defMgr.copyControllerInstance(controller, alias);\r\n        }\r\n    };\r\n    ;\r\n    return DirtyChecker;\r\n}());\r\nexports.DirtyChecker = DirtyChecker;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9EaXJ0eUNoZWNrZXIudHM/NThlMCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLDBCQUEwQjtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHVDQUF1QztBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLDhCQUE4QjtBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEIiwiZmlsZSI6IjEzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBVa3VsZWxlVXRpbF8xID0gcmVxdWlyZShcIi4uL3V0aWwvVWt1bGVsZVV0aWxcIik7XHJcbnZhciBPYmplY3RVdGlsXzEgPSByZXF1aXJlKFwiLi4vdXRpbC9PYmplY3RVdGlsXCIpO1xyXG52YXIgVWt1RXZlbnRUeXBlXzEgPSByZXF1aXJlKFwiLi9Va3VFdmVudFR5cGVcIik7XHJcbnZhciBFdmVudF8xID0gcmVxdWlyZShcIi4vRXZlbnRcIik7XHJcbnZhciBEaXJ0eUNoZWNrZXIgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRGlydHlDaGVja2VyKF91a3UpIHtcclxuICAgICAgICB0aGlzLnVrdSA9IF91a3U7XHJcbiAgICAgICAgdGhpcy5kZWZNZ3IgPSB0aGlzLnVrdS5faW50ZXJuYWxfZ2V0RGVmaW5pdGlvbk1hbmFnZXIoKTtcclxuICAgIH1cclxuICAgIERpcnR5Q2hlY2tlci5wcm90b3R5cGUucnVuRGlydHlDaGVja2luZyA9IGZ1bmN0aW9uIChjdHJsQWxpYXNOYW1lLCBleGNsdWRlRWxlbWVudCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKGN0cmxBbGlhc05hbWUpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiAoY3RybEFsaWFzTmFtZSkgPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICAgICAgICAgIHdhdGNoQ29udHJvbGxlcihjdHJsQWxpYXNOYW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChPYmplY3RVdGlsXzEuT2JqZWN0VXRpbC5pc0FycmF5KGN0cmxBbGlhc05hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGN0cmxBbGlhc05hbWUubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB3YXRjaENvbnRyb2xsZXIoY3RybEFsaWFzTmFtZVtpXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGFsaWFzIGluIHRoaXMuZGVmTWdyLmdldENvbnRyb2xsZXJzRGVmaW5pdGlvbigpKSB7XHJcbiAgICAgICAgICAgICAgICB3YXRjaENvbnRyb2xsZXIoYWxpYXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZ1bmN0aW9uIHdhdGNoQ29udHJvbGxlcihhbGlhcykge1xyXG4gICAgICAgICAgICB2YXIgY29udHJvbGxlck1vZGVsID0gX3RoaXMuZGVmTWdyLmdldENvbnRyb2xsZXJzRGVmaW5pdGlvbigpW2FsaWFzXTtcclxuICAgICAgICAgICAgaWYgKCFjb250cm9sbGVyTW9kZWwpIHtcclxuICAgICAgICAgICAgICAgIGlmIChfdGhpcy51a3UucGFyZW50VWt1KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMudWt1LnBhcmVudFVrdS5yZWZyZXNoKGFsaWFzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgY29udHJvbGxlciA9IGNvbnRyb2xsZXJNb2RlbC5jb250cm9sbGVySW5zdGFuY2U7XHJcbiAgICAgICAgICAgIHZhciBwcmV2aW91c0N0cmxNb2RlbCA9IF90aGlzLmRlZk1nci5nZXRDb3B5Q29udHJvbGxlcnMoKVthbGlhc107XHJcbiAgICAgICAgICAgIHZhciBjaGFuZ2VkRWxlbWVudENvdW50ID0gMDtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb250cm9sbGVyTW9kZWwuYm91bmRJdGVtcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGJvdW5kSXRlbSA9IGNvbnRyb2xsZXJNb2RlbC5ib3VuZEl0ZW1zW2ldO1xyXG4gICAgICAgICAgICAgICAgdmFyIGF0dHJOYW1lID0gYm91bmRJdGVtLmF0dHJpYnV0ZU5hbWU7XHJcbiAgICAgICAgICAgICAgICBpZiAoYXR0ck5hbWUuc2VhcmNoKCdwYXJlbnQuJykgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChwcmV2aW91c0N0cmxNb2RlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChib3VuZEl0ZW0uaGFzT3duUHJvcGVydHkoJ3VrdVRhZycpICYmIGJvdW5kSXRlbVsndWt1VGFnJ10gPT09IFwic2VsZWN0ZWRcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyTmFtZSA9IGF0dHJOYW1lLnNwbGl0KFwifFwiKVswXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZpbmFsVmFsdWUgPSBVa3VsZWxlVXRpbF8xLlVrdWxlbGVVdGlsLmdldEZpbmFsVmFsdWUoX3RoaXMudWt1LCBjb250cm9sbGVyLCBhdHRyTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByZXZpb3VzRmluYWxWYWx1ZSA9IFVrdWxlbGVVdGlsXzEuVWt1bGVsZVV0aWwuZ2V0RmluYWxWYWx1ZShfdGhpcy51a3UsIHByZXZpb3VzQ3RybE1vZGVsLCBhdHRyTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFPYmplY3RVdGlsXzEuT2JqZWN0VXRpbC5jb21wYXJlKHByZXZpb3VzRmluYWxWYWx1ZSwgZmluYWxWYWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0ck5hbWUgPSBib3VuZEl0ZW0uYXR0cmlidXRlTmFtZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNoYW5nZWRCb3VuZEl0ZW1zID0gY29udHJvbGxlck1vZGVsLmdldEJvdW5kSXRlbXNCeU5hbWUoYXR0ck5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGNoYW5nZWRCb3VuZEl0ZW1zLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2hhbmdlZEJvdW5kSXRlbSA9IGNoYW5nZWRCb3VuZEl0ZW1zW2pdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoYW5nZWRCb3VuZEl0ZW0uZWxlbWVudCAhPT0gZXhjbHVkZUVsZW1lbnQgfHwgKGJvdW5kSXRlbS5oYXNPd25Qcm9wZXJ0eSgndWt1VGFnJykgJiYgY2hhbmdlZEJvdW5kSXRlbVsndWt1VGFnJ10gIT09IFwidmFsdWVcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VkRWxlbWVudENvdW50Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlZEJvdW5kSXRlbS5yZW5kZXIoY29udHJvbGxlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNoYW5nZWRFbGVtZW50Q291bnQgPiAwICYmIF90aGlzLnVrdS5oYXNMaXN0ZW5lcihVa3VFdmVudFR5cGVfMS5Va3VFdmVudFR5cGUuUkVGUkVTSCkpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnVrdS5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudF8xLkV2ZW50KFVrdUV2ZW50VHlwZV8xLlVrdUV2ZW50VHlwZS5SRUZSRVNIKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgX3RoaXMuZGVmTWdyLmNvcHlDb250cm9sbGVySW5zdGFuY2UoY29udHJvbGxlciwgYWxpYXMpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICA7XHJcbiAgICByZXR1cm4gRGlydHlDaGVja2VyO1xyXG59KCkpO1xyXG5leHBvcnRzLkRpcnR5Q2hlY2tlciA9IERpcnR5Q2hlY2tlcjtcclxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9jb3JlL0RpcnR5Q2hlY2tlci50c1xuICoqIG1vZHVsZSBpZCA9IDEzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iXSwic291cmNlUm9vdCI6IiJ9")},function(module,exports){eval("\"use strict\";\r\nvar UkuEventType = (function () {\r\n    function UkuEventType() {\r\n    }\r\n    UkuEventType.INITIALIZED = 'initialized';\r\n    UkuEventType.REFRESH = 'refresh';\r\n    UkuEventType.HANDLE_ELEMENT_COMPLETED = \"handle_element_completed\";\r\n    return UkuEventType;\r\n}());\r\nexports.UkuEventType = UkuEventType;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9Va3VFdmVudFR5cGUudHM/NzRmOSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEIiwiZmlsZSI6IjE0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBVa3VFdmVudFR5cGUgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gVWt1RXZlbnRUeXBlKCkge1xyXG4gICAgfVxyXG4gICAgVWt1RXZlbnRUeXBlLklOSVRJQUxJWkVEID0gJ2luaXRpYWxpemVkJztcclxuICAgIFVrdUV2ZW50VHlwZS5SRUZSRVNIID0gJ3JlZnJlc2gnO1xyXG4gICAgVWt1RXZlbnRUeXBlLkhBTkRMRV9FTEVNRU5UX0NPTVBMRVRFRCA9IFwiaGFuZGxlX2VsZW1lbnRfY29tcGxldGVkXCI7XHJcbiAgICByZXR1cm4gVWt1RXZlbnRUeXBlO1xyXG59KCkpO1xyXG5leHBvcnRzLlVrdUV2ZW50VHlwZSA9IFVrdUV2ZW50VHlwZTtcclxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9jb3JlL1VrdUV2ZW50VHlwZS50c1xuICoqIG1vZHVsZSBpZCA9IDE0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iXSwic291cmNlUm9vdCI6IiJ9")},function(module,exports){eval('"use strict";\r\nvar Event = (function () {\r\n    function Event(_eventType, _element) {\r\n        this.eventType = _eventType;\r\n        this.element = _element;\r\n    }\r\n    return Event;\r\n}());\r\nexports.Event = Event;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9FdmVudC50cz9hNDAwIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEIiwiZmlsZSI6IjE1LmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBFdmVudCA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBFdmVudChfZXZlbnRUeXBlLCBfZWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMuZXZlbnRUeXBlID0gX2V2ZW50VHlwZTtcclxuICAgICAgICB0aGlzLmVsZW1lbnQgPSBfZWxlbWVudDtcclxuICAgIH1cclxuICAgIHJldHVybiBFdmVudDtcclxufSgpKTtcclxuZXhwb3J0cy5FdmVudCA9IEV2ZW50O1xyXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL2NvcmUvRXZlbnQudHNcbiAqKiBtb2R1bGUgaWQgPSAxNVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==')},function(module,exports,__webpack_require__){eval("\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar EventEmitter_1 = __webpack_require__(1);\r\nvar UkuleleUtil_1 = __webpack_require__(9);\r\nvar AsyncCaller_1 = __webpack_require__(2);\r\nvar BoundItemAttribute_1 = __webpack_require__(17);\r\nvar BoundItemExpression_1 = __webpack_require__(19);\r\nvar BoundItemInnerText_1 = __webpack_require__(20);\r\nvar BoundItemRepeat_1 = __webpack_require__(21);\r\nvar BoundItemComponentAttribute_1 = __webpack_require__(22);\r\nvar ElementActionBinder_1 = __webpack_require__(23);\r\nvar EventListener_1 = __webpack_require__(24);\r\nvar Selector_1 = __webpack_require__(10);\r\nvar Event_1 = __webpack_require__(15);\r\nvar Analyzer = (function (_super) {\r\n    __extends(Analyzer, _super);\r\n    function Analyzer(_uku) {\r\n        _super.call(this);\r\n        //attribute\r\n        this.dealWithAttribute = function (element, tagName) {\r\n            var attr = element.getAttribute(\"uku-\" + tagName);\r\n            //let elementName = element.tagName;\r\n            var controllerModel = this.defMgr.getControllerModelByName(attr);\r\n            if (controllerModel) {\r\n                var boundItem = new BoundItemAttribute_1.BoundItemAttribute(attr, tagName, element, this.uku);\r\n                controllerModel.addBoundItem(boundItem);\r\n                boundItem.render(controllerModel.controllerInstance);\r\n                ElementActionBinder_1.elementChangedBinder(element, tagName, controllerModel, this.uku.refresh, this.uku);\r\n            }\r\n        };\r\n        this.uku = _uku;\r\n        this.defMgr = this.uku._internal_getDefinitionManager();\r\n    }\r\n    //htmlukutag\r\n    Analyzer.prototype.analyizeElement = function (ele) {\r\n        var _this = this;\r\n        this.searchComponent(ele, function (element) {\r\n            var subElements = [];\r\n            //scan element which has uku-* tag\r\n            var isSelfHasUkuTag = Selector_1.Selector.fuzzyFind(element, 'uku-');\r\n            if (isSelfHasUkuTag) {\r\n                subElements.push(isSelfHasUkuTag);\r\n            }\r\n            var allChildren = Selector_1.Selector.querySelectorAll(element, \"*\");\r\n            for (var i = 0; i < allChildren.length; i++) {\r\n                var child = allChildren[i];\r\n                var matchElement = Selector_1.Selector.fuzzyFind(child, 'uku-');\r\n                if (matchElement && !UkuleleUtil_1.UkuleleUtil.isInRepeat(matchElement)) {\r\n                    subElements.push(matchElement);\r\n                }\r\n            }\r\n            _this.searchExpression(element);\r\n            // attributeevent\r\n            for (var n = 0; n < subElements.length; n++) {\r\n                var subElement = subElements[n];\r\n                var orderAttrs = _this.sortAttributes(subElement);\r\n                for (var j = 0; j < orderAttrs.length; j++) {\r\n                    var attribute = orderAttrs[j];\r\n                    if (UkuleleUtil_1.UkuleleUtil.searchUkuAttrTag(attribute.nodeName) > -1) {\r\n                        var tempArr = attribute.nodeName.split('-');\r\n                        tempArr.shift();\r\n                        var attrName = tempArr.join('-');\r\n                        if (attrName !== \"application\") {\r\n                            if (attrName.search('on') === 0) {\r\n                                //is an event\r\n                                if (!UkuleleUtil_1.UkuleleUtil.isRepeat(subElement) && !UkuleleUtil_1.UkuleleUtil.isInRepeat(subElement)) {\r\n                                    _this.dealWithEvent(subElement, attrName);\r\n                                }\r\n                            }\r\n                            else if (attrName.search('repeat') !== -1) {\r\n                                //is an repeat\r\n                                _this.dealWithRepeat(subElement);\r\n                            }\r\n                            else {\r\n                                //is an attribute\r\n                                if (!UkuleleUtil_1.UkuleleUtil.isRepeat(subElement) && !UkuleleUtil_1.UkuleleUtil.isInRepeat(subElement)) {\r\n                                    if (attrName !== \"text\") {\r\n                                        _this.dealWithAttribute(subElement, attrName);\r\n                                    }\r\n                                    else {\r\n                                        _this.dealWithInnerText(subElement);\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            _this.defMgr.copyAllController();\r\n            if (_this.hasListener(Analyzer.ANALYIZE_COMPLETED)) {\r\n                _this.dispatchEvent(new Event_1.Event(Analyzer.ANALYIZE_COMPLETED, element));\r\n            }\r\n        });\r\n    };\r\n    Analyzer.prototype.sortAttributes = function (subElement) {\r\n        var orderAttrs = [];\r\n        for (var i = 0; i < subElement.attributes.length; i++) {\r\n            var attribute = subElement.attributes[i];\r\n            if (attribute.nodeName.search(\"uku-on\") !== -1) {\r\n                orderAttrs.push(attribute);\r\n            }\r\n            else {\r\n                orderAttrs.unshift(attribute);\r\n            }\r\n        }\r\n        return orderAttrs;\r\n    };\r\n    Analyzer.prototype.searchComponent = function (element, callback) {\r\n        var _this = this;\r\n        var comp = this.defMgr.getComponent(element.localName);\r\n        if (comp) {\r\n            if (!comp.lazy) {\r\n                var attrs = element.attributes;\r\n                var compDef = this.defMgr.getComponentsDefinition()[comp.tagName];\r\n                if (!UkuleleUtil_1.UkuleleUtil.isRepeat(element) && !UkuleleUtil_1.UkuleleUtil.isInRepeat(element)) {\r\n                    this.dealWithComponent(element, compDef.template, compDef.controllerClazz, attrs, function (compElement) {\r\n                        callback && callback(compElement);\r\n                    });\r\n                }\r\n                else {\r\n                    callback && callback(element);\r\n                }\r\n            }\r\n            else {\r\n                this.defMgr.addLazyComponentDefinition(comp.tagName, comp.templateUrl, function () {\r\n                    var attrs = element.attributes;\r\n                    var compDef = _this.defMgr.getComponentsDefinition()[comp.tagName];\r\n                    if (!UkuleleUtil_1.UkuleleUtil.isRepeat(element) && !UkuleleUtil_1.UkuleleUtil.isInRepeat(element)) {\r\n                        _this.dealWithComponent(element, compDef.template, compDef.controllerClazz, attrs, function (compElement) {\r\n                            callback && callback(compElement);\r\n                        });\r\n                    }\r\n                    else {\r\n                        callback && callback(element);\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        else {\r\n            if (element.children && element.children.length > 0) {\r\n                var ac_1 = new AsyncCaller_1.AsyncCaller();\r\n                for (var i = 0; i < element.children.length; i++) {\r\n                    var child = element.children[i];\r\n                    ac_1.pushQueue(this.searchComponent.bind(this), [child, function () {\r\n                            _this.searchComponent.resolve(ac_1);\r\n                        }]);\r\n                }\r\n                ac_1.exec(function () {\r\n                    callback && callback(element);\r\n                });\r\n            }\r\n            else {\r\n                callback && callback(element);\r\n            }\r\n        }\r\n    };\r\n    Analyzer.prototype.dealWithComponent = function (tag, template, Clazz, attrs, callback) {\r\n        var _this = this;\r\n        var randomAlias = 'cc_' + Math.floor(10000 * Math.random()).toString();\r\n        template = template.replace(new RegExp(\"\\'cc\\\\.\", 'gm'), \"'\" + randomAlias + '.');\r\n        template = template.replace(new RegExp('\"cc\\\\.', 'gm'), '\"' + randomAlias + '.');\r\n        template = template.replace(new RegExp('\\{\\{cc\\\\.', 'gm'), \"{{\" + randomAlias + '.');\r\n        template = template.replace(new RegExp(' cc\\\\.', 'gm'), ' ' + randomAlias + '.');\r\n        template = template.replace(new RegExp('\\\\.cc\\\\.', 'gm'), '.' + randomAlias + '.');\r\n        var tempFragment = document.createElement('div');\r\n        tempFragment.insertAdjacentHTML('afterBegin', template);\r\n        if (tempFragment.children.length > 1) {\r\n            template = tempFragment.outerHTML;\r\n        }\r\n        tag.insertAdjacentHTML('beforeBegin', template);\r\n        var htmlDom = tag.previousElementSibling;\r\n        htmlDom.classList.add(tag.localName);\r\n        var cc;\r\n        if (Clazz) {\r\n            cc = new Clazz(this.uku);\r\n            cc._dom = htmlDom;\r\n            cc.fire = function (eventType, data, bubbles, cancelable) {\r\n                if (bubbles === void 0) { bubbles = false; }\r\n                if (cancelable === void 0) { cancelable = true; }\r\n                var event = new Event(eventType.toLowerCase(), { \"bubbles\": bubbles, \"cancelable\": cancelable });\r\n                event['data'] = data;\r\n                cc._dom.dispatchEvent(event);\r\n            };\r\n            this.uku.registerController(randomAlias, cc);\r\n            for (var i = 0; i < attrs.length; i++) {\r\n                var attr = attrs[i];\r\n                if (UkuleleUtil_1.UkuleleUtil.searchUkuAttrTag(attr.nodeName) !== 0 || attr.nodeName.search(\"uku-on\") !== -1) {\r\n                    htmlDom.setAttribute(attr.nodeName, attr.nodeValue);\r\n                }\r\n                else {\r\n                    var tagName = UkuleleUtil_1.UkuleleUtil.getAttrFromUkuTag(attr.nodeName, true);\r\n                    var controllerModel = this.defMgr.getControllerModelByName(attr.nodeValue);\r\n                    if (controllerModel) {\r\n                        var boundItem = new BoundItemComponentAttribute_1.BoundItemComponentAttribute(attr.nodeValue, tagName, cc, this.uku);\r\n                        controllerModel.addBoundItem(boundItem);\r\n                        boundItem.render(controllerModel.controllerInstance);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            for (var i = 0; i < attrs.length; i++) {\r\n                var attr = attrs[i];\r\n                if (UkuleleUtil_1.UkuleleUtil.searchUkuAttrTag(attr.nodeName) !== 0 || attr.nodeName.search(\"uku-on\") !== -1) {\r\n                    htmlDom.setAttribute(attr.nodeName, attr.nodeValue);\r\n                }\r\n            }\r\n        }\r\n        tag.parentNode.removeChild(tag);\r\n        if (htmlDom.children && htmlDom.children.length > 0) {\r\n            var ac_2 = new AsyncCaller_1.AsyncCaller();\r\n            for (var j = 0; j < htmlDom.children.length; j++) {\r\n                var child = htmlDom.children[j];\r\n                ac_2.pushQueue(this.searchComponent.bind(this), [child, function () {\r\n                        _this.searchComponent.resolve(ac_2);\r\n                    }]);\r\n            }\r\n            ac_2.exec(function () {\r\n                if (cc && cc._initialized && typeof (cc._initialized) === 'function') {\r\n                    cc._initialized();\r\n                }\r\n                callback && callback(htmlDom);\r\n            });\r\n        }\r\n        else {\r\n            if (cc && cc._initialized && typeof (cc._initialized) === 'function') {\r\n                cc._initialized();\r\n            }\r\n            callback && callback(htmlDom);\r\n        }\r\n    };\r\n    Analyzer.prototype.searchExpression = function (element) {\r\n        if (UkuleleUtil_1.UkuleleUtil.searchUkuExpTag(Selector_1.Selector.directText(element)) !== -1) {\r\n            if (!UkuleleUtil_1.UkuleleUtil.isRepeat(element) && !UkuleleUtil_1.UkuleleUtil.isInRepeat(element)) {\r\n                //normal expression\r\n                this.dealWithExpression(element);\r\n            }\r\n        }\r\n        for (var i = 0; i < element.children.length; i++) {\r\n            this.searchExpression(element.children[i]);\r\n        }\r\n    };\r\n    Analyzer.prototype.dealWithExpression = function (element) {\r\n        //\r\n        var expression = Selector_1.Selector.directText(element);\r\n        if (UkuleleUtil_1.UkuleleUtil.searchUkuExpTag(expression) !== -1) {\r\n            var attr = expression.slice(2, -2);\r\n            var controllerModel = this.defMgr.getControllerModelByName(attr);\r\n            if (controllerModel) {\r\n                var boundItem = new BoundItemExpression_1.BoundItemExpression(attr, expression, element, this.uku);\r\n                controllerModel.addBoundItem(boundItem);\r\n                boundItem.render(controllerModel.controllerInstance);\r\n            }\r\n        }\r\n    };\r\n    //\r\n    Analyzer.prototype.dealWithInnerText = function (element) {\r\n        var attr = element.getAttribute(\"uku-text\");\r\n        if (attr) {\r\n            var controllerModel = this.defMgr.getControllerModelByName(attr);\r\n            if (controllerModel) {\r\n                var boundItem = new BoundItemInnerText_1.BoundItemInnerText(attr, element, this.uku);\r\n                controllerModel.addBoundItem(boundItem);\r\n                boundItem.render(controllerModel.controllerInstance);\r\n            }\r\n        }\r\n    };\r\n    //  event\r\n    Analyzer.prototype.dealWithEvent = function (element, eventName) {\r\n        var _this = this;\r\n        var expression = element.getAttribute(\"uku-\" + eventName);\r\n        var eventNameInListener = eventName.substring(2);\r\n        eventNameInListener = eventNameInListener.toLowerCase();\r\n        var controllerModel = this.defMgr.getControllerModelByName(expression);\r\n        if (controllerModel) {\r\n            var controller_1 = controllerModel.controllerInstance;\r\n            var temArr = expression.split(\".\");\r\n            var alias_1;\r\n            if (temArr[0] === \"parent\") {\r\n                alias_1 = temArr[1];\r\n            }\r\n            else {\r\n                alias_1 = temArr[0];\r\n            }\r\n            EventListener_1.EventListener.addEventListener(element, eventNameInListener, function (event) {\r\n                _this.defMgr.copyControllerInstance(controller_1, alias_1);\r\n                _this.defMgr.getBoundAttributeValue(expression, event);\r\n                _this.uku.refresh(alias_1, element);\r\n            });\r\n        }\r\n    };\r\n    // repeat\r\n    Analyzer.prototype.dealWithRepeat = function (element) {\r\n        var repeatExpression = element.getAttribute(\"uku-repeat\");\r\n        var tempArr = repeatExpression.split(' in ');\r\n        var itemName = tempArr[0];\r\n        var attr = tempArr[1];\r\n        var controllerModel = this.defMgr.getControllerModelByName(attr);\r\n        if (controllerModel) {\r\n            var controllerInst = controllerModel.controllerInstance;\r\n            var boundItem = new BoundItemRepeat_1.BoundItemRepeat(attr, itemName, element, this.uku);\r\n            controllerModel.addBoundItem(boundItem);\r\n            boundItem.render(controllerInst);\r\n        }\r\n    };\r\n    Analyzer.ANALYIZE_COMPLETED = 'analyizeCompleted';\r\n    return Analyzer;\r\n}(EventEmitter_1.EventEmitter));\r\nexports.Analyzer = Analyzer;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9BbmFseXplci50cz83YzU3Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixzQkFBc0I7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQix3QkFBd0I7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQix3QkFBd0I7QUFDbkQ7QUFDQTtBQUNBLCtCQUErQix1QkFBdUI7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsa0NBQWtDO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsNkJBQTZCO0FBQzVEO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCxFQUFFLGtCQUFrQjtBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsaUJBQWlCO0FBQzFELDRDQUE0QyxtQkFBbUI7QUFDL0QsZ0VBQWdFLCtDQUErQztBQUMvRztBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixrQkFBa0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsa0JBQWtCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQiw2QkFBNkI7QUFDeEQ7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsNkJBQTZCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCIsImZpbGUiOiIxNi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcclxuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG59O1xyXG52YXIgRXZlbnRFbWl0dGVyXzEgPSByZXF1aXJlKFwiLi9FdmVudEVtaXR0ZXJcIik7XHJcbnZhciBVa3VsZWxlVXRpbF8xID0gcmVxdWlyZShcIi4uL3V0aWwvVWt1bGVsZVV0aWxcIik7XHJcbnZhciBBc3luY0NhbGxlcl8xID0gcmVxdWlyZShcIi4uL3V0aWwvQXN5bmNDYWxsZXJcIik7XHJcbnZhciBCb3VuZEl0ZW1BdHRyaWJ1dGVfMSA9IHJlcXVpcmUoJy4uL21vZGVsL0JvdW5kSXRlbUF0dHJpYnV0ZScpO1xyXG52YXIgQm91bmRJdGVtRXhwcmVzc2lvbl8xID0gcmVxdWlyZSgnLi4vbW9kZWwvQm91bmRJdGVtRXhwcmVzc2lvbicpO1xyXG52YXIgQm91bmRJdGVtSW5uZXJUZXh0XzEgPSByZXF1aXJlKCcuLi9tb2RlbC9Cb3VuZEl0ZW1Jbm5lclRleHQnKTtcclxudmFyIEJvdW5kSXRlbVJlcGVhdF8xID0gcmVxdWlyZSgnLi4vbW9kZWwvQm91bmRJdGVtUmVwZWF0Jyk7XHJcbnZhciBCb3VuZEl0ZW1Db21wb25lbnRBdHRyaWJ1dGVfMSA9IHJlcXVpcmUoXCIuLi9tb2RlbC9Cb3VuZEl0ZW1Db21wb25lbnRBdHRyaWJ1dGVcIik7XHJcbnZhciBFbGVtZW50QWN0aW9uQmluZGVyXzEgPSByZXF1aXJlKFwiLi9FbGVtZW50QWN0aW9uQmluZGVyXCIpO1xyXG52YXIgRXZlbnRMaXN0ZW5lcl8xID0gcmVxdWlyZShcIi4uL2V4dGVuZC9FdmVudExpc3RlbmVyXCIpO1xyXG52YXIgU2VsZWN0b3JfMSA9IHJlcXVpcmUoXCIuLi9leHRlbmQvU2VsZWN0b3JcIik7XHJcbnZhciBFdmVudF8xID0gcmVxdWlyZShcIi4vRXZlbnRcIik7XHJcbnZhciBBbmFseXplciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoQW5hbHl6ZXIsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBBbmFseXplcihfdWt1KSB7XHJcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XHJcbiAgICAgICAgLy/lpITnkIbnu5HlrprnmoRhdHRyaWJ1dGVcclxuICAgICAgICB0aGlzLmRlYWxXaXRoQXR0cmlidXRlID0gZnVuY3Rpb24gKGVsZW1lbnQsIHRhZ05hbWUpIHtcclxuICAgICAgICAgICAgdmFyIGF0dHIgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShcInVrdS1cIiArIHRhZ05hbWUpO1xyXG4gICAgICAgICAgICAvL2xldCBlbGVtZW50TmFtZSA9IGVsZW1lbnQudGFnTmFtZTtcclxuICAgICAgICAgICAgdmFyIGNvbnRyb2xsZXJNb2RlbCA9IHRoaXMuZGVmTWdyLmdldENvbnRyb2xsZXJNb2RlbEJ5TmFtZShhdHRyKTtcclxuICAgICAgICAgICAgaWYgKGNvbnRyb2xsZXJNb2RlbCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGJvdW5kSXRlbSA9IG5ldyBCb3VuZEl0ZW1BdHRyaWJ1dGVfMS5Cb3VuZEl0ZW1BdHRyaWJ1dGUoYXR0ciwgdGFnTmFtZSwgZWxlbWVudCwgdGhpcy51a3UpO1xyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlck1vZGVsLmFkZEJvdW5kSXRlbShib3VuZEl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgYm91bmRJdGVtLnJlbmRlcihjb250cm9sbGVyTW9kZWwuY29udHJvbGxlckluc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgIEVsZW1lbnRBY3Rpb25CaW5kZXJfMS5lbGVtZW50Q2hhbmdlZEJpbmRlcihlbGVtZW50LCB0YWdOYW1lLCBjb250cm9sbGVyTW9kZWwsIHRoaXMudWt1LnJlZnJlc2gsIHRoaXMudWt1KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy51a3UgPSBfdWt1O1xyXG4gICAgICAgIHRoaXMuZGVmTWdyID0gdGhpcy51a3UuX2ludGVybmFsX2dldERlZmluaXRpb25NYW5hZ2VyKCk7XHJcbiAgICB9XHJcbiAgICAvL+ino+aekGh0bWzkuK3lkITkuKp1a3XnmoR0YWdcclxuICAgIEFuYWx5emVyLnByb3RvdHlwZS5hbmFseWl6ZUVsZW1lbnQgPSBmdW5jdGlvbiAoZWxlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLnNlYXJjaENvbXBvbmVudChlbGUsIGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBzdWJFbGVtZW50cyA9IFtdO1xyXG4gICAgICAgICAgICAvL3NjYW4gZWxlbWVudCB3aGljaCBoYXMgdWt1LSogdGFnXHJcbiAgICAgICAgICAgIHZhciBpc1NlbGZIYXNVa3VUYWcgPSBTZWxlY3Rvcl8xLlNlbGVjdG9yLmZ1enp5RmluZChlbGVtZW50LCAndWt1LScpO1xyXG4gICAgICAgICAgICBpZiAoaXNTZWxmSGFzVWt1VGFnKSB7XHJcbiAgICAgICAgICAgICAgICBzdWJFbGVtZW50cy5wdXNoKGlzU2VsZkhhc1VrdVRhZyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIGFsbENoaWxkcmVuID0gU2VsZWN0b3JfMS5TZWxlY3Rvci5xdWVyeVNlbGVjdG9yQWxsKGVsZW1lbnQsIFwiKlwiKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhbGxDaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkID0gYWxsQ2hpbGRyZW5baV07XHJcbiAgICAgICAgICAgICAgICB2YXIgbWF0Y2hFbGVtZW50ID0gU2VsZWN0b3JfMS5TZWxlY3Rvci5mdXp6eUZpbmQoY2hpbGQsICd1a3UtJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hFbGVtZW50ICYmICFVa3VsZWxlVXRpbF8xLlVrdWxlbGVVdGlsLmlzSW5SZXBlYXQobWF0Y2hFbGVtZW50KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1YkVsZW1lbnRzLnB1c2gobWF0Y2hFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfdGhpcy5zZWFyY2hFeHByZXNzaW9uKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAvL+ino+aekOe7keWumiBhdHRyaWJ1dGXvvIzms6jlhoxldmVudFxyXG4gICAgICAgICAgICBmb3IgKHZhciBuID0gMDsgbiA8IHN1YkVsZW1lbnRzLmxlbmd0aDsgbisrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3ViRWxlbWVudCA9IHN1YkVsZW1lbnRzW25dO1xyXG4gICAgICAgICAgICAgICAgdmFyIG9yZGVyQXR0cnMgPSBfdGhpcy5zb3J0QXR0cmlidXRlcyhzdWJFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgb3JkZXJBdHRycy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhdHRyaWJ1dGUgPSBvcmRlckF0dHJzW2pdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChVa3VsZWxlVXRpbF8xLlVrdWxlbGVVdGlsLnNlYXJjaFVrdUF0dHJUYWcoYXR0cmlidXRlLm5vZGVOYW1lKSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wQXJyID0gYXR0cmlidXRlLm5vZGVOYW1lLnNwbGl0KCctJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBBcnIuc2hpZnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGF0dHJOYW1lID0gdGVtcEFyci5qb2luKCctJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhdHRyTmFtZSAhPT0gXCJhcHBsaWNhdGlvblwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXR0ck5hbWUuc2VhcmNoKCdvbicpID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9pcyBhbiBldmVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghVWt1bGVsZVV0aWxfMS5Va3VsZWxlVXRpbC5pc1JlcGVhdChzdWJFbGVtZW50KSAmJiAhVWt1bGVsZVV0aWxfMS5Va3VsZWxlVXRpbC5pc0luUmVwZWF0KHN1YkVsZW1lbnQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmRlYWxXaXRoRXZlbnQoc3ViRWxlbWVudCwgYXR0ck5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGF0dHJOYW1lLnNlYXJjaCgncmVwZWF0JykgIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9pcyBhbiByZXBlYXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5kZWFsV2l0aFJlcGVhdChzdWJFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vaXMgYW4gYXR0cmlidXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFVa3VsZWxlVXRpbF8xLlVrdWxlbGVVdGlsLmlzUmVwZWF0KHN1YkVsZW1lbnQpICYmICFVa3VsZWxlVXRpbF8xLlVrdWxlbGVVdGlsLmlzSW5SZXBlYXQoc3ViRWxlbWVudCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHJOYW1lICE9PSBcInRleHRcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZGVhbFdpdGhBdHRyaWJ1dGUoc3ViRWxlbWVudCwgYXR0ck5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZGVhbFdpdGhJbm5lclRleHQoc3ViRWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgX3RoaXMuZGVmTWdyLmNvcHlBbGxDb250cm9sbGVyKCk7XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy5oYXNMaXN0ZW5lcihBbmFseXplci5BTkFMWUlaRV9DT01QTEVURUQpKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudF8xLkV2ZW50KEFuYWx5emVyLkFOQUxZSVpFX0NPTVBMRVRFRCwgZWxlbWVudCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgQW5hbHl6ZXIucHJvdG90eXBlLnNvcnRBdHRyaWJ1dGVzID0gZnVuY3Rpb24gKHN1YkVsZW1lbnQpIHtcclxuICAgICAgICB2YXIgb3JkZXJBdHRycyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3ViRWxlbWVudC5hdHRyaWJ1dGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBhdHRyaWJ1dGUgPSBzdWJFbGVtZW50LmF0dHJpYnV0ZXNbaV07XHJcbiAgICAgICAgICAgIGlmIChhdHRyaWJ1dGUubm9kZU5hbWUuc2VhcmNoKFwidWt1LW9uXCIpICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgb3JkZXJBdHRycy5wdXNoKGF0dHJpYnV0ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBvcmRlckF0dHJzLnVuc2hpZnQoYXR0cmlidXRlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb3JkZXJBdHRycztcclxuICAgIH07XHJcbiAgICBBbmFseXplci5wcm90b3R5cGUuc2VhcmNoQ29tcG9uZW50ID0gZnVuY3Rpb24gKGVsZW1lbnQsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgY29tcCA9IHRoaXMuZGVmTWdyLmdldENvbXBvbmVudChlbGVtZW50LmxvY2FsTmFtZSk7XHJcbiAgICAgICAgaWYgKGNvbXApIHtcclxuICAgICAgICAgICAgaWYgKCFjb21wLmxhenkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBhdHRycyA9IGVsZW1lbnQuYXR0cmlidXRlcztcclxuICAgICAgICAgICAgICAgIHZhciBjb21wRGVmID0gdGhpcy5kZWZNZ3IuZ2V0Q29tcG9uZW50c0RlZmluaXRpb24oKVtjb21wLnRhZ05hbWVdO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFVa3VsZWxlVXRpbF8xLlVrdWxlbGVVdGlsLmlzUmVwZWF0KGVsZW1lbnQpICYmICFVa3VsZWxlVXRpbF8xLlVrdWxlbGVVdGlsLmlzSW5SZXBlYXQoZWxlbWVudCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlYWxXaXRoQ29tcG9uZW50KGVsZW1lbnQsIGNvbXBEZWYudGVtcGxhdGUsIGNvbXBEZWYuY29udHJvbGxlckNsYXp6LCBhdHRycywgZnVuY3Rpb24gKGNvbXBFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKGNvbXBFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZWZNZ3IuYWRkTGF6eUNvbXBvbmVudERlZmluaXRpb24oY29tcC50YWdOYW1lLCBjb21wLnRlbXBsYXRlVXJsLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGF0dHJzID0gZWxlbWVudC5hdHRyaWJ1dGVzO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjb21wRGVmID0gX3RoaXMuZGVmTWdyLmdldENvbXBvbmVudHNEZWZpbml0aW9uKClbY29tcC50YWdOYW1lXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIVVrdWxlbGVVdGlsXzEuVWt1bGVsZVV0aWwuaXNSZXBlYXQoZWxlbWVudCkgJiYgIVVrdWxlbGVVdGlsXzEuVWt1bGVsZVV0aWwuaXNJblJlcGVhdChlbGVtZW50KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5kZWFsV2l0aENvbXBvbmVudChlbGVtZW50LCBjb21wRGVmLnRlbXBsYXRlLCBjb21wRGVmLmNvbnRyb2xsZXJDbGF6eiwgYXR0cnMsIGZ1bmN0aW9uIChjb21wRWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soY29tcEVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoZWxlbWVudC5jaGlsZHJlbiAmJiBlbGVtZW50LmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHZhciBhY18xID0gbmV3IEFzeW5jQ2FsbGVyXzEuQXN5bmNDYWxsZXIoKTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudC5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IGVsZW1lbnQuY2hpbGRyZW5baV07XHJcbiAgICAgICAgICAgICAgICAgICAgYWNfMS5wdXNoUXVldWUodGhpcy5zZWFyY2hDb21wb25lbnQuYmluZCh0aGlzKSwgW2NoaWxkLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zZWFyY2hDb21wb25lbnQucmVzb2x2ZShhY18xKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYWNfMS5leGVjKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayhlbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soZWxlbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgQW5hbHl6ZXIucHJvdG90eXBlLmRlYWxXaXRoQ29tcG9uZW50ID0gZnVuY3Rpb24gKHRhZywgdGVtcGxhdGUsIENsYXp6LCBhdHRycywgY2FsbGJhY2spIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciByYW5kb21BbGlhcyA9ICdjY18nICsgTWF0aC5mbG9vcigxMDAwMCAqIE1hdGgucmFuZG9tKCkpLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgdGVtcGxhdGUgPSB0ZW1wbGF0ZS5yZXBsYWNlKG5ldyBSZWdFeHAoXCJcXCdjY1xcXFwuXCIsICdnbScpLCBcIidcIiArIHJhbmRvbUFsaWFzICsgJy4nKTtcclxuICAgICAgICB0ZW1wbGF0ZSA9IHRlbXBsYXRlLnJlcGxhY2UobmV3IFJlZ0V4cCgnXCJjY1xcXFwuJywgJ2dtJyksICdcIicgKyByYW5kb21BbGlhcyArICcuJyk7XHJcbiAgICAgICAgdGVtcGxhdGUgPSB0ZW1wbGF0ZS5yZXBsYWNlKG5ldyBSZWdFeHAoJ1xce1xce2NjXFxcXC4nLCAnZ20nKSwgXCJ7e1wiICsgcmFuZG9tQWxpYXMgKyAnLicpO1xyXG4gICAgICAgIHRlbXBsYXRlID0gdGVtcGxhdGUucmVwbGFjZShuZXcgUmVnRXhwKCcgY2NcXFxcLicsICdnbScpLCAnICcgKyByYW5kb21BbGlhcyArICcuJyk7XHJcbiAgICAgICAgdGVtcGxhdGUgPSB0ZW1wbGF0ZS5yZXBsYWNlKG5ldyBSZWdFeHAoJ1xcXFwuY2NcXFxcLicsICdnbScpLCAnLicgKyByYW5kb21BbGlhcyArICcuJyk7XHJcbiAgICAgICAgdmFyIHRlbXBGcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIHRlbXBGcmFnbWVudC5pbnNlcnRBZGphY2VudEhUTUwoJ2FmdGVyQmVnaW4nLCB0ZW1wbGF0ZSk7XHJcbiAgICAgICAgaWYgKHRlbXBGcmFnbWVudC5jaGlsZHJlbi5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlID0gdGVtcEZyYWdtZW50Lm91dGVySFRNTDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGFnLmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlQmVnaW4nLCB0ZW1wbGF0ZSk7XHJcbiAgICAgICAgdmFyIGh0bWxEb20gPSB0YWcucHJldmlvdXNFbGVtZW50U2libGluZztcclxuICAgICAgICBodG1sRG9tLmNsYXNzTGlzdC5hZGQodGFnLmxvY2FsTmFtZSk7XHJcbiAgICAgICAgdmFyIGNjO1xyXG4gICAgICAgIGlmIChDbGF6eikge1xyXG4gICAgICAgICAgICBjYyA9IG5ldyBDbGF6eih0aGlzLnVrdSk7XHJcbiAgICAgICAgICAgIGNjLl9kb20gPSBodG1sRG9tO1xyXG4gICAgICAgICAgICBjYy5maXJlID0gZnVuY3Rpb24gKGV2ZW50VHlwZSwgZGF0YSwgYnViYmxlcywgY2FuY2VsYWJsZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGJ1YmJsZXMgPT09IHZvaWQgMCkgeyBidWJibGVzID0gZmFsc2U7IH1cclxuICAgICAgICAgICAgICAgIGlmIChjYW5jZWxhYmxlID09PSB2b2lkIDApIHsgY2FuY2VsYWJsZSA9IHRydWU7IH1cclxuICAgICAgICAgICAgICAgIHZhciBldmVudCA9IG5ldyBFdmVudChldmVudFR5cGUudG9Mb3dlckNhc2UoKSwgeyBcImJ1YmJsZXNcIjogYnViYmxlcywgXCJjYW5jZWxhYmxlXCI6IGNhbmNlbGFibGUgfSk7XHJcbiAgICAgICAgICAgICAgICBldmVudFsnZGF0YSddID0gZGF0YTtcclxuICAgICAgICAgICAgICAgIGNjLl9kb20uZGlzcGF0Y2hFdmVudChldmVudCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMudWt1LnJlZ2lzdGVyQ29udHJvbGxlcihyYW5kb21BbGlhcywgY2MpO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGF0dHJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXR0ciA9IGF0dHJzW2ldO1xyXG4gICAgICAgICAgICAgICAgaWYgKFVrdWxlbGVVdGlsXzEuVWt1bGVsZVV0aWwuc2VhcmNoVWt1QXR0clRhZyhhdHRyLm5vZGVOYW1lKSAhPT0gMCB8fCBhdHRyLm5vZGVOYW1lLnNlYXJjaChcInVrdS1vblwiKSAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICBodG1sRG9tLnNldEF0dHJpYnV0ZShhdHRyLm5vZGVOYW1lLCBhdHRyLm5vZGVWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGFnTmFtZSA9IFVrdWxlbGVVdGlsXzEuVWt1bGVsZVV0aWwuZ2V0QXR0ckZyb21Va3VUYWcoYXR0ci5ub2RlTmFtZSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRyb2xsZXJNb2RlbCA9IHRoaXMuZGVmTWdyLmdldENvbnRyb2xsZXJNb2RlbEJ5TmFtZShhdHRyLm5vZGVWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRyb2xsZXJNb2RlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYm91bmRJdGVtID0gbmV3IEJvdW5kSXRlbUNvbXBvbmVudEF0dHJpYnV0ZV8xLkJvdW5kSXRlbUNvbXBvbmVudEF0dHJpYnV0ZShhdHRyLm5vZGVWYWx1ZSwgdGFnTmFtZSwgY2MsIHRoaXMudWt1KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlck1vZGVsLmFkZEJvdW5kSXRlbShib3VuZEl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBib3VuZEl0ZW0ucmVuZGVyKGNvbnRyb2xsZXJNb2RlbC5jb250cm9sbGVySW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhdHRycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGF0dHIgPSBhdHRyc1tpXTtcclxuICAgICAgICAgICAgICAgIGlmIChVa3VsZWxlVXRpbF8xLlVrdWxlbGVVdGlsLnNlYXJjaFVrdUF0dHJUYWcoYXR0ci5ub2RlTmFtZSkgIT09IDAgfHwgYXR0ci5ub2RlTmFtZS5zZWFyY2goXCJ1a3Utb25cIikgIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaHRtbERvbS5zZXRBdHRyaWJ1dGUoYXR0ci5ub2RlTmFtZSwgYXR0ci5ub2RlVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRhZy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRhZyk7XHJcbiAgICAgICAgaWYgKGh0bWxEb20uY2hpbGRyZW4gJiYgaHRtbERvbS5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHZhciBhY18yID0gbmV3IEFzeW5jQ2FsbGVyXzEuQXN5bmNDYWxsZXIoKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBodG1sRG9tLmNoaWxkcmVuLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSBodG1sRG9tLmNoaWxkcmVuW2pdO1xyXG4gICAgICAgICAgICAgICAgYWNfMi5wdXNoUXVldWUodGhpcy5zZWFyY2hDb21wb25lbnQuYmluZCh0aGlzKSwgW2NoaWxkLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNlYXJjaENvbXBvbmVudC5yZXNvbHZlKGFjXzIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1dKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhY18yLmV4ZWMoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNjICYmIGNjLl9pbml0aWFsaXplZCAmJiB0eXBlb2YgKGNjLl9pbml0aWFsaXplZCkgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYy5faW5pdGlhbGl6ZWQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKGh0bWxEb20pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChjYyAmJiBjYy5faW5pdGlhbGl6ZWQgJiYgdHlwZW9mIChjYy5faW5pdGlhbGl6ZWQpID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICBjYy5faW5pdGlhbGl6ZWQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayhodG1sRG9tKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgQW5hbHl6ZXIucHJvdG90eXBlLnNlYXJjaEV4cHJlc3Npb24gPSBmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgIGlmIChVa3VsZWxlVXRpbF8xLlVrdWxlbGVVdGlsLnNlYXJjaFVrdUV4cFRhZyhTZWxlY3Rvcl8xLlNlbGVjdG9yLmRpcmVjdFRleHQoZWxlbWVudCkpICE9PSAtMSkge1xyXG4gICAgICAgICAgICBpZiAoIVVrdWxlbGVVdGlsXzEuVWt1bGVsZVV0aWwuaXNSZXBlYXQoZWxlbWVudCkgJiYgIVVrdWxlbGVVdGlsXzEuVWt1bGVsZVV0aWwuaXNJblJlcGVhdChlbGVtZW50KSkge1xyXG4gICAgICAgICAgICAgICAgLy9ub3JtYWwgZXhwcmVzc2lvblxyXG4gICAgICAgICAgICAgICAgdGhpcy5kZWFsV2l0aEV4cHJlc3Npb24oZWxlbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtZW50LmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoRXhwcmVzc2lvbihlbGVtZW50LmNoaWxkcmVuW2ldKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgQW5hbHl6ZXIucHJvdG90eXBlLmRlYWxXaXRoRXhwcmVzc2lvbiA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgLy/pgJrluLjnmoToirHmi6zlj7flo7DmmI7mlrnlvI9cclxuICAgICAgICB2YXIgZXhwcmVzc2lvbiA9IFNlbGVjdG9yXzEuU2VsZWN0b3IuZGlyZWN0VGV4dChlbGVtZW50KTtcclxuICAgICAgICBpZiAoVWt1bGVsZVV0aWxfMS5Va3VsZWxlVXRpbC5zZWFyY2hVa3VFeHBUYWcoZXhwcmVzc2lvbikgIT09IC0xKSB7XHJcbiAgICAgICAgICAgIHZhciBhdHRyID0gZXhwcmVzc2lvbi5zbGljZSgyLCAtMik7XHJcbiAgICAgICAgICAgIHZhciBjb250cm9sbGVyTW9kZWwgPSB0aGlzLmRlZk1nci5nZXRDb250cm9sbGVyTW9kZWxCeU5hbWUoYXR0cik7XHJcbiAgICAgICAgICAgIGlmIChjb250cm9sbGVyTW9kZWwpIHtcclxuICAgICAgICAgICAgICAgIHZhciBib3VuZEl0ZW0gPSBuZXcgQm91bmRJdGVtRXhwcmVzc2lvbl8xLkJvdW5kSXRlbUV4cHJlc3Npb24oYXR0ciwgZXhwcmVzc2lvbiwgZWxlbWVudCwgdGhpcy51a3UpO1xyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlck1vZGVsLmFkZEJvdW5kSXRlbShib3VuZEl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgYm91bmRJdGVtLnJlbmRlcihjb250cm9sbGVyTW9kZWwuY29udHJvbGxlckluc3RhbmNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvL1xyXG4gICAgQW5hbHl6ZXIucHJvdG90eXBlLmRlYWxXaXRoSW5uZXJUZXh0ID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICB2YXIgYXR0ciA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwidWt1LXRleHRcIik7XHJcbiAgICAgICAgaWYgKGF0dHIpIHtcclxuICAgICAgICAgICAgdmFyIGNvbnRyb2xsZXJNb2RlbCA9IHRoaXMuZGVmTWdyLmdldENvbnRyb2xsZXJNb2RlbEJ5TmFtZShhdHRyKTtcclxuICAgICAgICAgICAgaWYgKGNvbnRyb2xsZXJNb2RlbCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGJvdW5kSXRlbSA9IG5ldyBCb3VuZEl0ZW1Jbm5lclRleHRfMS5Cb3VuZEl0ZW1Jbm5lclRleHQoYXR0ciwgZWxlbWVudCwgdGhpcy51a3UpO1xyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlck1vZGVsLmFkZEJvdW5kSXRlbShib3VuZEl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgYm91bmRJdGVtLnJlbmRlcihjb250cm9sbGVyTW9kZWwuY29udHJvbGxlckluc3RhbmNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvL+WkhOeQhiDkuovku7YgZXZlbnRcclxuICAgIEFuYWx5emVyLnByb3RvdHlwZS5kZWFsV2l0aEV2ZW50ID0gZnVuY3Rpb24gKGVsZW1lbnQsIGV2ZW50TmFtZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGV4cHJlc3Npb24gPSBlbGVtZW50LmdldEF0dHJpYnV0ZShcInVrdS1cIiArIGV2ZW50TmFtZSk7XHJcbiAgICAgICAgdmFyIGV2ZW50TmFtZUluTGlzdGVuZXIgPSBldmVudE5hbWUuc3Vic3RyaW5nKDIpO1xyXG4gICAgICAgIGV2ZW50TmFtZUluTGlzdGVuZXIgPSBldmVudE5hbWVJbkxpc3RlbmVyLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgdmFyIGNvbnRyb2xsZXJNb2RlbCA9IHRoaXMuZGVmTWdyLmdldENvbnRyb2xsZXJNb2RlbEJ5TmFtZShleHByZXNzaW9uKTtcclxuICAgICAgICBpZiAoY29udHJvbGxlck1vZGVsKSB7XHJcbiAgICAgICAgICAgIHZhciBjb250cm9sbGVyXzEgPSBjb250cm9sbGVyTW9kZWwuY29udHJvbGxlckluc3RhbmNlO1xyXG4gICAgICAgICAgICB2YXIgdGVtQXJyID0gZXhwcmVzc2lvbi5zcGxpdChcIi5cIik7XHJcbiAgICAgICAgICAgIHZhciBhbGlhc18xO1xyXG4gICAgICAgICAgICBpZiAodGVtQXJyWzBdID09PSBcInBhcmVudFwiKSB7XHJcbiAgICAgICAgICAgICAgICBhbGlhc18xID0gdGVtQXJyWzFdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYWxpYXNfMSA9IHRlbUFyclswXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBFdmVudExpc3RlbmVyXzEuRXZlbnRMaXN0ZW5lci5hZGRFdmVudExpc3RlbmVyKGVsZW1lbnQsIGV2ZW50TmFtZUluTGlzdGVuZXIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuZGVmTWdyLmNvcHlDb250cm9sbGVySW5zdGFuY2UoY29udHJvbGxlcl8xLCBhbGlhc18xKTtcclxuICAgICAgICAgICAgICAgIF90aGlzLmRlZk1nci5nZXRCb3VuZEF0dHJpYnV0ZVZhbHVlKGV4cHJlc3Npb24sIGV2ZW50KTtcclxuICAgICAgICAgICAgICAgIF90aGlzLnVrdS5yZWZyZXNoKGFsaWFzXzEsIGVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLy/lpITnkIYgcmVwZWF0XHJcbiAgICBBbmFseXplci5wcm90b3R5cGUuZGVhbFdpdGhSZXBlYXQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgIHZhciByZXBlYXRFeHByZXNzaW9uID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJ1a3UtcmVwZWF0XCIpO1xyXG4gICAgICAgIHZhciB0ZW1wQXJyID0gcmVwZWF0RXhwcmVzc2lvbi5zcGxpdCgnIGluICcpO1xyXG4gICAgICAgIHZhciBpdGVtTmFtZSA9IHRlbXBBcnJbMF07XHJcbiAgICAgICAgdmFyIGF0dHIgPSB0ZW1wQXJyWzFdO1xyXG4gICAgICAgIHZhciBjb250cm9sbGVyTW9kZWwgPSB0aGlzLmRlZk1nci5nZXRDb250cm9sbGVyTW9kZWxCeU5hbWUoYXR0cik7XHJcbiAgICAgICAgaWYgKGNvbnRyb2xsZXJNb2RlbCkge1xyXG4gICAgICAgICAgICB2YXIgY29udHJvbGxlckluc3QgPSBjb250cm9sbGVyTW9kZWwuY29udHJvbGxlckluc3RhbmNlO1xyXG4gICAgICAgICAgICB2YXIgYm91bmRJdGVtID0gbmV3IEJvdW5kSXRlbVJlcGVhdF8xLkJvdW5kSXRlbVJlcGVhdChhdHRyLCBpdGVtTmFtZSwgZWxlbWVudCwgdGhpcy51a3UpO1xyXG4gICAgICAgICAgICBjb250cm9sbGVyTW9kZWwuYWRkQm91bmRJdGVtKGJvdW5kSXRlbSk7XHJcbiAgICAgICAgICAgIGJvdW5kSXRlbS5yZW5kZXIoY29udHJvbGxlckluc3QpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBBbmFseXplci5BTkFMWUlaRV9DT01QTEVURUQgPSAnYW5hbHlpemVDb21wbGV0ZWQnO1xyXG4gICAgcmV0dXJuIEFuYWx5emVyO1xyXG59KEV2ZW50RW1pdHRlcl8xLkV2ZW50RW1pdHRlcikpO1xyXG5leHBvcnRzLkFuYWx5emVyID0gQW5hbHl6ZXI7XHJcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvY29yZS9BbmFseXplci50c1xuICoqIG1vZHVsZSBpZCA9IDE2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iXSwic291cmNlUm9vdCI6IiJ9");
},function(module,exports,__webpack_require__){eval('"use strict";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar BoundItemBase_1 = __webpack_require__(18);\r\nvar UkuleleUtil_1 = __webpack_require__(9);\r\nvar BoundItemAttribute = (function (_super) {\r\n    __extends(BoundItemAttribute, _super);\r\n    function BoundItemAttribute(attrName, ukuTag, element, uku) {\r\n        _super.call(this, attrName, element, uku);\r\n        this.ukuTag = ukuTag;\r\n    }\r\n    BoundItemAttribute.prototype.render = function (controller) {\r\n        var attr = this.attributeName;\r\n        var key;\r\n        var elementName = this.element.tagName;\r\n        if (this.ukuTag === "selected" && elementName === "SELECT") {\r\n            var tempArr = this.attributeName.split("|");\r\n            attr = tempArr[0];\r\n            key = tempArr[1];\r\n        }\r\n        var finalValue = UkuleleUtil_1.UkuleleUtil.getFinalValue(this.uku, controller, attr);\r\n        if (this.ukuTag.search(\'data-item\') !== -1) {\r\n            finalValue = JSON.stringify(finalValue);\r\n            this.element.setAttribute(\'data-item\', finalValue);\r\n        }\r\n        else if (this.ukuTag === "selected" && elementName === "SELECT") {\r\n            var value = void 0;\r\n            if (key) {\r\n                value = finalValue[key];\r\n            }\r\n            else {\r\n                value = finalValue;\r\n            }\r\n            this.element.value = value;\r\n        }\r\n        else if (this.element.getAttribute("type") === "checkbox") {\r\n            this.element.checked = finalValue;\r\n        }\r\n        else if (this.ukuTag === "value") {\r\n            this.element.value = finalValue;\r\n        }\r\n        else if (this.element.getAttribute("type") === "radio") {\r\n            if (this.element.value === finalValue) {\r\n                this.element.setAttribute("checked", "true");\r\n            }\r\n        }\r\n        else if (this.element.nodeName === "IMG" && this.ukuTag === "src") {\r\n            if (finalValue) {\r\n                this.element.setAttribute(this.ukuTag, finalValue);\r\n            }\r\n        }\r\n        else if (this.ukuTag === "style") {\r\n            for (var cssName in finalValue) {\r\n                this.element.style[cssName] = finalValue[cssName];\r\n            }\r\n        }\r\n        else if (this.ukuTag === "visible") {\r\n            if (finalValue) {\r\n                this.element.style.visibility = "visible";\r\n            }\r\n            else {\r\n                this.element.style.visibility = "hidden";\r\n            }\r\n        }\r\n        else if (this.ukuTag === "render") {\r\n            if (finalValue) {\r\n                var oldDisplaySetting = this.element.getAttribute("data-old-display");\r\n                if (oldDisplaySetting !== null) {\r\n                    this.element.style.display = oldDisplaySetting;\r\n                }\r\n            }\r\n            else {\r\n                var oldDisplaySetting = this.element.getAttribute("data-old-display");\r\n                if (oldDisplaySetting === null) {\r\n                    oldDisplaySetting = this.element.style.display;\r\n                    this.element.setAttribute("data-old-display", oldDisplaySetting);\r\n                }\r\n                this.element.style.display = "none";\r\n            }\r\n        }\r\n        else {\r\n            if (this.ukuTag === "disabled") {\r\n                this.element.disabled = finalValue;\r\n            }\r\n            else {\r\n                this.element.setAttribute(this.ukuTag, finalValue);\r\n            }\r\n        }\r\n    };\r\n    return BoundItemAttribute;\r\n}(BoundItemBase_1.BoundItemBase));\r\nexports.BoundItemAttribute = BoundItemAttribute;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWwvQm91bmRJdGVtQXR0cmlidXRlLnRzP2MxYTgiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHNCQUFzQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEIiwiZmlsZSI6IjE3LmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn07XHJcbnZhciBCb3VuZEl0ZW1CYXNlXzEgPSByZXF1aXJlKFwiLi9Cb3VuZEl0ZW1CYXNlXCIpO1xyXG52YXIgVWt1bGVsZVV0aWxfMSA9IHJlcXVpcmUoXCIuLi91dGlsL1VrdWxlbGVVdGlsXCIpO1xyXG52YXIgQm91bmRJdGVtQXR0cmlidXRlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhCb3VuZEl0ZW1BdHRyaWJ1dGUsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBCb3VuZEl0ZW1BdHRyaWJ1dGUoYXR0ck5hbWUsIHVrdVRhZywgZWxlbWVudCwgdWt1KSB7XHJcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgYXR0ck5hbWUsIGVsZW1lbnQsIHVrdSk7XHJcbiAgICAgICAgdGhpcy51a3VUYWcgPSB1a3VUYWc7XHJcbiAgICB9XHJcbiAgICBCb3VuZEl0ZW1BdHRyaWJ1dGUucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChjb250cm9sbGVyKSB7XHJcbiAgICAgICAgdmFyIGF0dHIgPSB0aGlzLmF0dHJpYnV0ZU5hbWU7XHJcbiAgICAgICAgdmFyIGtleTtcclxuICAgICAgICB2YXIgZWxlbWVudE5hbWUgPSB0aGlzLmVsZW1lbnQudGFnTmFtZTtcclxuICAgICAgICBpZiAodGhpcy51a3VUYWcgPT09IFwic2VsZWN0ZWRcIiAmJiBlbGVtZW50TmFtZSA9PT0gXCJTRUxFQ1RcIikge1xyXG4gICAgICAgICAgICB2YXIgdGVtcEFyciA9IHRoaXMuYXR0cmlidXRlTmFtZS5zcGxpdChcInxcIik7XHJcbiAgICAgICAgICAgIGF0dHIgPSB0ZW1wQXJyWzBdO1xyXG4gICAgICAgICAgICBrZXkgPSB0ZW1wQXJyWzFdO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZmluYWxWYWx1ZSA9IFVrdWxlbGVVdGlsXzEuVWt1bGVsZVV0aWwuZ2V0RmluYWxWYWx1ZSh0aGlzLnVrdSwgY29udHJvbGxlciwgYXR0cik7XHJcbiAgICAgICAgaWYgKHRoaXMudWt1VGFnLnNlYXJjaCgnZGF0YS1pdGVtJykgIT09IC0xKSB7XHJcbiAgICAgICAgICAgIGZpbmFsVmFsdWUgPSBKU09OLnN0cmluZ2lmeShmaW5hbFZhbHVlKTtcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1pdGVtJywgZmluYWxWYWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMudWt1VGFnID09PSBcInNlbGVjdGVkXCIgJiYgZWxlbWVudE5hbWUgPT09IFwiU0VMRUNUXCIpIHtcclxuICAgICAgICAgICAgdmFyIHZhbHVlID0gdm9pZCAwO1xyXG4gICAgICAgICAgICBpZiAoa2V5KSB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IGZpbmFsVmFsdWVba2V5XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlID0gZmluYWxWYWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQudmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZShcInR5cGVcIikgPT09IFwiY2hlY2tib3hcIikge1xyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2hlY2tlZCA9IGZpbmFsVmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMudWt1VGFnID09PSBcInZhbHVlXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnZhbHVlID0gZmluYWxWYWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZShcInR5cGVcIikgPT09IFwicmFkaW9cIikge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50LnZhbHVlID09PSBmaW5hbFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKFwiY2hlY2tlZFwiLCBcInRydWVcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5lbGVtZW50Lm5vZGVOYW1lID09PSBcIklNR1wiICYmIHRoaXMudWt1VGFnID09PSBcInNyY1wiKSB7XHJcbiAgICAgICAgICAgIGlmIChmaW5hbFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKHRoaXMudWt1VGFnLCBmaW5hbFZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0aGlzLnVrdVRhZyA9PT0gXCJzdHlsZVwiKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGNzc05hbWUgaW4gZmluYWxWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlW2Nzc05hbWVdID0gZmluYWxWYWx1ZVtjc3NOYW1lXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0aGlzLnVrdVRhZyA9PT0gXCJ2aXNpYmxlXCIpIHtcclxuICAgICAgICAgICAgaWYgKGZpbmFsVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS52aXNpYmlsaXR5ID0gXCJ2aXNpYmxlXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy51a3VUYWcgPT09IFwicmVuZGVyXCIpIHtcclxuICAgICAgICAgICAgaWYgKGZpbmFsVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHZhciBvbGREaXNwbGF5U2V0dGluZyA9IHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLW9sZC1kaXNwbGF5XCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9sZERpc3BsYXlTZXR0aW5nICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBvbGREaXNwbGF5U2V0dGluZztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciBvbGREaXNwbGF5U2V0dGluZyA9IHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLW9sZC1kaXNwbGF5XCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9sZERpc3BsYXlTZXR0aW5nID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2xkRGlzcGxheVNldHRpbmcgPSB0aGlzLmVsZW1lbnQuc3R5bGUuZGlzcGxheTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1vbGQtZGlzcGxheVwiLCBvbGREaXNwbGF5U2V0dGluZyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy51a3VUYWcgPT09IFwiZGlzYWJsZWRcIikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmRpc2FibGVkID0gZmluYWxWYWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUodGhpcy51a3VUYWcsIGZpbmFsVmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBCb3VuZEl0ZW1BdHRyaWJ1dGU7XHJcbn0oQm91bmRJdGVtQmFzZV8xLkJvdW5kSXRlbUJhc2UpKTtcclxuZXhwb3J0cy5Cb3VuZEl0ZW1BdHRyaWJ1dGUgPSBCb3VuZEl0ZW1BdHRyaWJ1dGU7XHJcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvbW9kZWwvQm91bmRJdGVtQXR0cmlidXRlLnRzXG4gKiogbW9kdWxlIGlkID0gMTdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyJdLCJzb3VyY2VSb290IjoiIn0=')},function(module,exports){eval('"use strict";\r\nvar BoundItemBase = (function () {\r\n    function BoundItemBase(_attrName, _element, _uku) {\r\n        this.attributeName = _attrName;\r\n        this.element = _element;\r\n        this.uku = _uku;\r\n    }\r\n    BoundItemBase.prototype.render = function (controller) {\r\n    };\r\n    return BoundItemBase;\r\n}());\r\nexports.BoundItemBase = BoundItemBase;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWwvQm91bmRJdGVtQmFzZS50cz81NzdlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEIiwiZmlsZSI6IjE4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBCb3VuZEl0ZW1CYXNlID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEJvdW5kSXRlbUJhc2UoX2F0dHJOYW1lLCBfZWxlbWVudCwgX3VrdSkge1xyXG4gICAgICAgIHRoaXMuYXR0cmlidXRlTmFtZSA9IF9hdHRyTmFtZTtcclxuICAgICAgICB0aGlzLmVsZW1lbnQgPSBfZWxlbWVudDtcclxuICAgICAgICB0aGlzLnVrdSA9IF91a3U7XHJcbiAgICB9XHJcbiAgICBCb3VuZEl0ZW1CYXNlLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoY29udHJvbGxlcikge1xyXG4gICAgfTtcclxuICAgIHJldHVybiBCb3VuZEl0ZW1CYXNlO1xyXG59KCkpO1xyXG5leHBvcnRzLkJvdW5kSXRlbUJhc2UgPSBCb3VuZEl0ZW1CYXNlO1xyXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL21vZGVsL0JvdW5kSXRlbUJhc2UudHNcbiAqKiBtb2R1bGUgaWQgPSAxOFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==')},function(module,exports,__webpack_require__){eval('"use strict";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar BoundItemBase_1 = __webpack_require__(18);\r\nvar UkuleleUtil_1 = __webpack_require__(9);\r\nvar Selector_1 = __webpack_require__(10);\r\nvar BoundItemExpression = (function (_super) {\r\n    __extends(BoundItemExpression, _super);\r\n    function BoundItemExpression(attrName, expression, element, uku) {\r\n        _super.call(this, attrName, element, uku);\r\n        this.expression = expression;\r\n    }\r\n    BoundItemExpression.prototype.render = function (controller) {\r\n        var finalValue = UkuleleUtil_1.UkuleleUtil.getFinalValue(this.uku, controller, this.attributeName);\r\n        Selector_1.Selector.directText(this.element, finalValue);\r\n    };\r\n    return BoundItemExpression;\r\n}(BoundItemBase_1.BoundItemBase));\r\nexports.BoundItemExpression = BoundItemExpression;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWwvQm91bmRJdGVtRXhwcmVzc2lvbi50cz80YzY3Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixzQkFBc0I7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QiLCJmaWxlIjoiMTkuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XHJcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxufTtcclxudmFyIEJvdW5kSXRlbUJhc2VfMSA9IHJlcXVpcmUoXCIuL0JvdW5kSXRlbUJhc2VcIik7XHJcbnZhciBVa3VsZWxlVXRpbF8xID0gcmVxdWlyZShcIi4uL3V0aWwvVWt1bGVsZVV0aWxcIik7XHJcbnZhciBTZWxlY3Rvcl8xID0gcmVxdWlyZShcIi4uL2V4dGVuZC9TZWxlY3RvclwiKTtcclxudmFyIEJvdW5kSXRlbUV4cHJlc3Npb24gPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKEJvdW5kSXRlbUV4cHJlc3Npb24sIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBCb3VuZEl0ZW1FeHByZXNzaW9uKGF0dHJOYW1lLCBleHByZXNzaW9uLCBlbGVtZW50LCB1a3UpIHtcclxuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBhdHRyTmFtZSwgZWxlbWVudCwgdWt1KTtcclxuICAgICAgICB0aGlzLmV4cHJlc3Npb24gPSBleHByZXNzaW9uO1xyXG4gICAgfVxyXG4gICAgQm91bmRJdGVtRXhwcmVzc2lvbi5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKGNvbnRyb2xsZXIpIHtcclxuICAgICAgICB2YXIgZmluYWxWYWx1ZSA9IFVrdWxlbGVVdGlsXzEuVWt1bGVsZVV0aWwuZ2V0RmluYWxWYWx1ZSh0aGlzLnVrdSwgY29udHJvbGxlciwgdGhpcy5hdHRyaWJ1dGVOYW1lKTtcclxuICAgICAgICBTZWxlY3Rvcl8xLlNlbGVjdG9yLmRpcmVjdFRleHQodGhpcy5lbGVtZW50LCBmaW5hbFZhbHVlKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQm91bmRJdGVtRXhwcmVzc2lvbjtcclxufShCb3VuZEl0ZW1CYXNlXzEuQm91bmRJdGVtQmFzZSkpO1xyXG5leHBvcnRzLkJvdW5kSXRlbUV4cHJlc3Npb24gPSBCb3VuZEl0ZW1FeHByZXNzaW9uO1xyXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL21vZGVsL0JvdW5kSXRlbUV4cHJlc3Npb24udHNcbiAqKiBtb2R1bGUgaWQgPSAxOVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==')},function(module,exports,__webpack_require__){eval("\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar BoundItemBase_1 = __webpack_require__(18);\r\nvar UkuleleUtil_1 = __webpack_require__(9);\r\nvar BoundItemInnerText = (function (_super) {\r\n    __extends(BoundItemInnerText, _super);\r\n    function BoundItemInnerText(attrName, element, uku) {\r\n        _super.call(this, attrName, element, uku);\r\n        this.tagName = 'text';\r\n    }\r\n    BoundItemInnerText.prototype.render = function (controller) {\r\n        var finalValue = UkuleleUtil_1.UkuleleUtil.getFinalValue(this.uku, controller, this.attributeName);\r\n        this.element.innerHTML = finalValue;\r\n    };\r\n    return BoundItemInnerText;\r\n}(BoundItemBase_1.BoundItemBase));\r\nexports.BoundItemInnerText = BoundItemInnerText;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWwvQm91bmRJdGVtSW5uZXJUZXh0LnRzPzQ4MjMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHNCQUFzQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QiLCJmaWxlIjoiMjAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XHJcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxufTtcclxudmFyIEJvdW5kSXRlbUJhc2VfMSA9IHJlcXVpcmUoXCIuL0JvdW5kSXRlbUJhc2VcIik7XHJcbnZhciBVa3VsZWxlVXRpbF8xID0gcmVxdWlyZShcIi4uL3V0aWwvVWt1bGVsZVV0aWxcIik7XHJcbnZhciBCb3VuZEl0ZW1Jbm5lclRleHQgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKEJvdW5kSXRlbUlubmVyVGV4dCwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIEJvdW5kSXRlbUlubmVyVGV4dChhdHRyTmFtZSwgZWxlbWVudCwgdWt1KSB7XHJcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgYXR0ck5hbWUsIGVsZW1lbnQsIHVrdSk7XHJcbiAgICAgICAgdGhpcy50YWdOYW1lID0gJ3RleHQnO1xyXG4gICAgfVxyXG4gICAgQm91bmRJdGVtSW5uZXJUZXh0LnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoY29udHJvbGxlcikge1xyXG4gICAgICAgIHZhciBmaW5hbFZhbHVlID0gVWt1bGVsZVV0aWxfMS5Va3VsZWxlVXRpbC5nZXRGaW5hbFZhbHVlKHRoaXMudWt1LCBjb250cm9sbGVyLCB0aGlzLmF0dHJpYnV0ZU5hbWUpO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5pbm5lckhUTUwgPSBmaW5hbFZhbHVlO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBCb3VuZEl0ZW1Jbm5lclRleHQ7XHJcbn0oQm91bmRJdGVtQmFzZV8xLkJvdW5kSXRlbUJhc2UpKTtcclxuZXhwb3J0cy5Cb3VuZEl0ZW1Jbm5lclRleHQgPSBCb3VuZEl0ZW1Jbm5lclRleHQ7XHJcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvbW9kZWwvQm91bmRJdGVtSW5uZXJUZXh0LnRzXG4gKiogbW9kdWxlIGlkID0gMjBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyJdLCJzb3VyY2VSb290IjoiIn0=")},function(module,exports,__webpack_require__){eval('"use strict";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar BoundItemBase_1 = __webpack_require__(18);\r\nvar UkuleleUtil_1 = __webpack_require__(9);\r\nvar BoundItemRepeat = (function (_super) {\r\n    __extends(BoundItemRepeat, _super);\r\n    function BoundItemRepeat(attrName, itemName, element, uku) {\r\n        _super.call(this, attrName, element, uku);\r\n        this.expression = itemName;\r\n        this.renderTemplate = element.outerHTML;\r\n        this.parentElement = element.parentNode;\r\n        this.beginCommentString = undefined;\r\n        this.endCommentString = undefined;\r\n    }\r\n    BoundItemRepeat.prototype.render = function (controller) {\r\n        var finalValue = UkuleleUtil_1.UkuleleUtil.getFinalValue(this.uku, controller, this.attributeName);\r\n        if (!finalValue) {\r\n            return;\r\n        }\r\n        var self = this;\r\n        if (this.element && this.element.parentNode) {\r\n            //create repeate begin comment\r\n            this.beginCommentString = "begin uku-repeat: " + this.expression + " in " + this.attributeName;\r\n            var beginComment = document.createComment(this.beginCommentString);\r\n            this.element.parentNode.insertBefore(beginComment, this.element);\r\n            //create repeate end comment\r\n            this.endCommentString = "end uku-repeat: " + this.expression + " in " + this.attributeName;\r\n            var endComment = document.createComment(this.endCommentString);\r\n            this.element.parentNode.insertBefore(endComment, this.element.nextSibling);\r\n            //remove definition dom\r\n            this.element.parentNode.removeChild(this.element);\r\n        }\r\n        var treeWalker = document.createTreeWalker(this.parentElement, NodeFilter.SHOW_COMMENT, { acceptNode: function (node) {\r\n                if (node.nodeValue === self.beginCommentString) {\r\n                    return NodeFilter.FILTER_ACCEPT;\r\n                }\r\n                return NodeFilter.FILTER_SKIP;\r\n            } }, false);\r\n        /*function filter(node:Node) :any{\r\n            if (node.nodeValue === self.beginCommentString) {\r\n                return (NodeFilter.FILTER_ACCEPT);\r\n            }\r\n            return (NodeFilter.FILTER_SKIP);\r\n        }*/\r\n        function generateTempContainer() {\r\n            var index = UkuleleUtil_1.UkuleleUtil.searchHtmlTag(self.renderTemplate, "tr");\r\n            if (index === -1) {\r\n                return document.createElement("div");\r\n            }\r\n            else {\r\n                return document.createElement("tbody");\r\n            }\r\n        }\r\n        while (treeWalker.nextNode()) {\r\n            var commentNode = treeWalker.currentNode;\r\n            if (commentNode && commentNode.nodeValue === this.beginCommentString) {\r\n                //remove overtime dom.\r\n                while (commentNode.nextSibling && commentNode.nextSibling.nodeValue !== this.endCommentString) {\r\n                    commentNode.parentNode.removeChild(commentNode.nextSibling);\r\n                }\r\n                //create new dom\r\n                var tempDiv = generateTempContainer();\r\n                var blankDiv = generateTempContainer();\r\n                commentNode.parentNode.insertBefore(blankDiv, commentNode.nextSibling);\r\n                for (var i = 0; i < finalValue.length; i++) {\r\n                    tempDiv.insertAdjacentHTML(\'beforeEnd\', this.renderTemplate);\r\n                    if (i === finalValue.length - 1) {\r\n                        var childrenHTML = tempDiv.innerHTML;\r\n                        blankDiv.insertAdjacentHTML(\'beforeBegin\', childrenHTML);\r\n                        commentNode.parentNode.removeChild(blankDiv);\r\n                        tempDiv = null;\r\n                        blankDiv = null;\r\n                    }\r\n                }\r\n                var child = commentNode.nextSibling;\r\n                for (var j = 0; j < finalValue.length; j++) {\r\n                    child.removeAttribute("uku-repeat");\r\n                    var Uku_Clazz = this.uku.constructor;\r\n                    var ukulele = new Uku_Clazz(); //new Ukulele();\r\n                    ukulele.parentUku = this.uku;\r\n                    var compDef = ukulele.parentUku._internal_getDefinitionManager().getComponentsDefinition();\r\n                    var compPool = ukulele.parentUku._internal_getDefinitionManager().getComponentsPool();\r\n                    ukulele._internal_getDefinitionManager().setComponentsDefinition(compDef);\r\n                    ukulele._internal_getDefinitionManager().setComponentsPool(compPool);\r\n                    var sibling = child.nextSibling;\r\n                    var itemType = typeof finalValue[j];\r\n                    if (itemType === "object") {\r\n                        ukulele.registerController(this.expression, finalValue[j]);\r\n                    }\r\n                    else {\r\n                        ukulele.registerController(this.expression, { \'value\': finalValue[j] });\r\n                        var newOuterHtml = child.outerHTML.replace(new RegExp(this.expression, "gm"), this.expression + \'.value\');\r\n                        child.insertAdjacentHTML(\'afterend\', newOuterHtml);\r\n                        var newItemDom = child.nextSibling;\r\n                        child.parentNode.removeChild(child);\r\n                        child = newItemDom;\r\n                    }\r\n                    ukulele._internal_dealWithElement(child);\r\n                    child = sibling;\r\n                }\r\n            }\r\n        }\r\n        if (this.element.tagName === "OPTION") {\r\n            var expression = this.parentElement.getAttribute("uku-selected");\r\n            var tempArr = expression.split("|");\r\n            expression = tempArr[0];\r\n            var key = tempArr[1];\r\n            var value = this.uku._internal_getDefinitionManager().getFinalValueByExpression(expression);\r\n            if (key) {\r\n                this.parentElement.value = value[key];\r\n            }\r\n            else {\r\n                this.parentElement.value = value;\r\n            }\r\n        }\r\n    };\r\n    return BoundItemRepeat;\r\n}(BoundItemBase_1.BoundItemBase));\r\nexports.BoundItemRepeat = BoundItemRepeat;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWwvQm91bmRJdGVtUmVwZWF0LnRzPzliNzciXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHNCQUFzQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUdBQWlHO0FBQ2pHO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxFQUFFO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLHVCQUF1QjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQix1QkFBdUI7QUFDdEQ7QUFDQTtBQUNBLGtEQUFrRDtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUVBQXFFLHlCQUF5QjtBQUM5RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEIiwiZmlsZSI6IjIxLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn07XHJcbnZhciBCb3VuZEl0ZW1CYXNlXzEgPSByZXF1aXJlKFwiLi9Cb3VuZEl0ZW1CYXNlXCIpO1xyXG52YXIgVWt1bGVsZVV0aWxfMSA9IHJlcXVpcmUoXCIuLi91dGlsL1VrdWxlbGVVdGlsXCIpO1xyXG52YXIgQm91bmRJdGVtUmVwZWF0ID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhCb3VuZEl0ZW1SZXBlYXQsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBCb3VuZEl0ZW1SZXBlYXQoYXR0ck5hbWUsIGl0ZW1OYW1lLCBlbGVtZW50LCB1a3UpIHtcclxuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBhdHRyTmFtZSwgZWxlbWVudCwgdWt1KTtcclxuICAgICAgICB0aGlzLmV4cHJlc3Npb24gPSBpdGVtTmFtZTtcclxuICAgICAgICB0aGlzLnJlbmRlclRlbXBsYXRlID0gZWxlbWVudC5vdXRlckhUTUw7XHJcbiAgICAgICAgdGhpcy5wYXJlbnRFbGVtZW50ID0gZWxlbWVudC5wYXJlbnROb2RlO1xyXG4gICAgICAgIHRoaXMuYmVnaW5Db21tZW50U3RyaW5nID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMuZW5kQ29tbWVudFN0cmluZyA9IHVuZGVmaW5lZDtcclxuICAgIH1cclxuICAgIEJvdW5kSXRlbVJlcGVhdC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKGNvbnRyb2xsZXIpIHtcclxuICAgICAgICB2YXIgZmluYWxWYWx1ZSA9IFVrdWxlbGVVdGlsXzEuVWt1bGVsZVV0aWwuZ2V0RmluYWxWYWx1ZSh0aGlzLnVrdSwgY29udHJvbGxlciwgdGhpcy5hdHRyaWJ1dGVOYW1lKTtcclxuICAgICAgICBpZiAoIWZpbmFsVmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudCAmJiB0aGlzLmVsZW1lbnQucGFyZW50Tm9kZSkge1xyXG4gICAgICAgICAgICAvL2NyZWF0ZSByZXBlYXRlIGJlZ2luIGNvbW1lbnRcclxuICAgICAgICAgICAgdGhpcy5iZWdpbkNvbW1lbnRTdHJpbmcgPSBcImJlZ2luIHVrdS1yZXBlYXQ6IFwiICsgdGhpcy5leHByZXNzaW9uICsgXCIgaW4gXCIgKyB0aGlzLmF0dHJpYnV0ZU5hbWU7XHJcbiAgICAgICAgICAgIHZhciBiZWdpbkNvbW1lbnQgPSBkb2N1bWVudC5jcmVhdGVDb21tZW50KHRoaXMuYmVnaW5Db21tZW50U3RyaW5nKTtcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGJlZ2luQ29tbWVudCwgdGhpcy5lbGVtZW50KTtcclxuICAgICAgICAgICAgLy9jcmVhdGUgcmVwZWF0ZSBlbmQgY29tbWVudFxyXG4gICAgICAgICAgICB0aGlzLmVuZENvbW1lbnRTdHJpbmcgPSBcImVuZCB1a3UtcmVwZWF0OiBcIiArIHRoaXMuZXhwcmVzc2lvbiArIFwiIGluIFwiICsgdGhpcy5hdHRyaWJ1dGVOYW1lO1xyXG4gICAgICAgICAgICB2YXIgZW5kQ29tbWVudCA9IGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQodGhpcy5lbmRDb21tZW50U3RyaW5nKTtcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGVuZENvbW1lbnQsIHRoaXMuZWxlbWVudC5uZXh0U2libGluZyk7XHJcbiAgICAgICAgICAgIC8vcmVtb3ZlIGRlZmluaXRpb24gZG9tXHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuZWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciB0cmVlV2Fsa2VyID0gZG9jdW1lbnQuY3JlYXRlVHJlZVdhbGtlcih0aGlzLnBhcmVudEVsZW1lbnQsIE5vZGVGaWx0ZXIuU0hPV19DT01NRU5ULCB7IGFjY2VwdE5vZGU6IGZ1bmN0aW9uIChub2RlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobm9kZS5ub2RlVmFsdWUgPT09IHNlbGYuYmVnaW5Db21tZW50U3RyaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE5vZGVGaWx0ZXIuRklMVEVSX0FDQ0VQVDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBOb2RlRmlsdGVyLkZJTFRFUl9TS0lQO1xyXG4gICAgICAgICAgICB9IH0sIGZhbHNlKTtcclxuICAgICAgICAvKmZ1bmN0aW9uIGZpbHRlcihub2RlOk5vZGUpIDphbnl7XHJcbiAgICAgICAgICAgIGlmIChub2RlLm5vZGVWYWx1ZSA9PT0gc2VsZi5iZWdpbkNvbW1lbnRTdHJpbmcpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAoTm9kZUZpbHRlci5GSUxURVJfQUNDRVBUKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gKE5vZGVGaWx0ZXIuRklMVEVSX1NLSVApO1xyXG4gICAgICAgIH0qL1xyXG4gICAgICAgIGZ1bmN0aW9uIGdlbmVyYXRlVGVtcENvbnRhaW5lcigpIHtcclxuICAgICAgICAgICAgdmFyIGluZGV4ID0gVWt1bGVsZVV0aWxfMS5Va3VsZWxlVXRpbC5zZWFyY2hIdG1sVGFnKHNlbGYucmVuZGVyVGVtcGxhdGUsIFwidHJcIik7XHJcbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0Ym9keVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB3aGlsZSAodHJlZVdhbGtlci5uZXh0Tm9kZSgpKSB7XHJcbiAgICAgICAgICAgIHZhciBjb21tZW50Tm9kZSA9IHRyZWVXYWxrZXIuY3VycmVudE5vZGU7XHJcbiAgICAgICAgICAgIGlmIChjb21tZW50Tm9kZSAmJiBjb21tZW50Tm9kZS5ub2RlVmFsdWUgPT09IHRoaXMuYmVnaW5Db21tZW50U3RyaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAvL3JlbW92ZSBvdmVydGltZSBkb20uXHJcbiAgICAgICAgICAgICAgICB3aGlsZSAoY29tbWVudE5vZGUubmV4dFNpYmxpbmcgJiYgY29tbWVudE5vZGUubmV4dFNpYmxpbmcubm9kZVZhbHVlICE9PSB0aGlzLmVuZENvbW1lbnRTdHJpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb21tZW50Tm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGNvbW1lbnROb2RlLm5leHRTaWJsaW5nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vY3JlYXRlIG5ldyBkb21cclxuICAgICAgICAgICAgICAgIHZhciB0ZW1wRGl2ID0gZ2VuZXJhdGVUZW1wQ29udGFpbmVyKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgYmxhbmtEaXYgPSBnZW5lcmF0ZVRlbXBDb250YWluZXIoKTtcclxuICAgICAgICAgICAgICAgIGNvbW1lbnROb2RlLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGJsYW5rRGl2LCBjb21tZW50Tm9kZS5uZXh0U2libGluZyk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZpbmFsVmFsdWUubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wRGl2Lmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlRW5kJywgdGhpcy5yZW5kZXJUZW1wbGF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT09IGZpbmFsVmFsdWUubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGRyZW5IVE1MID0gdGVtcERpdi5pbm5lckhUTUw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsYW5rRGl2Lmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlQmVnaW4nLCBjaGlsZHJlbkhUTUwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21tZW50Tm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGJsYW5rRGl2KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcERpdiA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsYW5rRGl2ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSBjb21tZW50Tm9kZS5uZXh0U2libGluZztcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZmluYWxWYWx1ZS5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkLnJlbW92ZUF0dHJpYnV0ZShcInVrdS1yZXBlYXRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIFVrdV9DbGF6eiA9IHRoaXMudWt1LmNvbnN0cnVjdG9yO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB1a3VsZWxlID0gbmV3IFVrdV9DbGF6eigpOyAvL25ldyBVa3VsZWxlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdWt1bGVsZS5wYXJlbnRVa3UgPSB0aGlzLnVrdTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY29tcERlZiA9IHVrdWxlbGUucGFyZW50VWt1Ll9pbnRlcm5hbF9nZXREZWZpbml0aW9uTWFuYWdlcigpLmdldENvbXBvbmVudHNEZWZpbml0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbXBQb29sID0gdWt1bGVsZS5wYXJlbnRVa3UuX2ludGVybmFsX2dldERlZmluaXRpb25NYW5hZ2VyKCkuZ2V0Q29tcG9uZW50c1Bvb2woKTtcclxuICAgICAgICAgICAgICAgICAgICB1a3VsZWxlLl9pbnRlcm5hbF9nZXREZWZpbml0aW9uTWFuYWdlcigpLnNldENvbXBvbmVudHNEZWZpbml0aW9uKGNvbXBEZWYpO1xyXG4gICAgICAgICAgICAgICAgICAgIHVrdWxlbGUuX2ludGVybmFsX2dldERlZmluaXRpb25NYW5hZ2VyKCkuc2V0Q29tcG9uZW50c1Bvb2woY29tcFBvb2wpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzaWJsaW5nID0gY2hpbGQubmV4dFNpYmxpbmc7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW1UeXBlID0gdHlwZW9mIGZpbmFsVmFsdWVbal07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW1UeXBlID09PSBcIm9iamVjdFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVrdWxlbGUucmVnaXN0ZXJDb250cm9sbGVyKHRoaXMuZXhwcmVzc2lvbiwgZmluYWxWYWx1ZVtqXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1a3VsZWxlLnJlZ2lzdGVyQ29udHJvbGxlcih0aGlzLmV4cHJlc3Npb24sIHsgJ3ZhbHVlJzogZmluYWxWYWx1ZVtqXSB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld091dGVySHRtbCA9IGNoaWxkLm91dGVySFRNTC5yZXBsYWNlKG5ldyBSZWdFeHAodGhpcy5leHByZXNzaW9uLCBcImdtXCIpLCB0aGlzLmV4cHJlc3Npb24gKyAnLnZhbHVlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkLmluc2VydEFkamFjZW50SFRNTCgnYWZ0ZXJlbmQnLCBuZXdPdXRlckh0bWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV3SXRlbURvbSA9IGNoaWxkLm5leHRTaWJsaW5nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGlsZC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGNoaWxkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGQgPSBuZXdJdGVtRG9tO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB1a3VsZWxlLl9pbnRlcm5hbF9kZWFsV2l0aEVsZW1lbnQoY2hpbGQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkID0gc2libGluZztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5lbGVtZW50LnRhZ05hbWUgPT09IFwiT1BUSU9OXCIpIHtcclxuICAgICAgICAgICAgdmFyIGV4cHJlc3Npb24gPSB0aGlzLnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKFwidWt1LXNlbGVjdGVkXCIpO1xyXG4gICAgICAgICAgICB2YXIgdGVtcEFyciA9IGV4cHJlc3Npb24uc3BsaXQoXCJ8XCIpO1xyXG4gICAgICAgICAgICBleHByZXNzaW9uID0gdGVtcEFyclswXTtcclxuICAgICAgICAgICAgdmFyIGtleSA9IHRlbXBBcnJbMV07XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IHRoaXMudWt1Ll9pbnRlcm5hbF9nZXREZWZpbml0aW9uTWFuYWdlcigpLmdldEZpbmFsVmFsdWVCeUV4cHJlc3Npb24oZXhwcmVzc2lvbik7XHJcbiAgICAgICAgICAgIGlmIChrZXkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50RWxlbWVudC52YWx1ZSA9IHZhbHVlW2tleV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudEVsZW1lbnQudmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gQm91bmRJdGVtUmVwZWF0O1xyXG59KEJvdW5kSXRlbUJhc2VfMS5Cb3VuZEl0ZW1CYXNlKSk7XHJcbmV4cG9ydHMuQm91bmRJdGVtUmVwZWF0ID0gQm91bmRJdGVtUmVwZWF0O1xyXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL21vZGVsL0JvdW5kSXRlbVJlcGVhdC50c1xuICoqIG1vZHVsZSBpZCA9IDIxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iXSwic291cmNlUm9vdCI6IiJ9');
},function(module,exports,__webpack_require__){eval('"use strict";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar BoundItemBase_1 = __webpack_require__(18);\r\nvar UkuleleUtil_1 = __webpack_require__(9);\r\nvar BoundItemComponentAttribute = (function (_super) {\r\n    __extends(BoundItemComponentAttribute, _super);\r\n    function BoundItemComponentAttribute(attrName, ukuTag, cc, uku) {\r\n        _super.call(this, attrName, null, uku);\r\n        this.ukuTag = ukuTag;\r\n        this.componentController = cc;\r\n    }\r\n    BoundItemComponentAttribute.prototype.render = function (controller) {\r\n        var finalValue = UkuleleUtil_1.UkuleleUtil.getFinalValue(this.uku, controller, this.attributeName);\r\n        this.componentController[this.ukuTag] = finalValue;\r\n        this.uku.refresh(this.componentController._alias);\r\n    };\r\n    return BoundItemComponentAttribute;\r\n}(BoundItemBase_1.BoundItemBase));\r\nexports.BoundItemComponentAttribute = BoundItemComponentAttribute;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWwvQm91bmRJdGVtQ29tcG9uZW50QXR0cmlidXRlLnRzP2JjODUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHNCQUFzQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEIiwiZmlsZSI6IjIyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn07XHJcbnZhciBCb3VuZEl0ZW1CYXNlXzEgPSByZXF1aXJlKFwiLi9Cb3VuZEl0ZW1CYXNlXCIpO1xyXG52YXIgVWt1bGVsZVV0aWxfMSA9IHJlcXVpcmUoXCIuLi91dGlsL1VrdWxlbGVVdGlsXCIpO1xyXG52YXIgQm91bmRJdGVtQ29tcG9uZW50QXR0cmlidXRlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhCb3VuZEl0ZW1Db21wb25lbnRBdHRyaWJ1dGUsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBCb3VuZEl0ZW1Db21wb25lbnRBdHRyaWJ1dGUoYXR0ck5hbWUsIHVrdVRhZywgY2MsIHVrdSkge1xyXG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGF0dHJOYW1lLCBudWxsLCB1a3UpO1xyXG4gICAgICAgIHRoaXMudWt1VGFnID0gdWt1VGFnO1xyXG4gICAgICAgIHRoaXMuY29tcG9uZW50Q29udHJvbGxlciA9IGNjO1xyXG4gICAgfVxyXG4gICAgQm91bmRJdGVtQ29tcG9uZW50QXR0cmlidXRlLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoY29udHJvbGxlcikge1xyXG4gICAgICAgIHZhciBmaW5hbFZhbHVlID0gVWt1bGVsZVV0aWxfMS5Va3VsZWxlVXRpbC5nZXRGaW5hbFZhbHVlKHRoaXMudWt1LCBjb250cm9sbGVyLCB0aGlzLmF0dHJpYnV0ZU5hbWUpO1xyXG4gICAgICAgIHRoaXMuY29tcG9uZW50Q29udHJvbGxlclt0aGlzLnVrdVRhZ10gPSBmaW5hbFZhbHVlO1xyXG4gICAgICAgIHRoaXMudWt1LnJlZnJlc2godGhpcy5jb21wb25lbnRDb250cm9sbGVyLl9hbGlhcyk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEJvdW5kSXRlbUNvbXBvbmVudEF0dHJpYnV0ZTtcclxufShCb3VuZEl0ZW1CYXNlXzEuQm91bmRJdGVtQmFzZSkpO1xyXG5leHBvcnRzLkJvdW5kSXRlbUNvbXBvbmVudEF0dHJpYnV0ZSA9IEJvdW5kSXRlbUNvbXBvbmVudEF0dHJpYnV0ZTtcclxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9tb2RlbC9Cb3VuZEl0ZW1Db21wb25lbnRBdHRyaWJ1dGUudHNcbiAqKiBtb2R1bGUgaWQgPSAyMlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==')},function(module,exports,__webpack_require__){eval('"use strict";\r\nvar UkuleleUtil_1 = __webpack_require__(9);\r\nvar EventListener_1 = __webpack_require__(24);\r\nvar Selector_1 = __webpack_require__(10);\r\nfunction elementChangedBinder(element, tagName, controllerModel, handler, host) {\r\n    var elementStrategies = [inputTextCase, textareaCase, selectCase, checkboxCase, radioCase];\r\n    for (var i = 0; i < elementStrategies.length; i++) {\r\n        var func = elementStrategies[i];\r\n        var goon = func.apply(this, arguments);\r\n        if (goon) {\r\n            break;\r\n        }\r\n    }\r\n}\r\nexports.elementChangedBinder = elementChangedBinder;\r\nfunction inputTextCase(element, tagName, controllerModel, handler, host) {\r\n    var elementName = element.tagName;\r\n    if (elementName === "INPUT" && isSupportInputType(element) && tagName === "value") {\r\n        var eventType = \'change\';\r\n        var inputType = element.getAttribute(\'type\');\r\n        if (inputType === "text") {\r\n            eventType = \'input\';\r\n        }\r\n        EventListener_1.EventListener.addEventListener(element, eventType, function (e) {\r\n            var attr = element.getAttribute("uku-" + tagName);\r\n            attr = UkuleleUtil_1.UkuleleUtil.getFinalAttribute(attr);\r\n            var temp = attr.split(".");\r\n            var finalInstance = controllerModel.controllerInstance;\r\n            for (var i = 0; i < temp.length - 1; i++) {\r\n                finalInstance = finalInstance[temp[i]];\r\n            }\r\n            finalInstance[temp[temp.length - 1]] = element.value;\r\n            if (handler) {\r\n                handler.call(host, controllerModel.alias, element);\r\n            }\r\n        });\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction isSupportInputType(element) {\r\n    var type = element.getAttribute("type");\r\n    if (type !== "checkbox" && type !== "radio") {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction textareaCase(element, tagName, controllerModel, handler, host) {\r\n    var elementName = element.tagName;\r\n    if (elementName === "TEXTAREA" && tagName === "value") {\r\n        EventListener_1.EventListener.addEventListener(element, \'input\', function (e) {\r\n            var attr = element.getAttribute("uku-" + tagName);\r\n            attr = UkuleleUtil_1.UkuleleUtil.getFinalAttribute(attr);\r\n            var temp = attr.split(".");\r\n            var finalInstance = controllerModel.controllerInstance;\r\n            for (var i = 0; i < temp.length - 1; i++) {\r\n                finalInstance = finalInstance[temp[i]];\r\n            }\r\n            finalInstance[temp[temp.length - 1]] = element.value;\r\n            if (handler) {\r\n                handler.call(host, controllerModel.alias, element);\r\n            }\r\n        });\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction selectCase(element, tagName, controllerModel, handler, host) {\r\n    var elementName = element.tagName;\r\n    if ((elementName === "SELECT" && tagName === "selected")) {\r\n        EventListener_1.EventListener.addEventListener(element, \'change\', function (e) {\r\n            var attr = element.getAttribute("uku-" + tagName);\r\n            var key;\r\n            var tmpArr = attr.split("|");\r\n            attr = tmpArr[0];\r\n            key = tmpArr[1];\r\n            attr = UkuleleUtil_1.UkuleleUtil.getFinalAttribute(attr);\r\n            var temp = attr.split(".");\r\n            var finalInstance = controllerModel.controllerInstance;\r\n            for (var i = 0; i < temp.length - 1; i++) {\r\n                finalInstance = finalInstance[temp[i]];\r\n            }\r\n            var options = Selector_1.Selector.querySelectorAll(element, "option");\r\n            for (var j = 0; j < options.length; j++) {\r\n                var option = options[j];\r\n                if (option.selected) {\r\n                    var selectedItem = JSON.parse(option.getAttribute("data-item"));\r\n                    finalInstance[temp[temp.length - 1]] = selectedItem;\r\n                }\r\n            }\r\n            if (handler) {\r\n                handler.call(host, controllerModel.alias, element);\r\n            }\r\n        });\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction checkboxCase(element, tagName, controllerModel, handler, host) {\r\n    var elementName = element.tagName;\r\n    if (elementName === "INPUT" && tagName === "value" && element.getAttribute("type") === "checkbox") {\r\n        EventListener_1.EventListener.addEventListener(element, \'change\', function (e) {\r\n            var attr = element.getAttribute("uku-" + tagName);\r\n            attr = UkuleleUtil_1.UkuleleUtil.getFinalAttribute(attr);\r\n            var temp = attr.split(".");\r\n            var finalInstance = controllerModel.controllerInstance;\r\n            for (var i = 0; i < temp.length - 1; i++) {\r\n                finalInstance = finalInstance[temp[i]];\r\n            }\r\n            finalInstance[temp[temp.length - 1]] = element.checked;\r\n            if (handler) {\r\n                handler.call(host, controllerModel.alias, element);\r\n            }\r\n        });\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction radioCase(element, tagName, controllerModel, handler, host) {\r\n    var elementName = element.tagName;\r\n    if (elementName === "INPUT" && tagName === "selected" && element.getAttribute("type") === "radio") {\r\n        EventListener_1.EventListener.addEventListener(element, \'change\', function (e) {\r\n            var attr = element.getAttribute("uku-" + tagName);\r\n            attr = UkuleleUtil_1.UkuleleUtil.getFinalAttribute(attr);\r\n            var temp = attr.split(".");\r\n            var finalInstance = controllerModel.controllerInstance;\r\n            for (var i = 0; i < temp.length - 1; i++) {\r\n                finalInstance = finalInstance[temp[i]];\r\n            }\r\n            if (element.checked) {\r\n                finalInstance[temp[temp.length - 1]] = element.value;\r\n                if (handler) {\r\n                    handler.call(host, controllerModel.alias, element);\r\n                }\r\n            }\r\n        });\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9FbGVtZW50QWN0aW9uQmluZGVyLnRzPzkyOTIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLDhCQUE4QjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIscUJBQXFCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixxQkFBcUI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHFCQUFxQjtBQUNoRDtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsb0JBQW9CO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIscUJBQXFCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIscUJBQXFCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiMjMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcclxudmFyIFVrdWxlbGVVdGlsXzEgPSByZXF1aXJlKCcuLi91dGlsL1VrdWxlbGVVdGlsJyk7XHJcbnZhciBFdmVudExpc3RlbmVyXzEgPSByZXF1aXJlKCcuLi9leHRlbmQvRXZlbnRMaXN0ZW5lcicpO1xyXG52YXIgU2VsZWN0b3JfMSA9IHJlcXVpcmUoJy4uL2V4dGVuZC9TZWxlY3RvcicpO1xyXG5mdW5jdGlvbiBlbGVtZW50Q2hhbmdlZEJpbmRlcihlbGVtZW50LCB0YWdOYW1lLCBjb250cm9sbGVyTW9kZWwsIGhhbmRsZXIsIGhvc3QpIHtcclxuICAgIHZhciBlbGVtZW50U3RyYXRlZ2llcyA9IFtpbnB1dFRleHRDYXNlLCB0ZXh0YXJlYUNhc2UsIHNlbGVjdENhc2UsIGNoZWNrYm94Q2FzZSwgcmFkaW9DYXNlXTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudFN0cmF0ZWdpZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB2YXIgZnVuYyA9IGVsZW1lbnRTdHJhdGVnaWVzW2ldO1xyXG4gICAgICAgIHZhciBnb29uID0gZnVuYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgICAgIGlmIChnb29uKSB7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5leHBvcnRzLmVsZW1lbnRDaGFuZ2VkQmluZGVyID0gZWxlbWVudENoYW5nZWRCaW5kZXI7XHJcbmZ1bmN0aW9uIGlucHV0VGV4dENhc2UoZWxlbWVudCwgdGFnTmFtZSwgY29udHJvbGxlck1vZGVsLCBoYW5kbGVyLCBob3N0KSB7XHJcbiAgICB2YXIgZWxlbWVudE5hbWUgPSBlbGVtZW50LnRhZ05hbWU7XHJcbiAgICBpZiAoZWxlbWVudE5hbWUgPT09IFwiSU5QVVRcIiAmJiBpc1N1cHBvcnRJbnB1dFR5cGUoZWxlbWVudCkgJiYgdGFnTmFtZSA9PT0gXCJ2YWx1ZVwiKSB7XHJcbiAgICAgICAgdmFyIGV2ZW50VHlwZSA9ICdjaGFuZ2UnO1xyXG4gICAgICAgIHZhciBpbnB1dFR5cGUgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgndHlwZScpO1xyXG4gICAgICAgIGlmIChpbnB1dFR5cGUgPT09IFwidGV4dFwiKSB7XHJcbiAgICAgICAgICAgIGV2ZW50VHlwZSA9ICdpbnB1dCc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIEV2ZW50TGlzdGVuZXJfMS5FdmVudExpc3RlbmVyLmFkZEV2ZW50TGlzdGVuZXIoZWxlbWVudCwgZXZlbnRUeXBlLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICB2YXIgYXR0ciA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwidWt1LVwiICsgdGFnTmFtZSk7XHJcbiAgICAgICAgICAgIGF0dHIgPSBVa3VsZWxlVXRpbF8xLlVrdWxlbGVVdGlsLmdldEZpbmFsQXR0cmlidXRlKGF0dHIpO1xyXG4gICAgICAgICAgICB2YXIgdGVtcCA9IGF0dHIuc3BsaXQoXCIuXCIpO1xyXG4gICAgICAgICAgICB2YXIgZmluYWxJbnN0YW5jZSA9IGNvbnRyb2xsZXJNb2RlbC5jb250cm9sbGVySW5zdGFuY2U7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGVtcC5sZW5ndGggLSAxOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGZpbmFsSW5zdGFuY2UgPSBmaW5hbEluc3RhbmNlW3RlbXBbaV1dO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZpbmFsSW5zdGFuY2VbdGVtcFt0ZW1wLmxlbmd0aCAtIDFdXSA9IGVsZW1lbnQudmFsdWU7XHJcbiAgICAgICAgICAgIGlmIChoYW5kbGVyKSB7XHJcbiAgICAgICAgICAgICAgICBoYW5kbGVyLmNhbGwoaG9zdCwgY29udHJvbGxlck1vZGVsLmFsaWFzLCBlbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59XHJcbmZ1bmN0aW9uIGlzU3VwcG9ydElucHV0VHlwZShlbGVtZW50KSB7XHJcbiAgICB2YXIgdHlwZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwidHlwZVwiKTtcclxuICAgIGlmICh0eXBlICE9PSBcImNoZWNrYm94XCIgJiYgdHlwZSAhPT0gXCJyYWRpb1wiKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbn1cclxuZnVuY3Rpb24gdGV4dGFyZWFDYXNlKGVsZW1lbnQsIHRhZ05hbWUsIGNvbnRyb2xsZXJNb2RlbCwgaGFuZGxlciwgaG9zdCkge1xyXG4gICAgdmFyIGVsZW1lbnROYW1lID0gZWxlbWVudC50YWdOYW1lO1xyXG4gICAgaWYgKGVsZW1lbnROYW1lID09PSBcIlRFWFRBUkVBXCIgJiYgdGFnTmFtZSA9PT0gXCJ2YWx1ZVwiKSB7XHJcbiAgICAgICAgRXZlbnRMaXN0ZW5lcl8xLkV2ZW50TGlzdGVuZXIuYWRkRXZlbnRMaXN0ZW5lcihlbGVtZW50LCAnaW5wdXQnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICB2YXIgYXR0ciA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwidWt1LVwiICsgdGFnTmFtZSk7XHJcbiAgICAgICAgICAgIGF0dHIgPSBVa3VsZWxlVXRpbF8xLlVrdWxlbGVVdGlsLmdldEZpbmFsQXR0cmlidXRlKGF0dHIpO1xyXG4gICAgICAgICAgICB2YXIgdGVtcCA9IGF0dHIuc3BsaXQoXCIuXCIpO1xyXG4gICAgICAgICAgICB2YXIgZmluYWxJbnN0YW5jZSA9IGNvbnRyb2xsZXJNb2RlbC5jb250cm9sbGVySW5zdGFuY2U7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGVtcC5sZW5ndGggLSAxOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGZpbmFsSW5zdGFuY2UgPSBmaW5hbEluc3RhbmNlW3RlbXBbaV1dO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZpbmFsSW5zdGFuY2VbdGVtcFt0ZW1wLmxlbmd0aCAtIDFdXSA9IGVsZW1lbnQudmFsdWU7XHJcbiAgICAgICAgICAgIGlmIChoYW5kbGVyKSB7XHJcbiAgICAgICAgICAgICAgICBoYW5kbGVyLmNhbGwoaG9zdCwgY29udHJvbGxlck1vZGVsLmFsaWFzLCBlbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59XHJcbmZ1bmN0aW9uIHNlbGVjdENhc2UoZWxlbWVudCwgdGFnTmFtZSwgY29udHJvbGxlck1vZGVsLCBoYW5kbGVyLCBob3N0KSB7XHJcbiAgICB2YXIgZWxlbWVudE5hbWUgPSBlbGVtZW50LnRhZ05hbWU7XHJcbiAgICBpZiAoKGVsZW1lbnROYW1lID09PSBcIlNFTEVDVFwiICYmIHRhZ05hbWUgPT09IFwic2VsZWN0ZWRcIikpIHtcclxuICAgICAgICBFdmVudExpc3RlbmVyXzEuRXZlbnRMaXN0ZW5lci5hZGRFdmVudExpc3RlbmVyKGVsZW1lbnQsICdjaGFuZ2UnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICB2YXIgYXR0ciA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwidWt1LVwiICsgdGFnTmFtZSk7XHJcbiAgICAgICAgICAgIHZhciBrZXk7XHJcbiAgICAgICAgICAgIHZhciB0bXBBcnIgPSBhdHRyLnNwbGl0KFwifFwiKTtcclxuICAgICAgICAgICAgYXR0ciA9IHRtcEFyclswXTtcclxuICAgICAgICAgICAga2V5ID0gdG1wQXJyWzFdO1xyXG4gICAgICAgICAgICBhdHRyID0gVWt1bGVsZVV0aWxfMS5Va3VsZWxlVXRpbC5nZXRGaW5hbEF0dHJpYnV0ZShhdHRyKTtcclxuICAgICAgICAgICAgdmFyIHRlbXAgPSBhdHRyLnNwbGl0KFwiLlwiKTtcclxuICAgICAgICAgICAgdmFyIGZpbmFsSW5zdGFuY2UgPSBjb250cm9sbGVyTW9kZWwuY29udHJvbGxlckluc3RhbmNlO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRlbXAubGVuZ3RoIC0gMTsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBmaW5hbEluc3RhbmNlID0gZmluYWxJbnN0YW5jZVt0ZW1wW2ldXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9IFNlbGVjdG9yXzEuU2VsZWN0b3IucXVlcnlTZWxlY3RvckFsbChlbGVtZW50LCBcIm9wdGlvblwiKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBvcHRpb25zLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb3B0aW9uID0gb3B0aW9uc1tqXTtcclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb24uc2VsZWN0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRJdGVtID0gSlNPTi5wYXJzZShvcHRpb24uZ2V0QXR0cmlidXRlKFwiZGF0YS1pdGVtXCIpKTtcclxuICAgICAgICAgICAgICAgICAgICBmaW5hbEluc3RhbmNlW3RlbXBbdGVtcC5sZW5ndGggLSAxXV0gPSBzZWxlY3RlZEl0ZW07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGhhbmRsZXIpIHtcclxuICAgICAgICAgICAgICAgIGhhbmRsZXIuY2FsbChob3N0LCBjb250cm9sbGVyTW9kZWwuYWxpYXMsIGVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbn1cclxuZnVuY3Rpb24gY2hlY2tib3hDYXNlKGVsZW1lbnQsIHRhZ05hbWUsIGNvbnRyb2xsZXJNb2RlbCwgaGFuZGxlciwgaG9zdCkge1xyXG4gICAgdmFyIGVsZW1lbnROYW1lID0gZWxlbWVudC50YWdOYW1lO1xyXG4gICAgaWYgKGVsZW1lbnROYW1lID09PSBcIklOUFVUXCIgJiYgdGFnTmFtZSA9PT0gXCJ2YWx1ZVwiICYmIGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwidHlwZVwiKSA9PT0gXCJjaGVja2JveFwiKSB7XHJcbiAgICAgICAgRXZlbnRMaXN0ZW5lcl8xLkV2ZW50TGlzdGVuZXIuYWRkRXZlbnRMaXN0ZW5lcihlbGVtZW50LCAnY2hhbmdlJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgdmFyIGF0dHIgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShcInVrdS1cIiArIHRhZ05hbWUpO1xyXG4gICAgICAgICAgICBhdHRyID0gVWt1bGVsZVV0aWxfMS5Va3VsZWxlVXRpbC5nZXRGaW5hbEF0dHJpYnV0ZShhdHRyKTtcclxuICAgICAgICAgICAgdmFyIHRlbXAgPSBhdHRyLnNwbGl0KFwiLlwiKTtcclxuICAgICAgICAgICAgdmFyIGZpbmFsSW5zdGFuY2UgPSBjb250cm9sbGVyTW9kZWwuY29udHJvbGxlckluc3RhbmNlO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRlbXAubGVuZ3RoIC0gMTsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBmaW5hbEluc3RhbmNlID0gZmluYWxJbnN0YW5jZVt0ZW1wW2ldXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmaW5hbEluc3RhbmNlW3RlbXBbdGVtcC5sZW5ndGggLSAxXV0gPSBlbGVtZW50LmNoZWNrZWQ7XHJcbiAgICAgICAgICAgIGlmIChoYW5kbGVyKSB7XHJcbiAgICAgICAgICAgICAgICBoYW5kbGVyLmNhbGwoaG9zdCwgY29udHJvbGxlck1vZGVsLmFsaWFzLCBlbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59XHJcbmZ1bmN0aW9uIHJhZGlvQ2FzZShlbGVtZW50LCB0YWdOYW1lLCBjb250cm9sbGVyTW9kZWwsIGhhbmRsZXIsIGhvc3QpIHtcclxuICAgIHZhciBlbGVtZW50TmFtZSA9IGVsZW1lbnQudGFnTmFtZTtcclxuICAgIGlmIChlbGVtZW50TmFtZSA9PT0gXCJJTlBVVFwiICYmIHRhZ05hbWUgPT09IFwic2VsZWN0ZWRcIiAmJiBlbGVtZW50LmdldEF0dHJpYnV0ZShcInR5cGVcIikgPT09IFwicmFkaW9cIikge1xyXG4gICAgICAgIEV2ZW50TGlzdGVuZXJfMS5FdmVudExpc3RlbmVyLmFkZEV2ZW50TGlzdGVuZXIoZWxlbWVudCwgJ2NoYW5nZScsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIHZhciBhdHRyID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJ1a3UtXCIgKyB0YWdOYW1lKTtcclxuICAgICAgICAgICAgYXR0ciA9IFVrdWxlbGVVdGlsXzEuVWt1bGVsZVV0aWwuZ2V0RmluYWxBdHRyaWJ1dGUoYXR0cik7XHJcbiAgICAgICAgICAgIHZhciB0ZW1wID0gYXR0ci5zcGxpdChcIi5cIik7XHJcbiAgICAgICAgICAgIHZhciBmaW5hbEluc3RhbmNlID0gY29udHJvbGxlck1vZGVsLmNvbnRyb2xsZXJJbnN0YW5jZTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0ZW1wLmxlbmd0aCAtIDE7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgZmluYWxJbnN0YW5jZSA9IGZpbmFsSW5zdGFuY2VbdGVtcFtpXV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGVsZW1lbnQuY2hlY2tlZCkge1xyXG4gICAgICAgICAgICAgICAgZmluYWxJbnN0YW5jZVt0ZW1wW3RlbXAubGVuZ3RoIC0gMV1dID0gZWxlbWVudC52YWx1ZTtcclxuICAgICAgICAgICAgICAgIGlmIChoYW5kbGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlci5jYWxsKGhvc3QsIGNvbnRyb2xsZXJNb2RlbC5hbGlhcywgZWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxufVxyXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL2NvcmUvRWxlbWVudEFjdGlvbkJpbmRlci50c1xuICoqIG1vZHVsZSBpZCA9IDIzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iXSwic291cmNlUm9vdCI6IiJ9')},function(module,exports){eval("\"use strict\";\r\nvar EventListener = (function () {\r\n    function EventListener() {\r\n    }\r\n    EventListener.addEventListener = function (element, eventType, handler) {\r\n        if (window.hasOwnProperty('jQuery') && typeof window['jQuery'] !== undefined) {\r\n            return window['jQuery'](element).on(eventType, function (e) {\r\n                handler && handler(e);\r\n            });\r\n        }\r\n        else {\r\n            return element.addEventListener(eventType, handler);\r\n        }\r\n    };\r\n    return EventListener;\r\n}());\r\nexports.EventListener = EventListener;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvZXh0ZW5kL0V2ZW50TGlzdGVuZXIudHM/YmMyNiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCIsImZpbGUiOiIyNC5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xyXG52YXIgRXZlbnRMaXN0ZW5lciA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBFdmVudExpc3RlbmVyKCkge1xyXG4gICAgfVxyXG4gICAgRXZlbnRMaXN0ZW5lci5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKGVsZW1lbnQsIGV2ZW50VHlwZSwgaGFuZGxlcikge1xyXG4gICAgICAgIGlmICh3aW5kb3cuaGFzT3duUHJvcGVydHkoJ2pRdWVyeScpICYmIHR5cGVvZiB3aW5kb3dbJ2pRdWVyeSddICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHdpbmRvd1snalF1ZXJ5J10oZWxlbWVudCkub24oZXZlbnRUeXBlLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgaGFuZGxlciAmJiBoYW5kbGVyKGUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBoYW5kbGVyKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEV2ZW50TGlzdGVuZXI7XHJcbn0oKSk7XHJcbmV4cG9ydHMuRXZlbnRMaXN0ZW5lciA9IEV2ZW50TGlzdGVuZXI7XHJcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvZXh0ZW5kL0V2ZW50TGlzdGVuZXIudHNcbiAqKiBtb2R1bGUgaWQgPSAyNFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==")}])});